/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin,
  getNotePath: () => getNotePath,
  readNote: () => readNote
});
module.exports = __toCommonJS(main_exports);

// node_modules/@11labs/client/dist/lib.modern.js
function e() {
  return e = Object.assign ? Object.assign.bind() : function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var a2 in n2)
        ({}).hasOwnProperty.call(n2, a2) && (e2[a2] = n2[a2]);
    }
    return e2;
  }, e.apply(null, arguments);
}
function t(e2) {
  const t2 = new Uint8Array(e2);
  return window.btoa(String.fromCharCode(...t2));
}
function n(e2) {
  const t2 = window.atob(e2), n2 = t2.length, a2 = new Uint8Array(n2);
  for (let e3 = 0; e3 < n2; e3++)
    a2[e3] = t2.charCodeAt(e3);
  return a2.buffer;
}
var a = new Blob([`
      const BIAS = 0x84;
      const CLIP = 32635;
      const encodeTable = [
        0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
        4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
      ];
      
      function encodeSample(sample) {
        let sign;
        let exponent;
        let mantissa;
        let muLawSample;
        sign = (sample >> 8) & 0x80;
        if (sign !== 0) sample = -sample;
        sample = sample + BIAS;
        if (sample > CLIP) sample = CLIP;
        exponent = encodeTable[(sample>>7) & 0xFF];
        mantissa = (sample >> (exponent+3)) & 0x0F;
        muLawSample = ~(sign | (exponent << 4) | mantissa);
        
        return muLawSample;
      }
    
      class RawAudioProcessor extends AudioWorkletProcessor {
        constructor() {
          super();
                    
          this.port.onmessage = ({ data }) => {
            this.buffer = []; // Initialize an empty buffer
            this.bufferSize = data.sampleRate / 4;
            
            if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {
              globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {
                this.resampler = resampler;
              });
            } 
          };
        }
        process(inputs) {
          if (!this.buffer) {
            return true;
          }
          
          const input = inputs[0]; // Get the first input node
          if (input.length > 0) {
            let channelData = input[0]; // Get the first channel's data

            // Resample the audio if necessary
            if (this.resampler) {
              channelData = this.resampler.full(channelData);
            }

            // Add channel data to the buffer
            this.buffer.push(...channelData);
            // Get max volume 
            let sum = 0.0;
            for (let i = 0; i < channelData.length; i++) {
              sum += channelData[i] * channelData[i];
            }
            const maxVolume = Math.sqrt(sum / channelData.length);
            // Check if buffer size has reached or exceeded the threshold
            if (this.buffer.length >= this.bufferSize) {
              const float32Array = new Float32Array(this.buffer)
              let encodedArray = this.format === "ulaw"
                ? new Uint8Array(float32Array.length)
                : new Int16Array(float32Array.length);

              // Iterate through the Float32Array and convert each sample to PCM16
              for (let i = 0; i < float32Array.length; i++) {
                // Clamp the value to the range [-1, 1]
                let sample = Math.max(-1, Math.min(1, float32Array[i]));

                // Scale the sample to the range [-32768, 32767]
                let value = sample < 0 ? sample * 32768 : sample * 32767;
                if (this.format === "ulaw") {
                  value = encodeSample(Math.round(value));
                }

                encodedArray[i] = value;
              }

              // Send the buffered data to the main script
              this.port.postMessage([encodedArray, maxVolume]);

              // Clear the buffer after sending
              this.buffer = [];
            }
          }
          return true; // Continue processing
        }
      }
      registerProcessor("raw-audio-processor", RawAudioProcessor);
  `], { type: "application/javascript" });
var s = URL.createObjectURL(a);
function o() {
  return ["iPad Simulator", "iPhone Simulator", "iPod Simulator", "iPad", "iPhone", "iPod"].includes(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend" in document;
}
var i = class {
  static async create({ sampleRate: e2, format: t2, preferHeadphonesForIosDevices: n2 }) {
    let a2 = null, r2 = null;
    try {
      const l3 = { sampleRate: { ideal: e2 }, echoCancellation: { ideal: true }, noiseSuppression: { ideal: true } };
      if (o() && n2) {
        const e3 = (await window.navigator.mediaDevices.enumerateDevices()).find((e4) => "audioinput" === e4.kind && ["airpod", "headphone", "earphone"].find((t3) => e4.label.toLowerCase().includes(t3)));
        e3 && (l3.deviceId = { ideal: e3.deviceId });
      }
      const c3 = navigator.mediaDevices.getSupportedConstraints().sampleRate;
      a2 = new window.AudioContext(c3 ? { sampleRate: e2 } : {});
      const u2 = a2.createAnalyser();
      c3 || await a2.audioWorklet.addModule("https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js"), await a2.audioWorklet.addModule(s), r2 = await navigator.mediaDevices.getUserMedia({ audio: l3 });
      const d2 = a2.createMediaStreamSource(r2), h2 = new AudioWorkletNode(a2, "raw-audio-processor");
      return h2.port.postMessage({ type: "setFormat", format: t2, sampleRate: e2 }), d2.connect(u2), u2.connect(h2), await a2.resume(), new i(a2, u2, h2, r2);
    } catch (e3) {
      var l2, c2;
      throw null == (l2 = r2) || l2.getTracks().forEach((e4) => e4.stop()), null == (c2 = a2) || c2.close(), e3;
    }
  }
  constructor(e2, t2, n2, a2) {
    this.context = void 0, this.analyser = void 0, this.worklet = void 0, this.inputStream = void 0, this.context = e2, this.analyser = t2, this.worklet = n2, this.inputStream = a2;
  }
  async close() {
    this.inputStream.getTracks().forEach((e2) => e2.stop()), await this.context.close();
  }
};
var r = new Blob(['\n      const decodeTable = [0,132,396,924,1980,4092,8316,16764];\n      \n      export function decodeSample(muLawSample) {\n        let sign;\n        let exponent;\n        let mantissa;\n        let sample;\n        muLawSample = ~muLawSample;\n        sign = (muLawSample & 0x80);\n        exponent = (muLawSample >> 4) & 0x07;\n        mantissa = muLawSample & 0x0F;\n        sample = decodeTable[exponent] + (mantissa << (exponent+3));\n        if (sign !== 0) sample = -sample;\n\n        return sample;\n      }\n      \n      class AudioConcatProcessor extends AudioWorkletProcessor {\n        constructor() {\n          super();\n          this.buffers = []; // Initialize an empty buffer\n          this.cursor = 0;\n          this.currentBuffer = null;\n          this.wasInterrupted = false;\n          this.finished = false;\n          \n          this.port.onmessage = ({ data }) => {\n            switch (data.type) {\n              case "setFormat":\n                this.format = data.format;\n                break;\n              case "buffer":\n                this.wasInterrupted = false;\n                this.buffers.push(\n                  this.format === "ulaw"\n                    ? new Uint8Array(data.buffer)\n                    : new Int16Array(data.buffer)\n                );\n                break;\n              case "interrupt":\n                this.wasInterrupted = true;\n                break;\n              case "clearInterrupted":\n                if (this.wasInterrupted) {\n                  this.wasInterrupted = false;\n                  this.buffers = [];\n                  this.currentBuffer = null;\n                }\n            }\n          };\n        }\n        process(_, outputs) {\n          let finished = false;\n          const output = outputs[0][0];\n          for (let i = 0; i < output.length; i++) {\n            if (!this.currentBuffer) {\n              if (this.buffers.length === 0) {\n                finished = true;\n                break;\n              }\n              this.currentBuffer = this.buffers.shift();\n              this.cursor = 0;\n            }\n\n            let value = this.currentBuffer[this.cursor];\n            if (this.format === "ulaw") {\n              value = decodeSample(value);\n            }\n            output[i] = value / 32768;\n            this.cursor++;\n\n            if (this.cursor >= this.currentBuffer.length) {\n              this.currentBuffer = null;\n            }\n          }\n\n          if (this.finished !== finished) {\n            this.finished = finished;\n            this.port.postMessage({ type: "process", finished });\n          }\n\n          return true; // Continue processing\n        }\n      }\n\n      registerProcessor("audio-concat-processor", AudioConcatProcessor);\n    '], { type: "application/javascript" });
var l = URL.createObjectURL(r);
var c = class {
  static async create({ sampleRate: e2, format: t2 }) {
    let n2 = null;
    try {
      n2 = new AudioContext({ sampleRate: e2 });
      const a3 = n2.createAnalyser(), s2 = n2.createGain();
      s2.connect(a3), a3.connect(n2.destination), await n2.audioWorklet.addModule(l);
      const o2 = new AudioWorkletNode(n2, "audio-concat-processor");
      return o2.port.postMessage({ type: "setFormat", format: t2 }), o2.connect(s2), await n2.resume(), new c(n2, a3, s2, o2);
    } catch (e3) {
      var a2;
      throw null == (a2 = n2) || a2.close(), e3;
    }
  }
  constructor(e2, t2, n2, a2) {
    this.context = void 0, this.analyser = void 0, this.gain = void 0, this.worklet = void 0, this.context = e2, this.analyser = t2, this.gain = n2, this.worklet = a2;
  }
  async close() {
    await this.context.close();
  }
};
function u(e2) {
  return !!e2.type;
}
var d = class {
  static async create(e2) {
    let t2 = null;
    try {
      var n2;
      const a3 = null != (n2 = e2.origin) ? n2 : "wss://api.elevenlabs.io", s2 = e2.signedUrl ? e2.signedUrl : a3 + "/v1/convai/conversation?agent_id=" + e2.agentId, o2 = ["convai"];
      e2.authorization && o2.push(`bearer.${e2.authorization}`), t2 = new WebSocket(s2, o2);
      const i2 = await new Promise((n3, a4) => {
        t2.addEventListener("open", () => {
          var n4;
          const a5 = { type: "conversation_initiation_client_data" };
          var s3, o3, i3, r3;
          e2.overrides && (a5.conversation_config_override = { agent: { prompt: null == (s3 = e2.overrides.agent) ? void 0 : s3.prompt, first_message: null == (o3 = e2.overrides.agent) ? void 0 : o3.firstMessage, language: null == (i3 = e2.overrides.agent) ? void 0 : i3.language }, tts: { voice_id: null == (r3 = e2.overrides.tts) ? void 0 : r3.voiceId } }), e2.customLlmExtraBody && (a5.custom_llm_extra_body = e2.customLlmExtraBody), e2.dynamicVariables && (a5.dynamic_variables = e2.dynamicVariables), null == (n4 = t2) || n4.send(JSON.stringify(a5));
        }, { once: true }), t2.addEventListener("error", (e3) => {
          setTimeout(() => a4(e3), 0);
        }), t2.addEventListener("close", a4), t2.addEventListener("message", (e3) => {
          const t3 = JSON.parse(e3.data);
          u(t3) && ("conversation_initiation_metadata" === t3.type ? n3(t3.conversation_initiation_metadata_event) : console.warn("First received message is not conversation metadata."));
        }, { once: true });
      }), { conversation_id: r2, agent_output_audio_format: l2, user_input_audio_format: c2 } = i2, p2 = h(null != c2 ? c2 : "pcm_16000"), m2 = h(l2);
      return new d(t2, r2, p2, m2);
    } catch (e3) {
      var a2;
      throw null == (a2 = t2) || a2.close(), e3;
    }
  }
  constructor(e2, t2, n2, a2) {
    this.socket = void 0, this.conversationId = void 0, this.inputFormat = void 0, this.outputFormat = void 0, this.queue = [], this.disconnectionDetails = null, this.onDisconnectCallback = null, this.onMessageCallback = null, this.socket = e2, this.conversationId = t2, this.inputFormat = n2, this.outputFormat = a2, this.socket.addEventListener("error", (e3) => {
      setTimeout(() => this.disconnect({ reason: "error", message: "The connection was closed due to a socket error.", context: e3 }), 0);
    }), this.socket.addEventListener("close", (e3) => {
      this.disconnect(1e3 === e3.code ? { reason: "agent", context: e3 } : { reason: "error", message: e3.reason || "The connection was closed by the server.", context: e3 });
    }), this.socket.addEventListener("message", (e3) => {
      try {
        const t3 = JSON.parse(e3.data);
        if (!u(t3))
          return;
        this.onMessageCallback ? this.onMessageCallback(t3) : this.queue.push(t3);
      } catch (e4) {
      }
    });
  }
  close() {
    this.socket.close();
  }
  sendMessage(e2) {
    this.socket.send(JSON.stringify(e2));
  }
  onMessage(e2) {
    this.onMessageCallback = e2, this.queue.forEach(e2), this.queue = [];
  }
  onDisconnect(e2) {
    this.onDisconnectCallback = e2, this.disconnectionDetails && e2(this.disconnectionDetails);
  }
  disconnect(e2) {
    var t2;
    this.disconnectionDetails || (this.disconnectionDetails = e2, null == (t2 = this.onDisconnectCallback) || t2.call(this, e2));
  }
};
function h(e2) {
  const [t2, n2] = e2.split("_");
  if (!["pcm", "ulaw"].includes(t2))
    throw new Error(`Invalid format: ${e2}`);
  const a2 = parseInt(n2);
  if (isNaN(a2))
    throw new Error(`Invalid sample rate: ${n2}`);
  return { format: t2, sampleRate: a2 };
}
var p = { clientTools: {} };
var m = { onConnect: () => {
}, onDebug: () => {
}, onDisconnect: () => {
}, onError: () => {
}, onMessage: () => {
}, onModeChange: () => {
}, onStatusChange: () => {
}, onCanSendFeedbackChange: () => {
} };
var f = class {
  static async startSession(t2) {
    const n2 = e({}, p, m, t2);
    n2.onStatusChange({ status: "connecting" }), n2.onCanSendFeedbackChange({ canSendFeedback: false });
    let a2 = null, s2 = null, r2 = null, l2 = null;
    try {
      var u2, h2;
      l2 = await navigator.mediaDevices.getUserMedia({ audio: true });
      const p2 = null != (u2 = t2.connectionDelay) ? u2 : { default: 0, android: 3e3 };
      let m2 = p2.default;
      var g;
      if (/android/i.test(navigator.userAgent))
        m2 = null != (g = p2.android) ? g : m2;
      else if (o()) {
        var v;
        m2 = null != (v = p2.ios) ? v : m2;
      }
      return m2 > 0 && await new Promise((e2) => setTimeout(e2, m2)), s2 = await d.create(t2), [a2, r2] = await Promise.all([i.create(e({}, s2.inputFormat, { preferHeadphonesForIosDevices: t2.preferHeadphonesForIosDevices })), c.create(s2.outputFormat)]), null == (h2 = l2) || h2.getTracks().forEach((e2) => e2.stop()), l2 = null, new f(n2, s2, a2, r2);
    } catch (e2) {
      var _, y, w, b;
      throw n2.onStatusChange({ status: "disconnected" }), null == (_ = l2) || _.getTracks().forEach((e3) => e3.stop()), null == (y = s2) || y.close(), await (null == (w = a2) ? void 0 : w.close()), await (null == (b = r2) ? void 0 : b.close()), e2;
    }
  }
  constructor(e2, a2, s2, o2) {
    var i2 = this;
    this.options = void 0, this.connection = void 0, this.input = void 0, this.output = void 0, this.lastInterruptTimestamp = 0, this.mode = "listening", this.status = "connecting", this.inputFrequencyData = void 0, this.outputFrequencyData = void 0, this.volume = 1, this.currentEventId = 1, this.lastFeedbackEventId = 1, this.canSendFeedback = false, this.endSession = () => this.endSessionWithDetails({ reason: "user" }), this.endSessionWithDetails = async function(e3) {
      "connected" !== i2.status && "connecting" !== i2.status || (i2.updateStatus("disconnecting"), i2.connection.close(), await i2.input.close(), await i2.output.close(), i2.updateStatus("disconnected"), i2.options.onDisconnect(e3));
    }, this.updateMode = (e3) => {
      e3 !== this.mode && (this.mode = e3, this.options.onModeChange({ mode: e3 }));
    }, this.updateStatus = (e3) => {
      e3 !== this.status && (this.status = e3, this.options.onStatusChange({ status: e3 }));
    }, this.updateCanSendFeedback = () => {
      const e3 = this.currentEventId !== this.lastFeedbackEventId;
      this.canSendFeedback !== e3 && (this.canSendFeedback = e3, this.options.onCanSendFeedbackChange({ canSendFeedback: e3 }));
    }, this.onMessage = async function(e3) {
      switch (e3.type) {
        case "interruption":
          e3.interruption_event && (i2.lastInterruptTimestamp = e3.interruption_event.event_id), i2.fadeOutAudio();
          break;
        case "agent_response":
          i2.options.onMessage({ source: "ai", message: e3.agent_response_event.agent_response });
          break;
        case "user_transcript":
          i2.options.onMessage({ source: "user", message: e3.user_transcription_event.user_transcript });
          break;
        case "internal_tentative_agent_response":
          i2.options.onDebug({ type: "tentative_agent_response", response: e3.tentative_agent_response_internal_event.tentative_agent_response });
          break;
        case "client_tool_call":
          if (i2.options.clientTools.hasOwnProperty(e3.client_tool_call.tool_name)) {
            try {
              var t2;
              const n2 = null != (t2 = await i2.options.clientTools[e3.client_tool_call.tool_name](e3.client_tool_call.parameters)) ? t2 : "Client tool execution successful.";
              i2.connection.sendMessage({ type: "client_tool_result", tool_call_id: e3.client_tool_call.tool_call_id, result: n2, is_error: false });
            } catch (t3) {
              i2.onError("Client tool execution failed with following error: " + (null == t3 ? void 0 : t3.message), { clientToolName: e3.client_tool_call.tool_name }), i2.connection.sendMessage({ type: "client_tool_result", tool_call_id: e3.client_tool_call.tool_call_id, result: "Client tool execution failed: " + (null == t3 ? void 0 : t3.message), is_error: true });
            }
            break;
          }
          if (i2.options.onUnhandledClientToolCall) {
            i2.options.onUnhandledClientToolCall(e3.client_tool_call);
            break;
          }
          i2.onError(`Client tool with name ${e3.client_tool_call.tool_name} is not defined on client`, { clientToolName: e3.client_tool_call.tool_name }), i2.connection.sendMessage({ type: "client_tool_result", tool_call_id: e3.client_tool_call.tool_call_id, result: `Client tool with name ${e3.client_tool_call.tool_name} is not defined on client`, is_error: true });
          break;
        case "audio":
          i2.lastInterruptTimestamp <= e3.audio_event.event_id && (i2.addAudioBase64Chunk(e3.audio_event.audio_base_64), i2.currentEventId = e3.audio_event.event_id, i2.updateCanSendFeedback(), i2.updateMode("speaking"));
          break;
        case "ping":
          i2.connection.sendMessage({ type: "pong", event_id: e3.ping_event.event_id });
          break;
        default:
          i2.options.onDebug(e3);
      }
    }, this.onInputWorkletMessage = (e3) => {
      "connected" === this.status && this.connection.sendMessage({ user_audio_chunk: t(e3.data[0].buffer) });
    }, this.onOutputWorkletMessage = ({ data: e3 }) => {
      "process" === e3.type && this.updateMode(e3.finished ? "listening" : "speaking");
    }, this.addAudioBase64Chunk = (e3) => {
      this.output.gain.gain.value = this.volume, this.output.worklet.port.postMessage({ type: "clearInterrupted" }), this.output.worklet.port.postMessage({ type: "buffer", buffer: n(e3) });
    }, this.fadeOutAudio = () => {
      this.updateMode("listening"), this.output.worklet.port.postMessage({ type: "interrupt" }), this.output.gain.gain.exponentialRampToValueAtTime(1e-4, this.output.context.currentTime + 2), setTimeout(() => {
        this.output.gain.gain.value = this.volume, this.output.worklet.port.postMessage({ type: "clearInterrupted" });
      }, 2e3);
    }, this.onError = (e3, t2) => {
      console.error(e3, t2), this.options.onError(e3, t2);
    }, this.calculateVolume = (e3) => {
      if (0 === e3.length)
        return 0;
      let t2 = 0;
      for (let n2 = 0; n2 < e3.length; n2++)
        t2 += e3[n2] / 255;
      return t2 /= e3.length, t2 < 0 ? 0 : t2 > 1 ? 1 : t2;
    }, this.getId = () => this.connection.conversationId, this.isOpen = () => "connected" === this.status, this.setVolume = ({ volume: e3 }) => {
      this.volume = e3;
    }, this.getInputByteFrequencyData = () => (null != this.inputFrequencyData || (this.inputFrequencyData = new Uint8Array(this.input.analyser.frequencyBinCount)), this.input.analyser.getByteFrequencyData(this.inputFrequencyData), this.inputFrequencyData), this.getOutputByteFrequencyData = () => (null != this.outputFrequencyData || (this.outputFrequencyData = new Uint8Array(this.output.analyser.frequencyBinCount)), this.output.analyser.getByteFrequencyData(this.outputFrequencyData), this.outputFrequencyData), this.getInputVolume = () => this.calculateVolume(this.getInputByteFrequencyData()), this.getOutputVolume = () => this.calculateVolume(this.getOutputByteFrequencyData()), this.sendFeedback = (e3) => {
      this.canSendFeedback ? (this.connection.sendMessage({ type: "feedback", score: e3 ? "like" : "dislike", event_id: this.currentEventId }), this.lastFeedbackEventId = this.currentEventId, this.updateCanSendFeedback()) : console.warn(0 === this.lastFeedbackEventId ? "Cannot send feedback: the conversation has not started yet." : "Cannot send feedback: feedback has already been sent for the current response.");
    }, this.options = e2, this.connection = a2, this.input = s2, this.output = o2, this.options.onConnect({ conversationId: a2.conversationId }), this.connection.onDisconnect(this.endSessionWithDetails), this.connection.onMessage(this.onMessage), this.input.worklet.port.onmessage = this.onInputWorkletMessage, this.output.worklet.port.onmessage = this.onOutputWorkletMessage, this.updateStatus("connected");
  }
};

// main.ts
var import_obsidian = require("obsidian");
function getNotePath(app, title) {
  const fileName = title.replace(/[/\\?%*:|"<>]/g, "-").trim() + ".md";
  const files = app.vault.getFiles();
  const file = files.find((f2) => f2.name === fileName);
  return file ? file.path : null;
}
async function readNote(app, title) {
  const path = getNotePath(app, title);
  if (!path)
    return null;
  const file = app.vault.getAbstractFileByPath(path);
  if (file instanceof import_obsidian.TFile) {
    return await app.vault.read(file);
  }
  return null;
}
var DEFAULT_SETTINGS = {
  agentId: ""
};
var MyPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const ribbonIconEl = this.addRibbonIcon(
      "dice",
      "Sample Plugin",
      (evt) => {
        new SampleModal(this.app, this.settings).open();
      }
    );
    ribbonIconEl.addClass("my-plugin-ribbon-class");
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("Status Bar Text");
    this.addCommand({
      id: "open-voice-ai-agent",
      name: "Open ElevenLabs Conversational AI",
      callback: () => {
        new SampleModal(this.app, this.settings).open();
      }
    });
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.registerDomEvent(document, "click", (evt) => {
      console.log("click", evt);
    });
    this.registerInterval(
      window.setInterval(() => console.log("setInterval"), 5 * 60 * 1e3)
    );
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var SampleModal = class extends import_obsidian.Modal {
  constructor(app, settings) {
    super(app);
    this.settings = settings;
    this.conversation = null;
  }
  async onOpen() {
    const { contentEl, conversation } = this;
    contentEl.setText("Woah!");
    this.conversation = await f.startSession({
      // agentId: "hVo4wiqvqg0jPtI4tiTp",
      agentId: this.settings.agentId,
      clientTools: {
        saveNote: async ({ message }) => {
          console.log(message);
          await this.app.vault.create("New Note.md", message);
        },
        getNote: async ({ noteName }) => {
          console.log(noteName);
          const content = await readNote(this.app, noteName);
          if (content) {
            console.log(content);
            return content;
          }
          return "";
        }
      }
    });
  }
  async onClose() {
    const { contentEl } = this;
    if (this.conversation) {
      await this.conversation.endSession();
    }
    contentEl.empty();
  }
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("ElevenLabs Agent Id").setDesc("ElevenLabs Agent Id").addText(
      (text) => text.setPlaceholder("Enter your Agent Id").setValue(this.plugin.settings.agentId).onChange(async (value) => {
        this.plugin.settings.agentId = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJub2RlX21vZHVsZXMvQDExbGFicy9jbGllbnQvc3JjL3V0aWxzL2F1ZGlvLnRzIiwgIm5vZGVfbW9kdWxlcy9AMTFsYWJzL2NsaWVudC9zcmMvdXRpbHMvcmF3QXVkaW9Qcm9jZXNzb3IudHMiLCAibm9kZV9tb2R1bGVzL0AxMWxhYnMvY2xpZW50L3NyYy91dGlscy9jb21wYXRpYmlsaXR5LnRzIiwgIm5vZGVfbW9kdWxlcy9AMTFsYWJzL2NsaWVudC9zcmMvdXRpbHMvaW5wdXQudHMiLCAibm9kZV9tb2R1bGVzL0AxMWxhYnMvY2xpZW50L3NyYy91dGlscy9hdWRpb0NvbmNhdFByb2Nlc3Nvci50cyIsICJub2RlX21vZHVsZXMvQDExbGFicy9jbGllbnQvc3JjL3V0aWxzL291dHB1dC50cyIsICJub2RlX21vZHVsZXMvQDExbGFicy9jbGllbnQvc3JjL3V0aWxzL2V2ZW50cy50cyIsICJub2RlX21vZHVsZXMvQDExbGFicy9jbGllbnQvc3JjL3V0aWxzL2Nvbm5lY3Rpb24udHMiLCAibm9kZV9tb2R1bGVzL0AxMWxhYnMvY2xpZW50L3NyYy9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQ29udmVyc2F0aW9uIH0gZnJvbSBcIkAxMWxhYnMvY2xpZW50XCI7XG5pbXBvcnQge1xuXHRBcHAsXG5cdEVkaXRvcixcblx0TWFya2Rvd25WaWV3LFxuXHRNb2RhbCxcblx0Tm90aWNlLFxuXHRQbHVnaW4sXG5cdFBsdWdpblNldHRpbmdUYWIsXG5cdFNldHRpbmcsXG5cdFRGaWxlLFxufSBmcm9tIFwib2JzaWRpYW5cIjtcblxuLyoqXG4gKiBHZXRzIHRoZSBwYXRoIG9mIGFuIGV4aXN0aW5nIG5vdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5vdGVQYXRoKGFwcDogQXBwLCB0aXRsZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG5cdGNvbnN0IGZpbGVOYW1lID0gdGl0bGUucmVwbGFjZSgvWy9cXFxcPyUqOnxcIjw+XS9nLCBcIi1cIikudHJpbSgpICsgXCIubWRcIjtcblx0Y29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcblx0Y29uc3QgZmlsZSA9IGZpbGVzLmZpbmQoKGYpID0+IGYubmFtZSA9PT0gZmlsZU5hbWUpO1xuXHRyZXR1cm4gZmlsZSA/IGZpbGUucGF0aCA6IG51bGw7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGNvbnRlbnQgb2YgYSBub3RlXG4gKiBAcGFyYW0gYXBwIC0gT2JzaWRpYW4gQXBwIGluc3RhbmNlXG4gKiBAcGFyYW0gdGl0bGUgLSBOb3RlIHRpdGxlXG4gKiBAcmV0dXJucyBQcm9taXNlPHN0cmluZyB8IG51bGw+IC0gTm90ZSBjb250ZW50IG9yIG51bGwgaWYgbm90IGZvdW5kXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkTm90ZShcblx0YXBwOiBBcHAsXG5cdHRpdGxlOiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuXHRjb25zdCBwYXRoID0gZ2V0Tm90ZVBhdGgoYXBwLCB0aXRsZSk7XG5cdGlmICghcGF0aCkgcmV0dXJuIG51bGw7XG5cblx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG5cdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRyZXR1cm4gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XG5cdGFnZW50SWQ6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTXlQbHVnaW5TZXR0aW5ncyA9IHtcblx0YWdlbnRJZDogXCJcIixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBUaGlzIGNyZWF0ZXMgYW4gaWNvbiBpbiB0aGUgbGVmdCByaWJib24uXG5cdFx0Y29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKFxuXHRcdFx0XCJkaWNlXCIsXG5cdFx0XHRcIlNhbXBsZSBQbHVnaW5cIixcblx0XHRcdChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0Ly8gQ2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBpY29uLlxuXHRcdFx0XHRuZXcgU2FtcGxlTW9kYWwodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MpLm9wZW4oKTtcblx0XHRcdH1cblx0XHQpO1xuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXG5cdFx0cmliYm9uSWNvbkVsLmFkZENsYXNzKFwibXktcGx1Z2luLXJpYmJvbi1jbGFzc1wiKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHN0YXR1cyBiYXIgaXRlbSB0byB0aGUgYm90dG9tIG9mIHRoZSBhcHAuIERvZXMgbm90IHdvcmsgb24gbW9iaWxlIGFwcHMuXG5cdFx0Y29uc3Qgc3RhdHVzQmFySXRlbUVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG5cdFx0c3RhdHVzQmFySXRlbUVsLnNldFRleHQoXCJTdGF0dXMgQmFyIFRleHRcIik7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzaW1wbGUgY29tbWFuZCB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYW55d2hlcmVcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi12b2ljZS1haS1hZ2VudFwiLFxuXHRcdFx0bmFtZTogXCJPcGVuIEVsZXZlbkxhYnMgQ29udmVyc2F0aW9uYWwgQUlcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBTYW1wbGVNb2RhbCh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncykub3BlbigpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTYW1wbGVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHQvLyBJZiB0aGUgcGx1Z2luIGhvb2tzIHVwIGFueSBnbG9iYWwgRE9NIGV2ZW50cyAob24gcGFydHMgb2YgdGhlIGFwcCB0aGF0IGRvZXNuJ3QgYmVsb25nIHRvIHRoaXMgcGx1Z2luKVxuXHRcdC8vIFVzaW5nIHRoaXMgZnVuY3Rpb24gd2lsbCBhdXRvbWF0aWNhbGx5IHJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXIgd2hlbiB0aGlzIHBsdWdpbiBpcyBkaXNhYmxlZC5cblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsIFwiY2xpY2tcIiwgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coXCJjbGlja1wiLCBldnQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gV2hlbiByZWdpc3RlcmluZyBpbnRlcnZhbHMsIHRoaXMgZnVuY3Rpb24gd2lsbCBhdXRvbWF0aWNhbGx5IGNsZWFyIHRoZSBpbnRlcnZhbCB3aGVuIHRoZSBwbHVnaW4gaXMgZGlzYWJsZWQuXG5cdFx0dGhpcy5yZWdpc3RlckludGVydmFsKFxuXHRcdFx0d2luZG93LnNldEludGVydmFsKCgpID0+IGNvbnNvbGUubG9nKFwic2V0SW50ZXJ2YWxcIiksIDUgKiA2MCAqIDEwMDApXG5cdFx0KTtcblx0fVxuXG5cdG9udW5sb2FkKCkge31cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXG5cdFx0XHR7fSxcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWREYXRhKClcblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cblxuY2xhc3MgU2FtcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHByaXZhdGUgY29udmVyc2F0aW9uOiBDb252ZXJzYXRpb24gfCBudWxsO1xuXHRwcml2YXRlIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncykge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHRcdHRoaXMuY29udmVyc2F0aW9uID0gbnVsbDtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCwgY29udmVyc2F0aW9uIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5zZXRUZXh0KFwiV29haCFcIik7XG5cdFx0dGhpcy5jb252ZXJzYXRpb24gPSBhd2FpdCBDb252ZXJzYXRpb24uc3RhcnRTZXNzaW9uKHtcblx0XHRcdC8vIGFnZW50SWQ6IFwiaFZvNHdpcXZxZzBqUHRJNHRpVHBcIixcblx0XHRcdGFnZW50SWQ6IHRoaXMuc2V0dGluZ3MuYWdlbnRJZCxcblx0XHRcdGNsaWVudFRvb2xzOiB7XG5cdFx0XHRcdHNhdmVOb3RlOiBhc3luYyAoeyBtZXNzYWdlIH0pID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhtZXNzYWdlKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoXCJOZXcgTm90ZS5tZFwiLCBtZXNzYWdlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0Z2V0Tm90ZTogYXN5bmMgKHsgbm90ZU5hbWUgfSkgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKG5vdGVOYW1lKTtcblx0XHRcdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgcmVhZE5vdGUodGhpcy5hcHAsIG5vdGVOYW1lKTtcblx0XHRcdFx0XHRpZiAoY29udGVudCkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coY29udGVudCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY29udGVudDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9XG5cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRpZiAodGhpcy5jb252ZXJzYXRpb24pIHtcblx0XHRcdGF3YWl0IHRoaXMuY29udmVyc2F0aW9uLmVuZFNlc3Npb24oKTtcblx0XHR9XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuY2xhc3MgU2FtcGxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IE15UGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15UGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJFbGV2ZW5MYWJzIEFnZW50IElkXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkVsZXZlbkxhYnMgQWdlbnQgSWRcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgeW91ciBBZ2VudCBJZFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZ2VudElkKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFnZW50SWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGFycmF5QnVmZmVyVG9CYXNlNjQoYjogQXJyYXlCdWZmZXJMaWtlKSB7XG4gIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGIpO1xuICAvLyBAdHMtaWdub3JlXG4gIGNvbnN0IGJhc2U2NERhdGEgPSB3aW5kb3cuYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmJ1ZmZlcikpO1xuICByZXR1cm4gYmFzZTY0RGF0YTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0OiBzdHJpbmcpOiBBcnJheUJ1ZmZlciB7XG4gIGNvbnN0IGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7XG4gIGNvbnN0IGxlbiA9IGJpbmFyeVN0cmluZy5sZW5ndGg7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbn1cbiIsICIvKlxuICogdWxhdyBlbmNvZGluZyBsb2dpYyB0YWtlbiBmcm9tIHRoZSB3YXZlZmlsZSBsaWJyYXJ5XG4gKiBodHRwczovL2dpdGh1Yi5jb20vcm9jaGFycy93YXZlZmlsZS9ibG9iL21hc3Rlci9saWIvY29kZWNzL211bGF3LmpzXG4gKi9cblxuY29uc3QgYmxvYiA9IG5ldyBCbG9iKFxuICBbXG4gICAgLy8gbGFuZ3VhZ2U9SmF2YVNjcmlwdFxuICAgIGBcbiAgICAgIGNvbnN0IEJJQVMgPSAweDg0O1xuICAgICAgY29uc3QgQ0xJUCA9IDMyNjM1O1xuICAgICAgY29uc3QgZW5jb2RlVGFibGUgPSBbXG4gICAgICAgIDAsMCwxLDEsMiwyLDIsMiwzLDMsMywzLDMsMywzLDMsXG4gICAgICAgIDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsXG4gICAgICAgIDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsXG4gICAgICAgIDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsXG4gICAgICAgIDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsXG4gICAgICAgIDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsXG4gICAgICAgIDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsXG4gICAgICAgIDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsXG4gICAgICAgIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXG4gICAgICAgIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXG4gICAgICAgIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXG4gICAgICAgIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXG4gICAgICAgIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXG4gICAgICAgIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXG4gICAgICAgIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXG4gICAgICAgIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDdcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGZ1bmN0aW9uIGVuY29kZVNhbXBsZShzYW1wbGUpIHtcbiAgICAgICAgbGV0IHNpZ247XG4gICAgICAgIGxldCBleHBvbmVudDtcbiAgICAgICAgbGV0IG1hbnRpc3NhO1xuICAgICAgICBsZXQgbXVMYXdTYW1wbGU7XG4gICAgICAgIHNpZ24gPSAoc2FtcGxlID4+IDgpICYgMHg4MDtcbiAgICAgICAgaWYgKHNpZ24gIT09IDApIHNhbXBsZSA9IC1zYW1wbGU7XG4gICAgICAgIHNhbXBsZSA9IHNhbXBsZSArIEJJQVM7XG4gICAgICAgIGlmIChzYW1wbGUgPiBDTElQKSBzYW1wbGUgPSBDTElQO1xuICAgICAgICBleHBvbmVudCA9IGVuY29kZVRhYmxlWyhzYW1wbGU+PjcpICYgMHhGRl07XG4gICAgICAgIG1hbnRpc3NhID0gKHNhbXBsZSA+PiAoZXhwb25lbnQrMykpICYgMHgwRjtcbiAgICAgICAgbXVMYXdTYW1wbGUgPSB+KHNpZ24gfCAoZXhwb25lbnQgPDwgNCkgfCBtYW50aXNzYSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbXVMYXdTYW1wbGU7XG4gICAgICB9XG4gICAgXG4gICAgICBjbGFzcyBSYXdBdWRpb1Byb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgIHRoaXMucG9ydC5vbm1lc3NhZ2UgPSAoeyBkYXRhIH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gW107IC8vIEluaXRpYWxpemUgYW4gZW1wdHkgYnVmZmVyXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlclNpemUgPSBkYXRhLnNhbXBsZVJhdGUgLyA0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZ2xvYmFsVGhpcy5MaWJTYW1wbGVSYXRlICYmIHNhbXBsZVJhdGUgIT09IGRhdGEuc2FtcGxlUmF0ZSkge1xuICAgICAgICAgICAgICBnbG9iYWxUaGlzLkxpYlNhbXBsZVJhdGUuY3JlYXRlKDEsIHNhbXBsZVJhdGUsIGRhdGEuc2FtcGxlUmF0ZSkudGhlbihyZXNhbXBsZXIgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzYW1wbGVyID0gcmVzYW1wbGVyO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBwcm9jZXNzKGlucHV0cykge1xuICAgICAgICAgIGlmICghdGhpcy5idWZmZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTsgLy8gR2V0IHRoZSBmaXJzdCBpbnB1dCBub2RlXG4gICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBjaGFubmVsRGF0YSA9IGlucHV0WzBdOyAvLyBHZXQgdGhlIGZpcnN0IGNoYW5uZWwncyBkYXRhXG5cbiAgICAgICAgICAgIC8vIFJlc2FtcGxlIHRoZSBhdWRpbyBpZiBuZWNlc3NhcnlcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc2FtcGxlcikge1xuICAgICAgICAgICAgICBjaGFubmVsRGF0YSA9IHRoaXMucmVzYW1wbGVyLmZ1bGwoY2hhbm5lbERhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgY2hhbm5lbCBkYXRhIHRvIHRoZSBidWZmZXJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2goLi4uY2hhbm5lbERhdGEpO1xuICAgICAgICAgICAgLy8gR2V0IG1heCB2b2x1bWUgXG4gICAgICAgICAgICBsZXQgc3VtID0gMC4wO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFubmVsRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBzdW0gKz0gY2hhbm5lbERhdGFbaV0gKiBjaGFubmVsRGF0YVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1heFZvbHVtZSA9IE1hdGguc3FydChzdW0gLyBjaGFubmVsRGF0YS5sZW5ndGgpO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYnVmZmVyIHNpemUgaGFzIHJlYWNoZWQgb3IgZXhjZWVkZWQgdGhlIHRocmVzaG9sZFxuICAgICAgICAgICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA+PSB0aGlzLmJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgY29uc3QgZmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgICAgbGV0IGVuY29kZWRBcnJheSA9IHRoaXMuZm9ybWF0ID09PSBcInVsYXdcIlxuICAgICAgICAgICAgICAgID8gbmV3IFVpbnQ4QXJyYXkoZmxvYXQzMkFycmF5Lmxlbmd0aClcbiAgICAgICAgICAgICAgICA6IG5ldyBJbnQxNkFycmF5KGZsb2F0MzJBcnJheS5sZW5ndGgpO1xuXG4gICAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgRmxvYXQzMkFycmF5IGFuZCBjb252ZXJ0IGVhY2ggc2FtcGxlIHRvIFBDTTE2XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmxvYXQzMkFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xhbXAgdGhlIHZhbHVlIHRvIHRoZSByYW5nZSBbLTEsIDFdXG4gICAgICAgICAgICAgICAgbGV0IHNhbXBsZSA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBmbG9hdDMyQXJyYXlbaV0pKTtcblxuICAgICAgICAgICAgICAgIC8vIFNjYWxlIHRoZSBzYW1wbGUgdG8gdGhlIHJhbmdlIFstMzI3NjgsIDMyNzY3XVxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHNhbXBsZSA8IDAgPyBzYW1wbGUgKiAzMjc2OCA6IHNhbXBsZSAqIDMyNzY3O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdCA9PT0gXCJ1bGF3XCIpIHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlID0gZW5jb2RlU2FtcGxlKE1hdGgucm91bmQodmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbmNvZGVkQXJyYXlbaV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIFNlbmQgdGhlIGJ1ZmZlcmVkIGRhdGEgdG8gdGhlIG1haW4gc2NyaXB0XG4gICAgICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZShbZW5jb2RlZEFycmF5LCBtYXhWb2x1bWVdKTtcblxuICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgYnVmZmVyIGFmdGVyIHNlbmRpbmdcbiAgICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWU7IC8vIENvbnRpbnVlIHByb2Nlc3NpbmdcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVnaXN0ZXJQcm9jZXNzb3IoXCJyYXctYXVkaW8tcHJvY2Vzc29yXCIsIFJhd0F1ZGlvUHJvY2Vzc29yKTtcbiAgYCxcbiAgXSxcbiAgeyB0eXBlOiBcImFwcGxpY2F0aW9uL2phdmFzY3JpcHRcIiB9XG4pO1xuXG5leHBvcnQgY29uc3QgcmF3QXVkaW9Qcm9jZXNzb3IgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuIiwgImV4cG9ydCBmdW5jdGlvbiBpc0lvc0RldmljZSgpIHtcbiAgcmV0dXJuIChcbiAgICBbXG4gICAgICBcImlQYWQgU2ltdWxhdG9yXCIsXG4gICAgICBcImlQaG9uZSBTaW11bGF0b3JcIixcbiAgICAgIFwiaVBvZCBTaW11bGF0b3JcIixcbiAgICAgIFwiaVBhZFwiLFxuICAgICAgXCJpUGhvbmVcIixcbiAgICAgIFwiaVBvZFwiLFxuICAgIF0uaW5jbHVkZXMobmF2aWdhdG9yLnBsYXRmb3JtKSB8fFxuICAgIC8vIGlQYWQgb24gaU9TIDEzIGRldGVjdGlvblxuICAgIChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwiTWFjXCIpICYmIFwib250b3VjaGVuZFwiIGluIGRvY3VtZW50KVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBbmRyb2lkRGV2aWNlKCkge1xuICByZXR1cm4gL2FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xufVxuIiwgImltcG9ydCB7IHJhd0F1ZGlvUHJvY2Vzc29yIH0gZnJvbSBcIi4vcmF3QXVkaW9Qcm9jZXNzb3JcIjtcbmltcG9ydCB7IEZvcm1hdENvbmZpZyB9IGZyb20gXCIuL2Nvbm5lY3Rpb25cIjtcbmltcG9ydCB7IGlzSW9zRGV2aWNlIH0gZnJvbSBcIi4vY29tcGF0aWJpbGl0eVwiO1xuXG5leHBvcnQgdHlwZSBJbnB1dENvbmZpZyA9IHtcbiAgcHJlZmVySGVhZHBob25lc0Zvcklvc0RldmljZXM/OiBib29sZWFuO1xufTtcblxuY29uc3QgTElCU0FNUExFUkFURV9KUyA9XG4gIFwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9AYWxleGFuZGVyb2xzZW4vbGlic2FtcGxlcmF0ZS1qc0AyLjEuMi9kaXN0L2xpYnNhbXBsZXJhdGUud29ya2xldC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgSW5wdXQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZSh7XG4gICAgc2FtcGxlUmF0ZSxcbiAgICBmb3JtYXQsXG4gICAgcHJlZmVySGVhZHBob25lc0Zvcklvc0RldmljZXMsXG4gIH06IEZvcm1hdENvbmZpZyAmIElucHV0Q29uZmlnKTogUHJvbWlzZTxJbnB1dD4ge1xuICAgIGxldCBjb250ZXh0OiBBdWRpb0NvbnRleHQgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgaW5wdXRTdHJlYW06IE1lZGlhU3RyZWFtIHwgbnVsbCA9IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3B0aW9uczogTWVkaWFUcmFja0NvbnN0cmFpbnRzID0ge1xuICAgICAgICBzYW1wbGVSYXRlOiB7IGlkZWFsOiBzYW1wbGVSYXRlIH0sXG4gICAgICAgIGVjaG9DYW5jZWxsYXRpb246IHsgaWRlYWw6IHRydWUgfSxcbiAgICAgICAgbm9pc2VTdXBwcmVzc2lvbjogeyBpZGVhbDogdHJ1ZSB9LFxuICAgICAgfTtcblxuICAgICAgaWYgKGlzSW9zRGV2aWNlKCkgJiYgcHJlZmVySGVhZHBob25lc0Zvcklvc0RldmljZXMpIHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlRGV2aWNlcyA9XG4gICAgICAgICAgYXdhaXQgd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpO1xuICAgICAgICBjb25zdCBpZGVhbERldmljZSA9IGF2YWlsYWJsZURldmljZXMuZmluZChcbiAgICAgICAgICBkID0+XG4gICAgICAgICAgICAvLyBjYXV0aW91cyB0byBpbmNsdWRlIFwiYmx1ZXRvb3RoXCIgaW4gdGhlIHNlYXJjaFxuICAgICAgICAgICAgLy8gYXMgbWlnaHQgdHJpZ2dlciBibHVldG9vdGggc3BlYWtlcnNcbiAgICAgICAgICAgIGQua2luZCA9PT0gXCJhdWRpb2lucHV0XCIgJiZcbiAgICAgICAgICAgIFtcImFpcnBvZFwiLCBcImhlYWRwaG9uZVwiLCBcImVhcnBob25lXCJdLmZpbmQoa2V5d29yZCA9PlxuICAgICAgICAgICAgICBkLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5d29yZClcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGlkZWFsRGV2aWNlKSB7XG4gICAgICAgICAgb3B0aW9ucy5kZXZpY2VJZCA9IHsgaWRlYWw6IGlkZWFsRGV2aWNlLmRldmljZUlkIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3VwcG9ydHNTYW1wbGVSYXRlQ29uc3RyYWludCA9XG4gICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKS5zYW1wbGVSYXRlO1xuXG4gICAgICBjb250ZXh0ID0gbmV3IHdpbmRvdy5BdWRpb0NvbnRleHQoXG4gICAgICAgIHN1cHBvcnRzU2FtcGxlUmF0ZUNvbnN0cmFpbnQgPyB7IHNhbXBsZVJhdGUgfSA6IHt9XG4gICAgICApO1xuICAgICAgY29uc3QgYW5hbHlzZXIgPSBjb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7XG4gICAgICBpZiAoIXN1cHBvcnRzU2FtcGxlUmF0ZUNvbnN0cmFpbnQpIHtcbiAgICAgICAgYXdhaXQgY29udGV4dC5hdWRpb1dvcmtsZXQuYWRkTW9kdWxlKExJQlNBTVBMRVJBVEVfSlMpO1xuICAgICAgfVxuICAgICAgYXdhaXQgY29udGV4dC5hdWRpb1dvcmtsZXQuYWRkTW9kdWxlKHJhd0F1ZGlvUHJvY2Vzc29yKTtcblxuICAgICAgaW5wdXRTdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgIGF1ZGlvOiBvcHRpb25zLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IGNvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UoaW5wdXRTdHJlYW0pO1xuICAgICAgY29uc3Qgd29ya2xldCA9IG5ldyBBdWRpb1dvcmtsZXROb2RlKGNvbnRleHQsIFwicmF3LWF1ZGlvLXByb2Nlc3NvclwiKTtcbiAgICAgIHdvcmtsZXQucG9ydC5wb3N0TWVzc2FnZSh7IHR5cGU6IFwic2V0Rm9ybWF0XCIsIGZvcm1hdCwgc2FtcGxlUmF0ZSB9KTtcblxuICAgICAgc291cmNlLmNvbm5lY3QoYW5hbHlzZXIpO1xuICAgICAgYW5hbHlzZXIuY29ubmVjdCh3b3JrbGV0KTtcblxuICAgICAgYXdhaXQgY29udGV4dC5yZXN1bWUoKTtcblxuICAgICAgcmV0dXJuIG5ldyBJbnB1dChjb250ZXh0LCBhbmFseXNlciwgd29ya2xldCwgaW5wdXRTdHJlYW0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpbnB1dFN0cmVhbT8uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgY29udGV4dD8uY2xvc2UoKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IGNvbnRleHQ6IEF1ZGlvQ29udGV4dCxcbiAgICBwdWJsaWMgcmVhZG9ubHkgYW5hbHlzZXI6IEFuYWx5c2VyTm9kZSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgd29ya2xldDogQXVkaW9Xb3JrbGV0Tm9kZSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgaW5wdXRTdHJlYW06IE1lZGlhU3RyZWFtXG4gICkge31cblxuICBwdWJsaWMgYXN5bmMgY2xvc2UoKSB7XG4gICAgdGhpcy5pbnB1dFN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgYXdhaXQgdGhpcy5jb250ZXh0LmNsb3NlKCk7XG4gIH1cbn1cbiIsICIvKlxuICogdWxhdyBkZWNvZGluZyBsb2dpYyB0YWtlbiBmcm9tIHRoZSB3YXZlZmlsZSBsaWJyYXJ5XG4gKiBodHRwczovL2dpdGh1Yi5jb20vcm9jaGFycy93YXZlZmlsZS9ibG9iL21hc3Rlci9saWIvY29kZWNzL211bGF3LmpzXG4gKi9cblxuY29uc3QgYmxvYiA9IG5ldyBCbG9iKFxuICBbXG4gICAgLy8gbGFuZ3VhZ2U9SmF2YVNjcmlwdFxuICAgIGBcbiAgICAgIGNvbnN0IGRlY29kZVRhYmxlID0gWzAsMTMyLDM5Niw5MjQsMTk4MCw0MDkyLDgzMTYsMTY3NjRdO1xuICAgICAgXG4gICAgICBleHBvcnQgZnVuY3Rpb24gZGVjb2RlU2FtcGxlKG11TGF3U2FtcGxlKSB7XG4gICAgICAgIGxldCBzaWduO1xuICAgICAgICBsZXQgZXhwb25lbnQ7XG4gICAgICAgIGxldCBtYW50aXNzYTtcbiAgICAgICAgbGV0IHNhbXBsZTtcbiAgICAgICAgbXVMYXdTYW1wbGUgPSB+bXVMYXdTYW1wbGU7XG4gICAgICAgIHNpZ24gPSAobXVMYXdTYW1wbGUgJiAweDgwKTtcbiAgICAgICAgZXhwb25lbnQgPSAobXVMYXdTYW1wbGUgPj4gNCkgJiAweDA3O1xuICAgICAgICBtYW50aXNzYSA9IG11TGF3U2FtcGxlICYgMHgwRjtcbiAgICAgICAgc2FtcGxlID0gZGVjb2RlVGFibGVbZXhwb25lbnRdICsgKG1hbnRpc3NhIDw8IChleHBvbmVudCszKSk7XG4gICAgICAgIGlmIChzaWduICE9PSAwKSBzYW1wbGUgPSAtc2FtcGxlO1xuXG4gICAgICAgIHJldHVybiBzYW1wbGU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNsYXNzIEF1ZGlvQ29uY2F0UHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbXTsgLy8gSW5pdGlhbGl6ZSBhbiBlbXB0eSBidWZmZXJcbiAgICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgICAgdGhpcy5jdXJyZW50QnVmZmVyID0gbnVsbDtcbiAgICAgICAgICB0aGlzLndhc0ludGVycnVwdGVkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgICAgICAgIFxuICAgICAgICAgIHRoaXMucG9ydC5vbm1lc3NhZ2UgPSAoeyBkYXRhIH0pID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJzZXRGb3JtYXRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdCA9IGRhdGEuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFwiYnVmZmVyXCI6XG4gICAgICAgICAgICAgICAgdGhpcy53YXNJbnRlcnJ1cHRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVycy5wdXNoKFxuICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQgPT09IFwidWxhd1wiXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IFVpbnQ4QXJyYXkoZGF0YS5idWZmZXIpXG4gICAgICAgICAgICAgICAgICAgIDogbmV3IEludDE2QXJyYXkoZGF0YS5idWZmZXIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcImludGVycnVwdFwiOlxuICAgICAgICAgICAgICAgIHRoaXMud2FzSW50ZXJydXB0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFwiY2xlYXJJbnRlcnJ1cHRlZFwiOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLndhc0ludGVycnVwdGVkKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLndhc0ludGVycnVwdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcHJvY2VzcyhfLCBvdXRwdXRzKSB7XG4gICAgICAgICAgbGV0IGZpbmlzaGVkID0gZmFsc2U7XG4gICAgICAgICAgY29uc3Qgb3V0cHV0ID0gb3V0cHV0c1swXVswXTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRCdWZmZXIpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuYnVmZmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBmaW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50QnVmZmVyID0gdGhpcy5idWZmZXJzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5jdXJyZW50QnVmZmVyW3RoaXMuY3Vyc29yXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdCA9PT0gXCJ1bGF3XCIpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSBkZWNvZGVTYW1wbGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0cHV0W2ldID0gdmFsdWUgLyAzMjc2ODtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yKys7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnNvciA+PSB0aGlzLmN1cnJlbnRCdWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudEJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuZmluaXNoZWQgIT09IGZpbmlzaGVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gZmluaXNoZWQ7XG4gICAgICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UoeyB0eXBlOiBcInByb2Nlc3NcIiwgZmluaXNoZWQgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRydWU7IC8vIENvbnRpbnVlIHByb2Nlc3NpbmdcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZWdpc3RlclByb2Nlc3NvcihcImF1ZGlvLWNvbmNhdC1wcm9jZXNzb3JcIiwgQXVkaW9Db25jYXRQcm9jZXNzb3IpO1xuICAgIGAsXG4gIF0sXG4gIHsgdHlwZTogXCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0XCIgfVxuKTtcblxuZXhwb3J0IGNvbnN0IGF1ZGlvQ29uY2F0UHJvY2Vzc29yID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiIsICJpbXBvcnQgeyBhdWRpb0NvbmNhdFByb2Nlc3NvciB9IGZyb20gXCIuL2F1ZGlvQ29uY2F0UHJvY2Vzc29yXCI7XG5pbXBvcnQgeyBGb3JtYXRDb25maWcgfSBmcm9tIFwiLi9jb25uZWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBPdXRwdXQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZSh7XG4gICAgc2FtcGxlUmF0ZSxcbiAgICBmb3JtYXQsXG4gIH06IEZvcm1hdENvbmZpZyk6IFByb21pc2U8T3V0cHV0PiB7XG4gICAgbGV0IGNvbnRleHQ6IEF1ZGlvQ29udGV4dCB8IG51bGwgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBjb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCh7IHNhbXBsZVJhdGUgfSk7XG4gICAgICBjb25zdCBhbmFseXNlciA9IGNvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtcbiAgICAgIGNvbnN0IGdhaW4gPSBjb250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgIGdhaW4uY29ubmVjdChhbmFseXNlcik7XG4gICAgICBhbmFseXNlci5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgYXdhaXQgY29udGV4dC5hdWRpb1dvcmtsZXQuYWRkTW9kdWxlKGF1ZGlvQ29uY2F0UHJvY2Vzc29yKTtcbiAgICAgIGNvbnN0IHdvcmtsZXQgPSBuZXcgQXVkaW9Xb3JrbGV0Tm9kZShjb250ZXh0LCBcImF1ZGlvLWNvbmNhdC1wcm9jZXNzb3JcIik7XG4gICAgICB3b3JrbGV0LnBvcnQucG9zdE1lc3NhZ2UoeyB0eXBlOiBcInNldEZvcm1hdFwiLCBmb3JtYXQgfSk7XG4gICAgICB3b3JrbGV0LmNvbm5lY3QoZ2Fpbik7XG5cbiAgICAgIGF3YWl0IGNvbnRleHQucmVzdW1lKCk7XG5cbiAgICAgIHJldHVybiBuZXcgT3V0cHV0KGNvbnRleHQsIGFuYWx5c2VyLCBnYWluLCB3b3JrbGV0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29udGV4dD8uY2xvc2UoKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IGNvbnRleHQ6IEF1ZGlvQ29udGV4dCxcbiAgICBwdWJsaWMgcmVhZG9ubHkgYW5hbHlzZXI6IEFuYWx5c2VyTm9kZSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgZ2FpbjogR2Fpbk5vZGUsXG4gICAgcHVibGljIHJlYWRvbmx5IHdvcmtsZXQ6IEF1ZGlvV29ya2xldE5vZGVcbiAgKSB7fVxuXG4gIHB1YmxpYyBhc3luYyBjbG9zZSgpIHtcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuY2xvc2UoKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IExhbmd1YWdlIH0gZnJvbSBcIi4vY29ubmVjdGlvblwiO1xuXG5leHBvcnQgdHlwZSBVc2VyVHJhbnNjcmlwdGlvbkV2ZW50ID0ge1xuICB0eXBlOiBcInVzZXJfdHJhbnNjcmlwdFwiO1xuICB1c2VyX3RyYW5zY3JpcHRpb25fZXZlbnQ6IHsgdXNlcl90cmFuc2NyaXB0OiBzdHJpbmcgfTtcbn07XG5leHBvcnQgdHlwZSBBZ2VudFJlc3BvbnNlRXZlbnQgPSB7XG4gIHR5cGU6IFwiYWdlbnRfcmVzcG9uc2VcIjtcbiAgYWdlbnRfcmVzcG9uc2VfZXZlbnQ6IHsgYWdlbnRfcmVzcG9uc2U6IHN0cmluZyB9O1xufTtcbmV4cG9ydCB0eXBlIEFnZW50QXVkaW9FdmVudCA9IHtcbiAgdHlwZTogXCJhdWRpb1wiO1xuICBhdWRpb19ldmVudDoge1xuICAgIGF1ZGlvX2Jhc2VfNjQ6IHN0cmluZztcbiAgICBldmVudF9pZDogbnVtYmVyO1xuICB9O1xufTtcbmV4cG9ydCB0eXBlIEludGVycnVwdGlvbkV2ZW50ID0ge1xuICB0eXBlOiBcImludGVycnVwdGlvblwiO1xuICBpbnRlcnJ1cHRpb25fZXZlbnQ6IHtcbiAgICBldmVudF9pZDogbnVtYmVyO1xuICB9O1xufTtcbmV4cG9ydCB0eXBlIEludGVybmFsVGVudGF0aXZlQWdlbnRSZXNwb25zZUV2ZW50ID0ge1xuICB0eXBlOiBcImludGVybmFsX3RlbnRhdGl2ZV9hZ2VudF9yZXNwb25zZVwiO1xuICB0ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2VfaW50ZXJuYWxfZXZlbnQ6IHtcbiAgICB0ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2U6IHN0cmluZztcbiAgfTtcbn07XG5leHBvcnQgdHlwZSBDb25maWdFdmVudCA9IHtcbiAgdHlwZTogXCJjb252ZXJzYXRpb25faW5pdGlhdGlvbl9tZXRhZGF0YVwiO1xuICBjb252ZXJzYXRpb25faW5pdGlhdGlvbl9tZXRhZGF0YV9ldmVudDoge1xuICAgIGNvbnZlcnNhdGlvbl9pZDogc3RyaW5nO1xuICAgIGFnZW50X291dHB1dF9hdWRpb19mb3JtYXQ6IHN0cmluZztcbiAgICB1c2VyX2lucHV0X2F1ZGlvX2Zvcm1hdD86IHN0cmluZztcbiAgfTtcbn07XG5leHBvcnQgdHlwZSBQaW5nRXZlbnQgPSB7XG4gIHR5cGU6IFwicGluZ1wiO1xuICBwaW5nX2V2ZW50OiB7XG4gICAgZXZlbnRfaWQ6IG51bWJlcjtcbiAgICBwaW5nX21zPzogbnVtYmVyO1xuICB9O1xufTtcbmV4cG9ydCB0eXBlIENsaWVudFRvb2xDYWxsRXZlbnQgPSB7XG4gIHR5cGU6IFwiY2xpZW50X3Rvb2xfY2FsbFwiO1xuICBjbGllbnRfdG9vbF9jYWxsOiB7XG4gICAgdG9vbF9uYW1lOiBzdHJpbmc7XG4gICAgdG9vbF9jYWxsX2lkOiBzdHJpbmc7XG4gICAgcGFyYW1ldGVyczogYW55O1xuICAgIGV4cGVjdHNfcmVzcG9uc2U6IGJvb2xlYW47XG4gIH07XG59O1xuXG4vLyBUT0RPIGNvcnJlY3Rpb24gbWlzc2luZ1xuZXhwb3J0IHR5cGUgSW5jb21pbmdTb2NrZXRFdmVudCA9XG4gIHwgVXNlclRyYW5zY3JpcHRpb25FdmVudFxuICB8IEFnZW50UmVzcG9uc2VFdmVudFxuICB8IEFnZW50QXVkaW9FdmVudFxuICB8IEludGVycnVwdGlvbkV2ZW50XG4gIHwgSW50ZXJuYWxUZW50YXRpdmVBZ2VudFJlc3BvbnNlRXZlbnRcbiAgfCBDb25maWdFdmVudFxuICB8IFBpbmdFdmVudFxuICB8IENsaWVudFRvb2xDYWxsRXZlbnQ7XG5cbmV4cG9ydCB0eXBlIFBvbmdFdmVudCA9IHtcbiAgdHlwZTogXCJwb25nXCI7XG4gIGV2ZW50X2lkOiBudW1iZXI7XG59O1xuZXhwb3J0IHR5cGUgVXNlckF1ZGlvRXZlbnQgPSB7XG4gIHVzZXJfYXVkaW9fY2h1bms6IHN0cmluZztcbn07XG5leHBvcnQgdHlwZSBVc2VyRmVlZGJhY2tFdmVudCA9IHtcbiAgdHlwZTogXCJmZWVkYmFja1wiO1xuICBzY29yZTogXCJsaWtlXCIgfCBcImRpc2xpa2VcIjtcbiAgZXZlbnRfaWQ6IG51bWJlcjtcbn07XG5leHBvcnQgdHlwZSBDbGllbnRUb29sUmVzdWx0RXZlbnQgPSB7XG4gIHR5cGU6IFwiY2xpZW50X3Rvb2xfcmVzdWx0XCI7XG4gIHRvb2xfY2FsbF9pZDogc3RyaW5nO1xuICByZXN1bHQ6IGFueTtcbiAgaXNfZXJyb3I6IGJvb2xlYW47XG59O1xuZXhwb3J0IHR5cGUgSW5pdGlhdGlvbkNsaWVudERhdGFFdmVudCA9IHtcbiAgdHlwZTogXCJjb252ZXJzYXRpb25faW5pdGlhdGlvbl9jbGllbnRfZGF0YVwiO1xuICBjb252ZXJzYXRpb25fY29uZmlnX292ZXJyaWRlPzoge1xuICAgIGFnZW50Pzoge1xuICAgICAgcHJvbXB0Pzoge1xuICAgICAgICBwcm9tcHQ/OiBzdHJpbmc7XG4gICAgICB9O1xuICAgICAgZmlyc3RfbWVzc2FnZT86IHN0cmluZztcbiAgICAgIGxhbmd1YWdlPzogTGFuZ3VhZ2U7XG4gICAgfTtcbiAgICB0dHM/OiB7XG4gICAgICB2b2ljZV9pZD86IHN0cmluZztcbiAgICB9O1xuICB9O1xuICBjdXN0b21fbGxtX2V4dHJhX2JvZHk/OiBhbnk7XG4gIGR5bmFtaWNfdmFyaWFibGVzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbj47XG59O1xuZXhwb3J0IHR5cGUgT3V0Z29pbmdTb2NrZXRFdmVudCA9XG4gIHwgUG9uZ0V2ZW50XG4gIHwgVXNlckF1ZGlvRXZlbnRcbiAgfCBJbml0aWF0aW9uQ2xpZW50RGF0YUV2ZW50XG4gIHwgVXNlckZlZWRiYWNrRXZlbnRcbiAgfCBDbGllbnRUb29sUmVzdWx0RXZlbnQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkU29ja2V0RXZlbnQoZXZlbnQ6IGFueSk6IGV2ZW50IGlzIEluY29taW5nU29ja2V0RXZlbnQge1xuICByZXR1cm4gISFldmVudC50eXBlO1xufVxuIiwgImltcG9ydCB7XG4gIEluaXRpYXRpb25DbGllbnREYXRhRXZlbnQsXG4gIENvbmZpZ0V2ZW50LFxuICBpc1ZhbGlkU29ja2V0RXZlbnQsXG4gIE91dGdvaW5nU29ja2V0RXZlbnQsXG4gIEluY29taW5nU29ja2V0RXZlbnQsXG59IGZyb20gXCIuL2V2ZW50c1wiO1xuXG5jb25zdCBNQUlOX1BST1RPQ09MID0gXCJjb252YWlcIjtcblxuZXhwb3J0IHR5cGUgTGFuZ3VhZ2UgPVxuICB8IFwiZW5cIlxuICB8IFwiamFcIlxuICB8IFwiemhcIlxuICB8IFwiZGVcIlxuICB8IFwiaGlcIlxuICB8IFwiZnJcIlxuICB8IFwia29cIlxuICB8IFwicHRcIlxuICB8IFwiaXRcIlxuICB8IFwiZXNcIlxuICB8IFwiaWRcIlxuICB8IFwibmxcIlxuICB8IFwidHJcIlxuICB8IFwicGxcIlxuICB8IFwic3ZcIlxuICB8IFwiYmdcIlxuICB8IFwicm9cIlxuICB8IFwiYXJcIlxuICB8IFwiY3NcIlxuICB8IFwiZWxcIlxuICB8IFwiZmlcIlxuICB8IFwibXNcIlxuICB8IFwiZGFcIlxuICB8IFwidGFcIlxuICB8IFwidWtcIlxuICB8IFwicnVcIlxuICB8IFwiaHVcIlxuICB8IFwibm9cIlxuICB8IFwidmlcIjtcbmV4cG9ydCB0eXBlIFNlc3Npb25Db25maWcgPSB7XG4gIG9yaWdpbj86IHN0cmluZztcbiAgYXV0aG9yaXphdGlvbj86IHN0cmluZztcbiAgb3ZlcnJpZGVzPzoge1xuICAgIGFnZW50Pzoge1xuICAgICAgcHJvbXB0Pzoge1xuICAgICAgICBwcm9tcHQ/OiBzdHJpbmc7XG4gICAgICB9O1xuICAgICAgZmlyc3RNZXNzYWdlPzogc3RyaW5nO1xuICAgICAgbGFuZ3VhZ2U/OiBMYW5ndWFnZTtcbiAgICB9O1xuICAgIHR0cz86IHtcbiAgICAgIHZvaWNlSWQ/OiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbiAgY3VzdG9tTGxtRXh0cmFCb2R5PzogYW55O1xuICBkeW5hbWljVmFyaWFibGVzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbj47XG4gIGNvbm5lY3Rpb25EZWxheT86IHtcbiAgICBkZWZhdWx0OiBudW1iZXI7XG4gICAgYW5kcm9pZD86IG51bWJlcjtcbiAgICBpb3M/OiBudW1iZXI7XG4gIH07XG59ICYgKFxuICB8IHsgc2lnbmVkVXJsOiBzdHJpbmc7IGFnZW50SWQ/OiB1bmRlZmluZWQgfVxuICB8IHsgYWdlbnRJZDogc3RyaW5nOyBzaWduZWRVcmw/OiB1bmRlZmluZWQgfVxuKTtcbmV4cG9ydCB0eXBlIEZvcm1hdENvbmZpZyA9IHtcbiAgZm9ybWF0OiBcInBjbVwiIHwgXCJ1bGF3XCI7XG4gIHNhbXBsZVJhdGU6IG51bWJlcjtcbn07XG5leHBvcnQgdHlwZSBEaXNjb25uZWN0aW9uRGV0YWlscyA9XG4gIHwge1xuICAgICAgcmVhc29uOiBcImVycm9yXCI7XG4gICAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgICBjb250ZXh0OiBFdmVudDtcbiAgICB9XG4gIHwge1xuICAgICAgcmVhc29uOiBcImFnZW50XCI7XG4gICAgICBjb250ZXh0OiBDbG9zZUV2ZW50O1xuICAgIH1cbiAgfCB7XG4gICAgICByZWFzb246IFwidXNlclwiO1xuICAgIH07XG5leHBvcnQgdHlwZSBPbkRpc2Nvbm5lY3RDYWxsYmFjayA9IChkZXRhaWxzOiBEaXNjb25uZWN0aW9uRGV0YWlscykgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIE9uTWVzc2FnZUNhbGxiYWNrID0gKGV2ZW50OiBJbmNvbWluZ1NvY2tldEV2ZW50KSA9PiB2b2lkO1xuXG5jb25zdCBXU1NfQVBJX09SSUdJTiA9IFwid3NzOi8vYXBpLmVsZXZlbmxhYnMuaW9cIjtcbmNvbnN0IFdTU19BUElfUEFUSE5BTUUgPSBcIi92MS9jb252YWkvY29udmVyc2F0aW9uP2FnZW50X2lkPVwiO1xuXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbiB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlKGNvbmZpZzogU2Vzc2lvbkNvbmZpZyk6IFByb21pc2U8Q29ubmVjdGlvbj4ge1xuICAgIGxldCBzb2NrZXQ6IFdlYlNvY2tldCB8IG51bGwgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9yaWdpbiA9IGNvbmZpZy5vcmlnaW4gPz8gV1NTX0FQSV9PUklHSU47XG4gICAgICBjb25zdCB1cmwgPSBjb25maWcuc2lnbmVkVXJsXG4gICAgICAgID8gY29uZmlnLnNpZ25lZFVybFxuICAgICAgICA6IG9yaWdpbiArIFdTU19BUElfUEFUSE5BTUUgKyBjb25maWcuYWdlbnRJZDtcblxuICAgICAgY29uc3QgcHJvdG9jb2xzID0gW01BSU5fUFJPVE9DT0xdO1xuICAgICAgaWYgKGNvbmZpZy5hdXRob3JpemF0aW9uKSB7XG4gICAgICAgIHByb3RvY29scy5wdXNoKGBiZWFyZXIuJHtjb25maWcuYXV0aG9yaXphdGlvbn1gKTtcbiAgICAgIH1cbiAgICAgIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQodXJsLCBwcm90b2NvbHMpO1xuICAgICAgY29uc3QgY29udmVyc2F0aW9uQ29uZmlnID0gYXdhaXQgbmV3IFByb21pc2U8XG4gICAgICAgIENvbmZpZ0V2ZW50W1wiY29udmVyc2F0aW9uX2luaXRpYXRpb25fbWV0YWRhdGFfZXZlbnRcIl1cbiAgICAgID4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBzb2NrZXQhLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgXCJvcGVuXCIsXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3ZlcnJpZGVzRXZlbnQ6IEluaXRpYXRpb25DbGllbnREYXRhRXZlbnQgPSB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiY29udmVyc2F0aW9uX2luaXRpYXRpb25fY2xpZW50X2RhdGFcIixcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChjb25maWcub3ZlcnJpZGVzKSB7XG4gICAgICAgICAgICAgIG92ZXJyaWRlc0V2ZW50LmNvbnZlcnNhdGlvbl9jb25maWdfb3ZlcnJpZGUgPSB7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHtcbiAgICAgICAgICAgICAgICAgIHByb21wdDogY29uZmlnLm92ZXJyaWRlcy5hZ2VudD8ucHJvbXB0LFxuICAgICAgICAgICAgICAgICAgZmlyc3RfbWVzc2FnZTogY29uZmlnLm92ZXJyaWRlcy5hZ2VudD8uZmlyc3RNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IGNvbmZpZy5vdmVycmlkZXMuYWdlbnQ/Lmxhbmd1YWdlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdHRzOiB7XG4gICAgICAgICAgICAgICAgICB2b2ljZV9pZDogY29uZmlnLm92ZXJyaWRlcy50dHM/LnZvaWNlSWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy5jdXN0b21MbG1FeHRyYUJvZHkpIHtcbiAgICAgICAgICAgICAgb3ZlcnJpZGVzRXZlbnQuY3VzdG9tX2xsbV9leHRyYV9ib2R5ID0gY29uZmlnLmN1c3RvbUxsbUV4dHJhQm9keTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbmZpZy5keW5hbWljVmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgIG92ZXJyaWRlc0V2ZW50LmR5bmFtaWNfdmFyaWFibGVzID0gY29uZmlnLmR5bmFtaWNWYXJpYWJsZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNvY2tldD8uc2VuZChKU09OLnN0cmluZ2lmeShvdmVycmlkZXNFdmVudCkpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICAgICAgKTtcbiAgICAgICAgc29ja2V0IS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgIC8vIEluIGNhc2UgdGhlIGVycm9yIGV2ZW50IGlzIGZvbGxvd2VkIGJ5IGEgY2xvc2UgZXZlbnQsIHdlIHdhbnQgdGhlXG4gICAgICAgICAgLy8gbGF0dGVyIHRvIGJlIHRoZSBvbmUgdGhhdCByZWplY3RzIHRoZSBwcm9taXNlIGFzIGl0IGNvbnRhaW5zIG1vcmVcbiAgICAgICAgICAvLyB1c2VmdWwgaW5mb3JtYXRpb24uXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZWplY3QoZXZlbnQpLCAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNvY2tldCEuYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsIHJlamVjdCk7XG4gICAgICAgIHNvY2tldCEuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBcIm1lc3NhZ2VcIixcbiAgICAgICAgICAoZXZlbnQ6IE1lc3NhZ2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG5cbiAgICAgICAgICAgIGlmICghaXNWYWxpZFNvY2tldEV2ZW50KG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJjb252ZXJzYXRpb25faW5pdGlhdGlvbl9tZXRhZGF0YVwiKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZS5jb252ZXJzYXRpb25faW5pdGlhdGlvbl9tZXRhZGF0YV9ldmVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgXCJGaXJzdCByZWNlaXZlZCBtZXNzYWdlIGlzIG5vdCBjb252ZXJzYXRpb24gbWV0YWRhdGEuXCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qge1xuICAgICAgICBjb252ZXJzYXRpb25faWQsXG4gICAgICAgIGFnZW50X291dHB1dF9hdWRpb19mb3JtYXQsXG4gICAgICAgIHVzZXJfaW5wdXRfYXVkaW9fZm9ybWF0LFxuICAgICAgfSA9IGNvbnZlcnNhdGlvbkNvbmZpZztcblxuICAgICAgY29uc3QgaW5wdXRGb3JtYXQgPSBwYXJzZUZvcm1hdCh1c2VyX2lucHV0X2F1ZGlvX2Zvcm1hdCA/PyBcInBjbV8xNjAwMFwiKTtcbiAgICAgIGNvbnN0IG91dHB1dEZvcm1hdCA9IHBhcnNlRm9ybWF0KGFnZW50X291dHB1dF9hdWRpb19mb3JtYXQpO1xuXG4gICAgICByZXR1cm4gbmV3IENvbm5lY3Rpb24oc29ja2V0LCBjb252ZXJzYXRpb25faWQsIGlucHV0Rm9ybWF0LCBvdXRwdXRGb3JtYXQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBzb2NrZXQ/LmNsb3NlKCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHF1ZXVlOiBJbmNvbWluZ1NvY2tldEV2ZW50W10gPSBbXTtcbiAgcHJpdmF0ZSBkaXNjb25uZWN0aW9uRGV0YWlsczogRGlzY29ubmVjdGlvbkRldGFpbHMgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBvbkRpc2Nvbm5lY3RDYWxsYmFjazogT25EaXNjb25uZWN0Q2FsbGJhY2sgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBvbk1lc3NhZ2VDYWxsYmFjazogT25NZXNzYWdlQ2FsbGJhY2sgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSBzb2NrZXQ6IFdlYlNvY2tldCxcbiAgICBwdWJsaWMgcmVhZG9ubHkgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcbiAgICBwdWJsaWMgcmVhZG9ubHkgaW5wdXRGb3JtYXQ6IEZvcm1hdENvbmZpZyxcbiAgICBwdWJsaWMgcmVhZG9ubHkgb3V0cHV0Rm9ybWF0OiBGb3JtYXRDb25maWdcbiAgKSB7XG4gICAgdGhpcy5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGV2ZW50ID0+IHtcbiAgICAgIC8vIEluIGNhc2UgdGhlIGVycm9yIGV2ZW50IGlzIGZvbGxvd2VkIGJ5IGEgY2xvc2UgZXZlbnQsIHdlIHdhbnQgdGhlXG4gICAgICAvLyBsYXR0ZXIgdG8gYmUgdGhlIG9uZSB0aGF0IGRpc2Nvbm5lY3RzIHRoZSBzZXNzaW9uIGFzIGl0IGNvbnRhaW5zIG1vcmVcbiAgICAgIC8vIHVzZWZ1bCBpbmZvcm1hdGlvbi5cbiAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICgpID0+XG4gICAgICAgICAgdGhpcy5kaXNjb25uZWN0KHtcbiAgICAgICAgICAgIHJlYXNvbjogXCJlcnJvclwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJUaGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGR1ZSB0byBhIHNvY2tldCBlcnJvci5cIixcbiAgICAgICAgICAgIGNvbnRleHQ6IGV2ZW50LFxuICAgICAgICAgIH0pLFxuICAgICAgICAwXG4gICAgICApO1xuICAgIH0pO1xuICAgIHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLCBldmVudCA9PiB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoXG4gICAgICAgIGV2ZW50LmNvZGUgPT09IDEwMDBcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgcmVhc29uOiBcImFnZW50XCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IGV2ZW50LFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICByZWFzb246IFwiZXJyb3JcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTpcbiAgICAgICAgICAgICAgICBldmVudC5yZWFzb24gfHwgXCJUaGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGJ5IHRoZSBzZXJ2ZXIuXCIsXG4gICAgICAgICAgICAgIGNvbnRleHQ6IGV2ZW50LFxuICAgICAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgICB0aGlzLnNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBldmVudCA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJzZWRFdmVudCA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGlmICghaXNWYWxpZFNvY2tldEV2ZW50KHBhcnNlZEV2ZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9uTWVzc2FnZUNhbGxiYWNrKSB7XG4gICAgICAgICAgdGhpcy5vbk1lc3NhZ2VDYWxsYmFjayhwYXJzZWRFdmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHBhcnNlZEV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoXykge31cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBjbG9zZSgpIHtcbiAgICB0aGlzLnNvY2tldC5jbG9zZSgpO1xuICB9XG5cbiAgcHVibGljIHNlbmRNZXNzYWdlKG1lc3NhZ2U6IE91dGdvaW5nU29ja2V0RXZlbnQpIHtcbiAgICB0aGlzLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcbiAgfVxuXG4gIHB1YmxpYyBvbk1lc3NhZ2UoY2FsbGJhY2s6IE9uTWVzc2FnZUNhbGxiYWNrKSB7XG4gICAgdGhpcy5vbk1lc3NhZ2VDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMucXVldWUuZm9yRWFjaChjYWxsYmFjayk7XG4gICAgdGhpcy5xdWV1ZSA9IFtdO1xuICB9XG5cbiAgcHVibGljIG9uRGlzY29ubmVjdChjYWxsYmFjazogT25EaXNjb25uZWN0Q2FsbGJhY2spIHtcbiAgICB0aGlzLm9uRGlzY29ubmVjdENhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgaWYgKHRoaXMuZGlzY29ubmVjdGlvbkRldGFpbHMpIHtcbiAgICAgIGNhbGxiYWNrKHRoaXMuZGlzY29ubmVjdGlvbkRldGFpbHMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGlzY29ubmVjdChkZXRhaWxzOiBEaXNjb25uZWN0aW9uRGV0YWlscykge1xuICAgIGlmICghdGhpcy5kaXNjb25uZWN0aW9uRGV0YWlscykge1xuICAgICAgdGhpcy5kaXNjb25uZWN0aW9uRGV0YWlscyA9IGRldGFpbHM7XG4gICAgICB0aGlzLm9uRGlzY29ubmVjdENhbGxiYWNrPy4oZGV0YWlscyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlRm9ybWF0KGZvcm1hdDogc3RyaW5nKTogRm9ybWF0Q29uZmlnIHtcbiAgY29uc3QgW2Zvcm1hdFBhcnQsIHNhbXBsZVJhdGVQYXJ0XSA9IGZvcm1hdC5zcGxpdChcIl9cIik7XG4gIGlmICghW1wicGNtXCIsIFwidWxhd1wiXS5pbmNsdWRlcyhmb3JtYXRQYXJ0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmb3JtYXQ6ICR7Zm9ybWF0fWApO1xuICB9XG5cbiAgY29uc3Qgc2FtcGxlUmF0ZSA9IHBhcnNlSW50KHNhbXBsZVJhdGVQYXJ0KTtcbiAgaWYgKGlzTmFOKHNhbXBsZVJhdGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNhbXBsZSByYXRlOiAke3NhbXBsZVJhdGVQYXJ0fWApO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmb3JtYXQ6IGZvcm1hdFBhcnQgYXMgRm9ybWF0Q29uZmlnW1wiZm9ybWF0XCJdLFxuICAgIHNhbXBsZVJhdGUsXG4gIH07XG59XG4iLCAiaW1wb3J0IHsgYXJyYXlCdWZmZXJUb0Jhc2U2NCwgYmFzZTY0VG9BcnJheUJ1ZmZlciB9IGZyb20gXCIuL3V0aWxzL2F1ZGlvXCI7XG5pbXBvcnQgeyBJbnB1dCwgSW5wdXRDb25maWcgfSBmcm9tIFwiLi91dGlscy9pbnB1dFwiO1xuaW1wb3J0IHsgT3V0cHV0IH0gZnJvbSBcIi4vdXRpbHMvb3V0cHV0XCI7XG5pbXBvcnQge1xuICBDb25uZWN0aW9uLFxuICBEaXNjb25uZWN0aW9uRGV0YWlscyxcbiAgT25EaXNjb25uZWN0Q2FsbGJhY2ssXG4gIFNlc3Npb25Db25maWcsXG59IGZyb20gXCIuL3V0aWxzL2Nvbm5lY3Rpb25cIjtcbmltcG9ydCB7IENsaWVudFRvb2xDYWxsRXZlbnQsIEluY29taW5nU29ja2V0RXZlbnQgfSBmcm9tIFwiLi91dGlscy9ldmVudHNcIjtcbmltcG9ydCB7IGlzQW5kcm9pZERldmljZSwgaXNJb3NEZXZpY2UgfSBmcm9tIFwiLi91dGlscy9jb21wYXRpYmlsaXR5XCI7XG5cbmV4cG9ydCB0eXBlIHsgSW5jb21pbmdTb2NrZXRFdmVudCB9IGZyb20gXCIuL3V0aWxzL2V2ZW50c1wiO1xuZXhwb3J0IHR5cGUgeyBTZXNzaW9uQ29uZmlnLCBEaXNjb25uZWN0aW9uRGV0YWlscyB9IGZyb20gXCIuL3V0aWxzL2Nvbm5lY3Rpb25cIjtcbmV4cG9ydCB0eXBlIFJvbGUgPSBcInVzZXJcIiB8IFwiYWlcIjtcbmV4cG9ydCB0eXBlIE1vZGUgPSBcInNwZWFraW5nXCIgfCBcImxpc3RlbmluZ1wiO1xuZXhwb3J0IHR5cGUgU3RhdHVzID1cbiAgfCBcImNvbm5lY3RpbmdcIlxuICB8IFwiY29ubmVjdGVkXCJcbiAgfCBcImRpc2Nvbm5lY3RpbmdcIlxuICB8IFwiZGlzY29ubmVjdGVkXCI7XG5leHBvcnQgdHlwZSBPcHRpb25zID0gU2Vzc2lvbkNvbmZpZyAmXG4gIENhbGxiYWNrcyAmXG4gIENsaWVudFRvb2xzQ29uZmlnICZcbiAgSW5wdXRDb25maWc7XG5leHBvcnQgdHlwZSBDbGllbnRUb29sc0NvbmZpZyA9IHtcbiAgY2xpZW50VG9vbHM6IFJlY29yZDxcbiAgICBzdHJpbmcsXG4gICAgKFxuICAgICAgcGFyYW1ldGVyczogYW55XG4gICAgKSA9PiBQcm9taXNlPHN0cmluZyB8IG51bWJlciB8IHZvaWQ+IHwgc3RyaW5nIHwgbnVtYmVyIHwgdm9pZFxuICA+O1xufTtcbmV4cG9ydCB0eXBlIENhbGxiYWNrcyA9IHtcbiAgb25Db25uZWN0OiAocHJvcHM6IHsgY29udmVyc2F0aW9uSWQ6IHN0cmluZyB9KSA9PiB2b2lkO1xuICAvLyBpbnRlcm5hbCBkZWJ1ZyBldmVudHMsIG5vdCB0byBiZSB1c2VkXG4gIG9uRGVidWc6IChwcm9wczogYW55KSA9PiB2b2lkO1xuICBvbkRpc2Nvbm5lY3Q6IE9uRGlzY29ubmVjdENhbGxiYWNrO1xuICBvbkVycm9yOiAobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogYW55KSA9PiB2b2lkO1xuICBvbk1lc3NhZ2U6IChwcm9wczogeyBtZXNzYWdlOiBzdHJpbmc7IHNvdXJjZTogUm9sZSB9KSA9PiB2b2lkO1xuICBvbk1vZGVDaGFuZ2U6IChwcm9wOiB7IG1vZGU6IE1vZGUgfSkgPT4gdm9pZDtcbiAgb25TdGF0dXNDaGFuZ2U6IChwcm9wOiB7IHN0YXR1czogU3RhdHVzIH0pID0+IHZvaWQ7XG4gIG9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlOiAocHJvcDogeyBjYW5TZW5kRmVlZGJhY2s6IGJvb2xlYW4gfSkgPT4gdm9pZDtcbiAgb25VbmhhbmRsZWRDbGllbnRUb29sQ2FsbD86IChcbiAgICBwYXJhbXM6IENsaWVudFRvb2xDYWxsRXZlbnRbXCJjbGllbnRfdG9vbF9jYWxsXCJdXG4gICkgPT4gdm9pZDtcbn07XG5cbmNvbnN0IGRlZmF1bHRDbGllbnRUb29scyA9IHsgY2xpZW50VG9vbHM6IHt9IH07XG5jb25zdCBkZWZhdWx0Q2FsbGJhY2tzOiBDYWxsYmFja3MgPSB7XG4gIG9uQ29ubmVjdDogKCkgPT4ge30sXG4gIG9uRGVidWc6ICgpID0+IHt9LFxuICBvbkRpc2Nvbm5lY3Q6ICgpID0+IHt9LFxuICBvbkVycm9yOiAoKSA9PiB7fSxcbiAgb25NZXNzYWdlOiAoKSA9PiB7fSxcbiAgb25Nb2RlQ2hhbmdlOiAoKSA9PiB7fSxcbiAgb25TdGF0dXNDaGFuZ2U6ICgpID0+IHt9LFxuICBvbkNhblNlbmRGZWVkYmFja0NoYW5nZTogKCkgPT4ge30sXG59O1xuXG5jb25zdCBIVFRQU19BUElfT1JJR0lOID0gXCJodHRwczovL2FwaS5lbGV2ZW5sYWJzLmlvXCI7XG5cbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb24ge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIHN0YXJ0U2Vzc2lvbihcbiAgICBvcHRpb25zOiBTZXNzaW9uQ29uZmlnICZcbiAgICAgIFBhcnRpYWw8Q2FsbGJhY2tzPiAmXG4gICAgICBQYXJ0aWFsPENsaWVudFRvb2xzQ29uZmlnPiAmXG4gICAgICBQYXJ0aWFsPElucHV0Q29uZmlnPlxuICApOiBQcm9taXNlPENvbnZlcnNhdGlvbj4ge1xuICAgIGNvbnN0IGZ1bGxPcHRpb25zOiBPcHRpb25zID0ge1xuICAgICAgLi4uZGVmYXVsdENsaWVudFRvb2xzLFxuICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfTtcblxuICAgIGZ1bGxPcHRpb25zLm9uU3RhdHVzQ2hhbmdlKHsgc3RhdHVzOiBcImNvbm5lY3RpbmdcIiB9KTtcbiAgICBmdWxsT3B0aW9ucy5vbkNhblNlbmRGZWVkYmFja0NoYW5nZSh7IGNhblNlbmRGZWVkYmFjazogZmFsc2UgfSk7XG5cbiAgICBsZXQgaW5wdXQ6IElucHV0IHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IGNvbm5lY3Rpb246IENvbm5lY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgICBsZXQgb3V0cHV0OiBPdXRwdXQgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgcHJlbGltaW5hcnlJbnB1dFN0cmVhbTogTWVkaWFTdHJlYW0gfCBudWxsID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICAvLyBzb21lIGJyb3dzZXJzIHdvbid0IGFsbG93IGNhbGxpbmcgZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgb3IgZW51bWVyYXRlRGV2aWNlc1xuICAgICAgLy8gYmVmb3JlIGdldHRpbmcgYXBwcm92YWwgZm9yIG1pY3JvcGhvbmUgYWNjZXNzXG4gICAgICBwcmVsaW1pbmFyeUlucHV0U3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxheUNvbmZpZyA9IG9wdGlvbnMuY29ubmVjdGlvbkRlbGF5ID8/IHtcbiAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgICAgLy8gR2l2ZSB0aGUgQW5kcm9pZCBBdWRpb01hbmFnZXIgZW5vdWdoIHRpbWUgdG8gc3dpdGNoIHRvIHRoZSBjb3JyZWN0IGF1ZGlvIG1vZGVcbiAgICAgICAgYW5kcm9pZDogM18wMDAsXG4gICAgICB9O1xuICAgICAgbGV0IGRlbGF5ID0gZGVsYXlDb25maWcuZGVmYXVsdDtcbiAgICAgIGlmIChpc0FuZHJvaWREZXZpY2UoKSkge1xuICAgICAgICBkZWxheSA9IGRlbGF5Q29uZmlnLmFuZHJvaWQgPz8gZGVsYXk7XG4gICAgICB9IGVsc2UgaWYgKGlzSW9zRGV2aWNlKCkpIHtcbiAgICAgICAgZGVsYXkgPSBkZWxheUNvbmZpZy5pb3MgPz8gZGVsYXk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgICB9XG5cbiAgICAgIGNvbm5lY3Rpb24gPSBhd2FpdCBDb25uZWN0aW9uLmNyZWF0ZShvcHRpb25zKTtcbiAgICAgIFtpbnB1dCwgb3V0cHV0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgSW5wdXQuY3JlYXRlKHtcbiAgICAgICAgICAuLi5jb25uZWN0aW9uLmlucHV0Rm9ybWF0LFxuICAgICAgICAgIHByZWZlckhlYWRwaG9uZXNGb3JJb3NEZXZpY2VzOiBvcHRpb25zLnByZWZlckhlYWRwaG9uZXNGb3JJb3NEZXZpY2VzLFxuICAgICAgICB9KSxcbiAgICAgICAgT3V0cHV0LmNyZWF0ZShjb25uZWN0aW9uLm91dHB1dEZvcm1hdCksXG4gICAgICBdKTtcblxuICAgICAgcHJlbGltaW5hcnlJbnB1dFN0cmVhbT8uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgcHJlbGltaW5hcnlJbnB1dFN0cmVhbSA9IG51bGw7XG5cbiAgICAgIHJldHVybiBuZXcgQ29udmVyc2F0aW9uKGZ1bGxPcHRpb25zLCBjb25uZWN0aW9uLCBpbnB1dCwgb3V0cHV0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZnVsbE9wdGlvbnMub25TdGF0dXNDaGFuZ2UoeyBzdGF0dXM6IFwiZGlzY29ubmVjdGVkXCIgfSk7XG4gICAgICBwcmVsaW1pbmFyeUlucHV0U3RyZWFtPy5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICBjb25uZWN0aW9uPy5jbG9zZSgpO1xuICAgICAgYXdhaXQgaW5wdXQ/LmNsb3NlKCk7XG4gICAgICBhd2FpdCBvdXRwdXQ/LmNsb3NlKCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGxhc3RJbnRlcnJ1cHRUaW1lc3RhbXA6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgbW9kZTogTW9kZSA9IFwibGlzdGVuaW5nXCI7XG4gIHByaXZhdGUgc3RhdHVzOiBTdGF0dXMgPSBcImNvbm5lY3RpbmdcIjtcbiAgcHJpdmF0ZSBpbnB1dEZyZXF1ZW5jeURhdGE/OiBVaW50OEFycmF5O1xuICBwcml2YXRlIG91dHB1dEZyZXF1ZW5jeURhdGE/OiBVaW50OEFycmF5O1xuICBwcml2YXRlIHZvbHVtZTogbnVtYmVyID0gMTtcbiAgcHJpdmF0ZSBjdXJyZW50RXZlbnRJZDogbnVtYmVyID0gMTtcbiAgcHJpdmF0ZSBsYXN0RmVlZGJhY2tFdmVudElkOiBudW1iZXIgPSAxO1xuICBwcml2YXRlIGNhblNlbmRGZWVkYmFjazogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBvcHRpb25zOiBPcHRpb25zLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgY29ubmVjdGlvbjogQ29ubmVjdGlvbixcbiAgICBwdWJsaWMgcmVhZG9ubHkgaW5wdXQ6IElucHV0LFxuICAgIHB1YmxpYyByZWFkb25seSBvdXRwdXQ6IE91dHB1dFxuICApIHtcbiAgICB0aGlzLm9wdGlvbnMub25Db25uZWN0KHsgY29udmVyc2F0aW9uSWQ6IGNvbm5lY3Rpb24uY29udmVyc2F0aW9uSWQgfSk7XG5cbiAgICB0aGlzLmNvbm5lY3Rpb24ub25EaXNjb25uZWN0KHRoaXMuZW5kU2Vzc2lvbldpdGhEZXRhaWxzKTtcbiAgICB0aGlzLmNvbm5lY3Rpb24ub25NZXNzYWdlKHRoaXMub25NZXNzYWdlKTtcblxuICAgIHRoaXMuaW5wdXQud29ya2xldC5wb3J0Lm9ubWVzc2FnZSA9IHRoaXMub25JbnB1dFdvcmtsZXRNZXNzYWdlO1xuICAgIHRoaXMub3V0cHV0LndvcmtsZXQucG9ydC5vbm1lc3NhZ2UgPSB0aGlzLm9uT3V0cHV0V29ya2xldE1lc3NhZ2U7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoXCJjb25uZWN0ZWRcIik7XG4gIH1cblxuICBwdWJsaWMgZW5kU2Vzc2lvbiA9ICgpID0+IHRoaXMuZW5kU2Vzc2lvbldpdGhEZXRhaWxzKHsgcmVhc29uOiBcInVzZXJcIiB9KTtcblxuICBwcml2YXRlIGVuZFNlc3Npb25XaXRoRGV0YWlscyA9IGFzeW5jIChkZXRhaWxzOiBEaXNjb25uZWN0aW9uRGV0YWlscykgPT4ge1xuICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gXCJjb25uZWN0ZWRcIiAmJiB0aGlzLnN0YXR1cyAhPT0gXCJjb25uZWN0aW5nXCIpIHJldHVybjtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyhcImRpc2Nvbm5lY3RpbmdcIik7XG5cbiAgICB0aGlzLmNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICBhd2FpdCB0aGlzLmlucHV0LmNsb3NlKCk7XG4gICAgYXdhaXQgdGhpcy5vdXRwdXQuY2xvc2UoKTtcblxuICAgIHRoaXMudXBkYXRlU3RhdHVzKFwiZGlzY29ubmVjdGVkXCIpO1xuICAgIHRoaXMub3B0aW9ucy5vbkRpc2Nvbm5lY3QoZGV0YWlscyk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVNb2RlID0gKG1vZGU6IE1vZGUpID0+IHtcbiAgICBpZiAobW9kZSAhPT0gdGhpcy5tb2RlKSB7XG4gICAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgICAgdGhpcy5vcHRpb25zLm9uTW9kZUNoYW5nZSh7IG1vZGUgfSk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlU3RhdHVzID0gKHN0YXR1czogU3RhdHVzKSA9PiB7XG4gICAgaWYgKHN0YXR1cyAhPT0gdGhpcy5zdGF0dXMpIHtcbiAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgdGhpcy5vcHRpb25zLm9uU3RhdHVzQ2hhbmdlKHsgc3RhdHVzIH0pO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZUNhblNlbmRGZWVkYmFjayA9ICgpID0+IHtcbiAgICBjb25zdCBjYW5TZW5kRmVlZGJhY2sgPSB0aGlzLmN1cnJlbnRFdmVudElkICE9PSB0aGlzLmxhc3RGZWVkYmFja0V2ZW50SWQ7XG4gICAgaWYgKHRoaXMuY2FuU2VuZEZlZWRiYWNrICE9PSBjYW5TZW5kRmVlZGJhY2spIHtcbiAgICAgIHRoaXMuY2FuU2VuZEZlZWRiYWNrID0gY2FuU2VuZEZlZWRiYWNrO1xuICAgICAgdGhpcy5vcHRpb25zLm9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlKHsgY2FuU2VuZEZlZWRiYWNrIH0pO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIG9uTWVzc2FnZSA9IGFzeW5jIChwYXJzZWRFdmVudDogSW5jb21pbmdTb2NrZXRFdmVudCkgPT4ge1xuICAgIHN3aXRjaCAocGFyc2VkRXZlbnQudHlwZSkge1xuICAgICAgY2FzZSBcImludGVycnVwdGlvblwiOiB7XG4gICAgICAgIGlmIChwYXJzZWRFdmVudC5pbnRlcnJ1cHRpb25fZXZlbnQpIHtcbiAgICAgICAgICB0aGlzLmxhc3RJbnRlcnJ1cHRUaW1lc3RhbXAgPSBwYXJzZWRFdmVudC5pbnRlcnJ1cHRpb25fZXZlbnQuZXZlbnRfaWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mYWRlT3V0QXVkaW8oKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgXCJhZ2VudF9yZXNwb25zZVwiOiB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vbk1lc3NhZ2Uoe1xuICAgICAgICAgIHNvdXJjZTogXCJhaVwiLFxuICAgICAgICAgIG1lc3NhZ2U6IHBhcnNlZEV2ZW50LmFnZW50X3Jlc3BvbnNlX2V2ZW50LmFnZW50X3Jlc3BvbnNlLFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgXCJ1c2VyX3RyYW5zY3JpcHRcIjoge1xuICAgICAgICB0aGlzLm9wdGlvbnMub25NZXNzYWdlKHtcbiAgICAgICAgICBzb3VyY2U6IFwidXNlclwiLFxuICAgICAgICAgIG1lc3NhZ2U6IHBhcnNlZEV2ZW50LnVzZXJfdHJhbnNjcmlwdGlvbl9ldmVudC51c2VyX3RyYW5zY3JpcHQsXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBcImludGVybmFsX3RlbnRhdGl2ZV9hZ2VudF9yZXNwb25zZVwiOiB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vbkRlYnVnKHtcbiAgICAgICAgICB0eXBlOiBcInRlbnRhdGl2ZV9hZ2VudF9yZXNwb25zZVwiLFxuICAgICAgICAgIHJlc3BvbnNlOlxuICAgICAgICAgICAgcGFyc2VkRXZlbnQudGVudGF0aXZlX2FnZW50X3Jlc3BvbnNlX2ludGVybmFsX2V2ZW50XG4gICAgICAgICAgICAgIC50ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2UsXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBcImNsaWVudF90b29sX2NhbGxcIjoge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5vcHRpb25zLmNsaWVudFRvb2xzLmhhc093blByb3BlcnR5KFxuICAgICAgICAgICAgcGFyc2VkRXZlbnQuY2xpZW50X3Rvb2xfY2FsbC50b29sX25hbWVcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPVxuICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5vcHRpb25zLmNsaWVudFRvb2xzW1xuICAgICAgICAgICAgICAgIHBhcnNlZEV2ZW50LmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lXG4gICAgICAgICAgICAgIF0ocGFyc2VkRXZlbnQuY2xpZW50X3Rvb2xfY2FsbC5wYXJhbWV0ZXJzKSkgPz9cbiAgICAgICAgICAgICAgXCJDbGllbnQgdG9vbCBleGVjdXRpb24gc3VjY2Vzc2Z1bC5cIjsgLy8gZGVmYXVsdCBjbGllbnQtdG9vbCBjYWxsIHJlc3BvbnNlXG5cbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiY2xpZW50X3Rvb2xfcmVzdWx0XCIsXG4gICAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogcGFyc2VkRXZlbnQuY2xpZW50X3Rvb2xfY2FsbC50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0LFxuICAgICAgICAgICAgICBpc19lcnJvcjogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoXG4gICAgICAgICAgICAgIFwiQ2xpZW50IHRvb2wgZXhlY3V0aW9uIGZhaWxlZCB3aXRoIGZvbGxvd2luZyBlcnJvcjogXCIgK1xuICAgICAgICAgICAgICAgIChlIGFzIEVycm9yKT8ubWVzc2FnZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsaWVudFRvb2xOYW1lOiBwYXJzZWRFdmVudC5jbGllbnRfdG9vbF9jYWxsLnRvb2xfbmFtZSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiY2xpZW50X3Rvb2xfcmVzdWx0XCIsXG4gICAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogcGFyc2VkRXZlbnQuY2xpZW50X3Rvb2xfY2FsbC50b29sX2NhbGxfaWQsXG4gICAgICAgICAgICAgIHJlc3VsdDogXCJDbGllbnQgdG9vbCBleGVjdXRpb24gZmFpbGVkOiBcIiArIChlIGFzIEVycm9yKT8ubWVzc2FnZSxcbiAgICAgICAgICAgICAgaXNfZXJyb3I6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMub25VbmhhbmRsZWRDbGllbnRUb29sQ2FsbCkge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vblVuaGFuZGxlZENsaWVudFRvb2xDYWxsKHBhcnNlZEV2ZW50LmNsaWVudF90b29sX2NhbGwpO1xuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9uRXJyb3IoXG4gICAgICAgICAgYENsaWVudCB0b29sIHdpdGggbmFtZSAke3BhcnNlZEV2ZW50LmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lfSBpcyBub3QgZGVmaW5lZCBvbiBjbGllbnRgLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsaWVudFRvb2xOYW1lOiBwYXJzZWRFdmVudC5jbGllbnRfdG9vbF9jYWxsLnRvb2xfbmFtZSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgdHlwZTogXCJjbGllbnRfdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICB0b29sX2NhbGxfaWQ6IHBhcnNlZEV2ZW50LmNsaWVudF90b29sX2NhbGwudG9vbF9jYWxsX2lkLFxuICAgICAgICAgIHJlc3VsdDogYENsaWVudCB0b29sIHdpdGggbmFtZSAke3BhcnNlZEV2ZW50LmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lfSBpcyBub3QgZGVmaW5lZCBvbiBjbGllbnRgLFxuICAgICAgICAgIGlzX2Vycm9yOiB0cnVlLFxuICAgICAgICB9KTtcblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBcImF1ZGlvXCI6IHtcbiAgICAgICAgaWYgKHRoaXMubGFzdEludGVycnVwdFRpbWVzdGFtcCA8PSBwYXJzZWRFdmVudC5hdWRpb19ldmVudC5ldmVudF9pZCkge1xuICAgICAgICAgIHRoaXMuYWRkQXVkaW9CYXNlNjRDaHVuayhwYXJzZWRFdmVudC5hdWRpb19ldmVudC5hdWRpb19iYXNlXzY0KTtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRFdmVudElkID0gcGFyc2VkRXZlbnQuYXVkaW9fZXZlbnQuZXZlbnRfaWQ7XG4gICAgICAgICAgdGhpcy51cGRhdGVDYW5TZW5kRmVlZGJhY2soKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGUoXCJzcGVha2luZ1wiKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBcInBpbmdcIjoge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgIHR5cGU6IFwicG9uZ1wiLFxuICAgICAgICAgIGV2ZW50X2lkOiBwYXJzZWRFdmVudC5waW5nX2V2ZW50LmV2ZW50X2lkLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gcGFyc2VkRXZlbnQucGluZ19ldmVudC5waW5nX21zIGNhbiBiZSB1c2VkIG9uIGNsaWVudCBzaWRlLCBmb3IgZXhhbXBsZVxuICAgICAgICAvLyB0byB3YXJuIGlmIHBpbmcgaXMgdG9vIGhpZ2ggdGhhdCBleHBlcmllbmNlIG1pZ2h0IGJlIGRlZ3JhZGVkLlxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gdW5oYW5kbGVkIGV2ZW50cyBhcmUgZXhwZWN0ZWQgdG8gYmUgaW50ZXJuYWwgZXZlbnRzXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vbkRlYnVnKHBhcnNlZEV2ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgb25JbnB1dFdvcmtsZXRNZXNzYWdlID0gKGV2ZW50OiBNZXNzYWdlRXZlbnQpOiB2b2lkID0+IHtcbiAgICBjb25zdCByYXdBdWRpb1BjbURhdGEgPSBldmVudC5kYXRhWzBdO1xuICAgIGNvbnN0IG1heFZvbHVtZSA9IGV2ZW50LmRhdGFbMV07XG5cbiAgICAvLyBjaGVjayBpZiB0aGUgc291bmQgd2FzIGxvdWQgZW5vdWdoLCBzbyB3ZSBkb24ndCBzZW5kIHVubmVjZXNzYXJ5IGNodW5rc1xuICAgIC8vIHRoZW4gZm9yd2FyZCBhdWRpbyB0byB3ZWJzb2NrZXRcbiAgICAvL2lmIChtYXhWb2x1bWUgPiAwLjAwMSkge1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gXCJjb25uZWN0ZWRcIikge1xuICAgICAgdGhpcy5jb25uZWN0aW9uLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgdXNlcl9hdWRpb19jaHVuazogYXJyYXlCdWZmZXJUb0Jhc2U2NChyYXdBdWRpb1BjbURhdGEuYnVmZmVyKSxcbiAgICAgICAgLy9zYW1wbGVfcmF0ZTogdGhpcy5pbnB1dEF1ZGlvQ29udGV4dD8uaW5wdXRTYW1wbGVSYXRlIHx8IHRoaXMuaW5wdXRTYW1wbGVSYXRlLFxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vfVxuICB9O1xuXG4gIHByaXZhdGUgb25PdXRwdXRXb3JrbGV0TWVzc2FnZSA9ICh7IGRhdGEgfTogTWVzc2FnZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgaWYgKGRhdGEudHlwZSA9PT0gXCJwcm9jZXNzXCIpIHtcbiAgICAgIHRoaXMudXBkYXRlTW9kZShkYXRhLmZpbmlzaGVkID8gXCJsaXN0ZW5pbmdcIiA6IFwic3BlYWtpbmdcIik7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgYWRkQXVkaW9CYXNlNjRDaHVuayA9IChjaHVuazogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5vdXRwdXQuZ2Fpbi5nYWluLnZhbHVlID0gdGhpcy52b2x1bWU7XG4gICAgdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJjbGVhckludGVycnVwdGVkXCIgfSk7XG4gICAgdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHtcbiAgICAgIHR5cGU6IFwiYnVmZmVyXCIsXG4gICAgICBidWZmZXI6IGJhc2U2NFRvQXJyYXlCdWZmZXIoY2h1bmspLFxuICAgIH0pO1xuICB9O1xuXG4gIHByaXZhdGUgZmFkZU91dEF1ZGlvID0gKCkgPT4ge1xuICAgIC8vIG11dGUgYWdlbnRcbiAgICB0aGlzLnVwZGF0ZU1vZGUoXCJsaXN0ZW5pbmdcIik7XG4gICAgdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJpbnRlcnJ1cHRcIiB9KTtcbiAgICB0aGlzLm91dHB1dC5nYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZShcbiAgICAgIDAuMDAwMSxcbiAgICAgIHRoaXMub3V0cHV0LmNvbnRleHQuY3VycmVudFRpbWUgKyAyXG4gICAgKTtcblxuICAgIC8vIHJlc2V0IHZvbHVtZSBiYWNrXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLm91dHB1dC5nYWluLmdhaW4udmFsdWUgPSB0aGlzLnZvbHVtZTtcbiAgICAgIHRoaXMub3V0cHV0LndvcmtsZXQucG9ydC5wb3N0TWVzc2FnZSh7IHR5cGU6IFwiY2xlYXJJbnRlcnJ1cHRlZFwiIH0pO1xuICAgIH0sIDIwMDApOyAvLyBBZGp1c3QgdGhlIGR1cmF0aW9uIGFzIG5lZWRlZFxuICB9O1xuXG4gIHByaXZhdGUgb25FcnJvciA9IChtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnkpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UsIGNvbnRleHQpO1xuICAgIHRoaXMub3B0aW9ucy5vbkVycm9yKG1lc3NhZ2UsIGNvbnRleHQpO1xuICB9O1xuXG4gIHByaXZhdGUgY2FsY3VsYXRlVm9sdW1lID0gKGZyZXF1ZW5jeURhdGE6IFVpbnQ4QXJyYXkpID0+IHtcbiAgICBpZiAoZnJlcXVlbmN5RGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEN1cnJlbnRseSB0aGlzIGF2ZXJhZ2VzIGFsbCBmcmVxdWVuY2llcywgYnV0IHdlIHNob3VsZCBwcm9iYWJseVxuICAgIC8vIGJpYXMgdG93YXJkcyB0aGUgZnJlcXVlbmNpZXMgdGhhdCBhcmUgbW9yZSB0eXBpY2FsIGZvciBodW1hbiB2b2ljZVxuICAgIGxldCB2b2x1bWUgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJlcXVlbmN5RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgdm9sdW1lICs9IGZyZXF1ZW5jeURhdGFbaV0gLyAyNTU7XG4gICAgfVxuICAgIHZvbHVtZSAvPSBmcmVxdWVuY3lEYXRhLmxlbmd0aDtcblxuICAgIHJldHVybiB2b2x1bWUgPCAwID8gMCA6IHZvbHVtZSA+IDEgPyAxIDogdm9sdW1lO1xuICB9O1xuXG4gIHB1YmxpYyBnZXRJZCA9ICgpID0+IHRoaXMuY29ubmVjdGlvbi5jb252ZXJzYXRpb25JZDtcblxuICBwdWJsaWMgaXNPcGVuID0gKCkgPT4gdGhpcy5zdGF0dXMgPT09IFwiY29ubmVjdGVkXCI7XG5cbiAgcHVibGljIHNldFZvbHVtZSA9ICh7IHZvbHVtZSB9OiB7IHZvbHVtZTogbnVtYmVyIH0pID0+IHtcbiAgICB0aGlzLnZvbHVtZSA9IHZvbHVtZTtcbiAgfTtcblxuICBwdWJsaWMgZ2V0SW5wdXRCeXRlRnJlcXVlbmN5RGF0YSA9ICgpID0+IHtcbiAgICB0aGlzLmlucHV0RnJlcXVlbmN5RGF0YSA/Pz0gbmV3IFVpbnQ4QXJyYXkoXG4gICAgICB0aGlzLmlucHV0LmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50XG4gICAgKTtcbiAgICB0aGlzLmlucHV0LmFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKHRoaXMuaW5wdXRGcmVxdWVuY3lEYXRhKTtcbiAgICByZXR1cm4gdGhpcy5pbnB1dEZyZXF1ZW5jeURhdGE7XG4gIH07XG5cbiAgcHVibGljIGdldE91dHB1dEJ5dGVGcmVxdWVuY3lEYXRhID0gKCkgPT4ge1xuICAgIHRoaXMub3V0cHV0RnJlcXVlbmN5RGF0YSA/Pz0gbmV3IFVpbnQ4QXJyYXkoXG4gICAgICB0aGlzLm91dHB1dC5hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudFxuICAgICk7XG4gICAgdGhpcy5vdXRwdXQuYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEodGhpcy5vdXRwdXRGcmVxdWVuY3lEYXRhKTtcbiAgICByZXR1cm4gdGhpcy5vdXRwdXRGcmVxdWVuY3lEYXRhO1xuICB9O1xuXG4gIHB1YmxpYyBnZXRJbnB1dFZvbHVtZSA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVWb2x1bWUodGhpcy5nZXRJbnB1dEJ5dGVGcmVxdWVuY3lEYXRhKCkpO1xuICB9O1xuXG4gIHB1YmxpYyBnZXRPdXRwdXRWb2x1bWUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlVm9sdW1lKHRoaXMuZ2V0T3V0cHV0Qnl0ZUZyZXF1ZW5jeURhdGEoKSk7XG4gIH07XG5cbiAgcHVibGljIHNlbmRGZWVkYmFjayA9IChsaWtlOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKCF0aGlzLmNhblNlbmRGZWVkYmFjaykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICB0aGlzLmxhc3RGZWVkYmFja0V2ZW50SWQgPT09IDBcbiAgICAgICAgICA/IFwiQ2Fubm90IHNlbmQgZmVlZGJhY2s6IHRoZSBjb252ZXJzYXRpb24gaGFzIG5vdCBzdGFydGVkIHlldC5cIlxuICAgICAgICAgIDogXCJDYW5ub3Qgc2VuZCBmZWVkYmFjazogZmVlZGJhY2sgaGFzIGFscmVhZHkgYmVlbiBzZW50IGZvciB0aGUgY3VycmVudCByZXNwb25zZS5cIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZE1lc3NhZ2Uoe1xuICAgICAgdHlwZTogXCJmZWVkYmFja1wiLFxuICAgICAgc2NvcmU6IGxpa2UgPyBcImxpa2VcIiA6IFwiZGlzbGlrZVwiLFxuICAgICAgZXZlbnRfaWQ6IHRoaXMuY3VycmVudEV2ZW50SWQsXG4gICAgfSk7XG4gICAgdGhpcy5sYXN0RmVlZGJhY2tFdmVudElkID0gdGhpcy5jdXJyZW50RXZlbnRJZDtcbiAgICB0aGlzLnVwZGF0ZUNhblNlbmRGZWVkYmFjaygpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9zdE92ZXJhbGxGZWVkYmFjayhcbiAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcbiAgbGlrZTogYm9vbGVhbixcbiAgb3JpZ2luOiBzdHJpbmcgPSBIVFRQU19BUElfT1JJR0lOXG4pIHtcbiAgcmV0dXJuIGZldGNoKGAke29yaWdpbn0vdjEvY29udmFpL2NvbnZlcnNhdGlvbnMvJHtjb252ZXJzYXRpb25JZH0vZmVlZGJhY2tgLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBmZWVkYmFjazogbGlrZSA/IFwibGlrZVwiIDogXCJkaXNsaWtlXCIsXG4gICAgfSksXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfSxcbiAgfSk7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7OztBQ0FNLFNBQVVBLEVBQW9CQyxJQUFBQTtBQUNsQyxRQUFNQyxLQUFTLElBQUlDLFdBQVdGLEVBQUFBO0FBRzlCLFNBRG1CRyxPQUFPQyxLQUFLQyxPQUFPQyxhQUFBQSxHQUFnQkwsRUFBQUEsQ0FBQUE7QUFFeEQ7QUFBQSxTQUVnQk0sRUFBb0JDLElBQUFBO0FBQ2xDLFFBQU1DLEtBQWVOLE9BQU9PLEtBQUtGLEVBQUFBLEdBQzNCRyxLQUFNRixHQUFhRyxRQUNuQkMsS0FBUSxJQUFJWCxXQUFXUyxFQUFBQTtBQUM3QixXQUFTRyxLQUFJLEdBQUdBLEtBQUlILElBQUtHO0FBQ3ZCRCxJQUFBQSxHQUFNQyxFQUFBQSxJQUFLTCxHQUFhTSxXQUFXRCxFQUFBQTtBQUVyQyxTQUFPRCxHQUFNWjtBQUNmO0FDVkEsSUFBTWUsSUFBTyxJQUFJQyxLQUNmLENBRUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBQUEsR0E2R0YsRUFBRUMsTUFBTSx5QkFBQSxDQUFBO0FBaEhWLElBbUhhQyxJQUFvQkMsSUFBSUMsZ0JBQWdCTCxDQUFBQTtBQUFBQSxTQ3hIckNNLElBQUFBO0FBQ2QsU0FDRSxDQUNFLGtCQUNBLG9CQUNBLGtCQUNBLFFBQ0EsVUFDQSxNQUFBLEVBQ0FDLFNBQVNDLFVBQVVDLFFBQUFBLEtBRXBCRCxVQUFVRSxVQUFVSCxTQUFTLEtBQUEsS0FBVSxnQkFBZ0JJO0FBRTVEO0FBQUEsSUNGYUMsSURFYixNQ0ZhQTtFQUNKLGFBQUEsT0FBYUMs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ImIiLCAiYnVmZmVyIiwgIlVpbnQ4QXJyYXkiLCAid2luZG93IiwgImJ0b2EiLCAiU3RyaW5nIiwgImZyb21DaGFyQ29kZSIsICJiYXNlNjRUb0FycmF5QnVmZmVyIiwgImJhc2U2NCIsICJiaW5hcnlTdHJpbmciLCAiYXRvYiIsICJsZW4iLCAibGVuZ3RoIiwgImJ5dGVzIiwgImkiLCAiY2hhckNvZGVBdCIsICJibG9iIiwgIkJsb2IiLCAidHlwZSIsICJyYXdBdWRpb1Byb2Nlc3NvciIsICJVUkwiLCAiY3JlYXRlT2JqZWN0VVJMIiwgImlzSW9zRGV2aWNlIiwgImluY2x1ZGVzIiwgIm5hdmlnYXRvciIsICJwbGF0Zm9ybSIsICJ1c2VyQWdlbnQiLCAiZG9jdW1lbnQiLCAiSW5wdXQiLCAiY3JlYXRlIiwgInNhbXBsZVJhdGUiLCAiZm9ybWF0IiwgInByZWZlckhlYWRwaG9uZXNGb3JJb3NEZXZpY2VzIiwgImNvbnRleHQiLCAiaW5wdXRTdHJlYW0iLCAib3B0aW9ucyIsICJpZGVhbCIsICJlY2hvQ2FuY2VsbGF0aW9uIiwgIm5vaXNlU3VwcHJlc3Npb24iLCAiaWRlYWxEZXZpY2UiLCAibWVkaWFEZXZpY2VzIiwgImVudW1lcmF0ZURldmljZXMiLCAiZmluZCIsICJkIiwgImtpbmQiLCAia2V5d29yZCIsICJsYWJlbCIsICJ0b0xvd2VyQ2FzZSIsICJkZXZpY2VJZCIsICJzdXBwb3J0c1NhbXBsZVJhdGVDb25zdHJhaW50IiwgImdldFN1cHBvcnRlZENvbnN0cmFpbnRzIiwgIkF1ZGlvQ29udGV4dCIsICJhbmFseXNlciIsICJjcmVhdGVBbmFseXNlciIsICJhdWRpb1dvcmtsZXQiLCAiYWRkTW9kdWxlIiwgImdldFVzZXJNZWRpYSIsICJhdWRpbyIsICJzb3VyY2UiLCAiY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UiLCAid29ya2xldCIsICJBdWRpb1dvcmtsZXROb2RlIiwgInBvcnQiLCAicG9zdE1lc3NhZ2UiLCAiY29ubmVjdCIsICJyZXN1bWUiLCAiZXJyb3IiLCAiX2lucHV0U3RyZWFtIiwgIl9jb250ZXh0IiwgImdldFRyYWNrcyIsICJmb3JFYWNoIiwgInRyYWNrIiwgInN0b3AiLCAiY2xvc2UiLCAiY29uc3RydWN0b3IiLCAidGhpcyIsICJhdWRpb0NvbmNhdFByb2Nlc3NvciIsICJPdXRwdXQiLCAiZ2FpbiIsICJjcmVhdGVHYWluIiwgImRlc3RpbmF0aW9uIiwgImlzVmFsaWRTb2NrZXRFdmVudCIsICJldmVudCIsICJDb25uZWN0aW9uIiwgImNvbmZpZyIsICJzb2NrZXQiLCAiX2NvbmZpZyRvcmlnaW4iLCAib3JpZ2luIiwgInVybCIsICJzaWduZWRVcmwiLCAiYWdlbnRJZCIsICJwcm90b2NvbHMiLCAiYXV0aG9yaXphdGlvbiIsICJwdXNoIiwgIldlYlNvY2tldCIsICJjb252ZXJzYXRpb25Db25maWciLCAiUHJvbWlzZSIsICJyZXNvbHZlIiwgInJlamVjdCIsICJhZGRFdmVudExpc3RlbmVyIiwgIl9zb2NrZXQiLCAib3ZlcnJpZGVzRXZlbnQiLCAiX2NvbmZpZyRvdmVycmlkZXMkYWdlIiwgIl9jb25maWckb3ZlcnJpZGVzJGFnZTIiLCAiX2NvbmZpZyRvdmVycmlkZXMkYWdlMyIsICJfY29uZmlnJG92ZXJyaWRlcyR0dHMiLCAib3ZlcnJpZGVzIiwgImNvbnZlcnNhdGlvbl9jb25maWdfb3ZlcnJpZGUiLCAiYWdlbnQiLCAicHJvbXB0IiwgImZpcnN0X21lc3NhZ2UiLCAiZmlyc3RNZXNzYWdlIiwgImxhbmd1YWdlIiwgInR0cyIsICJ2b2ljZV9pZCIsICJ2b2ljZUlkIiwgImN1c3RvbUxsbUV4dHJhQm9keSIsICJjdXN0b21fbGxtX2V4dHJhX2JvZHkiLCAiZHluYW1pY1ZhcmlhYmxlcyIsICJkeW5hbWljX3ZhcmlhYmxlcyIsICJzZW5kIiwgIkpTT04iLCAic3RyaW5naWZ5IiwgIm9uY2UiLCAic2V0VGltZW91dCIsICJtZXNzYWdlIiwgInBhcnNlIiwgImRhdGEiLCAiY29udmVyc2F0aW9uX2luaXRpYXRpb25fbWV0YWRhdGFfZXZlbnQiLCAiY29uc29sZSIsICJ3YXJuIiwgImNvbnZlcnNhdGlvbl9pZCIsICJhZ2VudF9vdXRwdXRfYXVkaW9fZm9ybWF0IiwgInVzZXJfaW5wdXRfYXVkaW9fZm9ybWF0IiwgImlucHV0Rm9ybWF0IiwgInBhcnNlRm9ybWF0IiwgIm91dHB1dEZvcm1hdCIsICJfc29ja2V0MiIsICJjb252ZXJzYXRpb25JZCIsICJxdWV1ZSIsICJkaXNjb25uZWN0aW9uRGV0YWlscyIsICJvbkRpc2Nvbm5lY3RDYWxsYmFjayIsICJvbk1lc3NhZ2VDYWxsYmFjayIsICJkaXNjb25uZWN0IiwgInJlYXNvbiIsICJjb2RlIiwgInBhcnNlZEV2ZW50IiwgIl8iLCAic2VuZE1lc3NhZ2UiLCAib25NZXNzYWdlIiwgImNhbGxiYWNrIiwgIm9uRGlzY29ubmVjdCIsICJkZXRhaWxzIiwgIl90aGlzJG9uRGlzY29ubmVjdENhbCIsICJjYWxsIiwgImZvcm1hdFBhcnQiLCAic2FtcGxlUmF0ZVBhcnQiLCAic3BsaXQiLCAiRXJyb3IiLCAicGFyc2VJbnQiLCAiaXNOYU4iLCAiZGVmYXVsdENsaWVudFRvb2xzIiwgImNsaWVudFRvb2xzIiwgImRlZmF1bHRDYWxsYmFja3MiLCAib25Db25uZWN0IiwgIm9uRGVidWciLCAib25FcnJvciIsICJvbk1vZGVDaGFuZ2UiLCAib25TdGF0dXNDaGFuZ2UiLCAib25DYW5TZW5kRmVlZGJhY2tDaGFuZ2UiLCAiQ29udmVyc2F0aW9uIiwgImZ1bGxPcHRpb25zIiwgIl9leHRlbmRzIiwgInN0YXR1cyIsICJjYW5TZW5kRmVlZGJhY2siLCAiaW5wdXQiLCAiY29ubmVjdGlvbiIsICJvdXRwdXQiLCAicHJlbGltaW5hcnlJbnB1dFN0cmVhbSIsICJfb3B0aW9ucyRjb25uZWN0aW9uRGUiLCAiX3ByZWxpbWluYXJ5SW5wdXRTdHJlIiwgImRlbGF5Q29uZmlnIiwgImNvbm5lY3Rpb25EZWxheSIsICJkZWZhdWx0IiwgImFuZHJvaWQiLCAiZGVsYXkiLCAiX2RlbGF5Q29uZmlnJGFuZHJvaWQiLCAidGVzdCIsICJfZGVsYXlDb25maWckaW9zIiwgImlvcyIsICJhbGwiLCAiX3ByZWxpbWluYXJ5SW5wdXRTdHJlMiIsICJfY29ubmVjdGlvbiIsICJfaW5wdXQiLCAiX291dHB1dCIsICJfdGhpcyIsICJsYXN0SW50ZXJydXB0VGltZXN0YW1wIiwgIm1vZGUiLCAiaW5wdXRGcmVxdWVuY3lEYXRhIiwgIm91dHB1dEZyZXF1ZW5jeURhdGEiLCAidm9sdW1lIiwgImN1cnJlbnRFdmVudElkIiwgImxhc3RGZWVkYmFja0V2ZW50SWQiLCAiZW5kU2Vzc2lvbiIsICJlbmRTZXNzaW9uV2l0aERldGFpbHMiLCAiYXN5bmMiLCAidXBkYXRlU3RhdHVzIiwgInVwZGF0ZU1vZGUiLCAidXBkYXRlQ2FuU2VuZEZlZWRiYWNrIiwgImludGVycnVwdGlvbl9ldmVudCIsICJldmVudF9pZCIsICJmYWRlT3V0QXVkaW8iLCAiYWdlbnRfcmVzcG9uc2VfZXZlbnQiLCAiYWdlbnRfcmVzcG9uc2UiLCAidXNlcl90cmFuc2NyaXB0aW9uX2V2ZW50IiwgInVzZXJfdHJhbnNjcmlwdCIsICJyZXNwb25zZSIsICJ0ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2VfaW50ZXJuYWxfZXZlbnQiLCAidGVudGF0aXZlX2FnZW50X3Jlc3BvbnNlIiwgImhhc093blByb3BlcnR5IiwgImNsaWVudF90b29sX2NhbGwiLCAidG9vbF9uYW1lIiwgIl9hd2FpdCRfdGhpcyRvcHRpb25zJCIsICJyZXN1bHQiLCAicGFyYW1ldGVycyIsICJ0b29sX2NhbGxfaWQiLCAiaXNfZXJyb3IiLCAiZSIsICJjbGllbnRUb29sTmFtZSIsICJvblVuaGFuZGxlZENsaWVudFRvb2xDYWxsIiwgImF1ZGlvX2V2ZW50IiwgImFkZEF1ZGlvQmFzZTY0Q2h1bmsiLCAiYXVkaW9fYmFzZV82NCIsICJwaW5nX2V2ZW50IiwgIm9uSW5wdXRXb3JrbGV0TWVzc2FnZSIsICJ1c2VyX2F1ZGlvX2NodW5rIiwgIm9uT3V0cHV0V29ya2xldE1lc3NhZ2UiLCAiZmluaXNoZWQiLCAiY2h1bmsiLCAidmFsdWUiLCAiZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSIsICJjdXJyZW50VGltZSIsICJjYWxjdWxhdGVWb2x1bWUiLCAiZnJlcXVlbmN5RGF0YSIsICJnZXRJZCIsICJpc09wZW4iLCAic2V0Vm9sdW1lIiwgImdldElucHV0Qnl0ZUZyZXF1ZW5jeURhdGEiLCAiX3RoaXMkaW5wdXRGcmVxdWVuY3lEIiwgImZyZXF1ZW5jeUJpbkNvdW50IiwgImdldEJ5dGVGcmVxdWVuY3lEYXRhIiwgImdldE91dHB1dEJ5dGVGcmVxdWVuY3lEYXRhIiwgImdldElucHV0Vm9sdW1lIiwgImdldE91dHB1dFZvbHVtZSIsICJzZW5kRmVlZGJhY2siLCAibGlrZSIsICJzY29yZSIsICJvbm1lc3NhZ2UiLCAiZiJdCn0K
