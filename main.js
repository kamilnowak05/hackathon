/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ElevenLabsConversationalAIPlugin,
  getNotePath: () => getNotePath,
  readNote: () => readNote
});
module.exports = __toCommonJS(main_exports);

// node_modules/@11labs/client/dist/lib.modern.js
function e() {
  return e = Object.assign ? Object.assign.bind() : function(e2) {
    for (var t2 = 1; t2 < arguments.length; t2++) {
      var n2 = arguments[t2];
      for (var a2 in n2)
        ({}).hasOwnProperty.call(n2, a2) && (e2[a2] = n2[a2]);
    }
    return e2;
  }, e.apply(null, arguments);
}
function t(e2) {
  const t2 = new Uint8Array(e2);
  return window.btoa(String.fromCharCode(...t2));
}
function n(e2) {
  const t2 = window.atob(e2), n2 = t2.length, a2 = new Uint8Array(n2);
  for (let e3 = 0; e3 < n2; e3++)
    a2[e3] = t2.charCodeAt(e3);
  return a2.buffer;
}
var a = new Blob([`
      const BIAS = 0x84;
      const CLIP = 32635;
      const encodeTable = [
        0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
        4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
        5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
        6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
        7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
      ];
      
      function encodeSample(sample) {
        let sign;
        let exponent;
        let mantissa;
        let muLawSample;
        sign = (sample >> 8) & 0x80;
        if (sign !== 0) sample = -sample;
        sample = sample + BIAS;
        if (sample > CLIP) sample = CLIP;
        exponent = encodeTable[(sample>>7) & 0xFF];
        mantissa = (sample >> (exponent+3)) & 0x0F;
        muLawSample = ~(sign | (exponent << 4) | mantissa);
        
        return muLawSample;
      }
    
      class RawAudioProcessor extends AudioWorkletProcessor {
        constructor() {
          super();
                    
          this.port.onmessage = ({ data }) => {
            this.buffer = []; // Initialize an empty buffer
            this.bufferSize = data.sampleRate / 4;
            
            if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {
              globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {
                this.resampler = resampler;
              });
            } 
          };
        }
        process(inputs) {
          if (!this.buffer) {
            return true;
          }
          
          const input = inputs[0]; // Get the first input node
          if (input.length > 0) {
            let channelData = input[0]; // Get the first channel's data

            // Resample the audio if necessary
            if (this.resampler) {
              channelData = this.resampler.full(channelData);
            }

            // Add channel data to the buffer
            this.buffer.push(...channelData);
            // Get max volume 
            let sum = 0.0;
            for (let i = 0; i < channelData.length; i++) {
              sum += channelData[i] * channelData[i];
            }
            const maxVolume = Math.sqrt(sum / channelData.length);
            // Check if buffer size has reached or exceeded the threshold
            if (this.buffer.length >= this.bufferSize) {
              const float32Array = new Float32Array(this.buffer)
              let encodedArray = this.format === "ulaw"
                ? new Uint8Array(float32Array.length)
                : new Int16Array(float32Array.length);

              // Iterate through the Float32Array and convert each sample to PCM16
              for (let i = 0; i < float32Array.length; i++) {
                // Clamp the value to the range [-1, 1]
                let sample = Math.max(-1, Math.min(1, float32Array[i]));

                // Scale the sample to the range [-32768, 32767]
                let value = sample < 0 ? sample * 32768 : sample * 32767;
                if (this.format === "ulaw") {
                  value = encodeSample(Math.round(value));
                }

                encodedArray[i] = value;
              }

              // Send the buffered data to the main script
              this.port.postMessage([encodedArray, maxVolume]);

              // Clear the buffer after sending
              this.buffer = [];
            }
          }
          return true; // Continue processing
        }
      }
      registerProcessor("raw-audio-processor", RawAudioProcessor);
  `], { type: "application/javascript" });
var s = URL.createObjectURL(a);
function o() {
  return ["iPad Simulator", "iPhone Simulator", "iPod Simulator", "iPad", "iPhone", "iPod"].includes(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend" in document;
}
var i = class {
  static async create({ sampleRate: e2, format: t2, preferHeadphonesForIosDevices: n2 }) {
    let a2 = null, r2 = null;
    try {
      const l3 = { sampleRate: { ideal: e2 }, echoCancellation: { ideal: true }, noiseSuppression: { ideal: true } };
      if (o() && n2) {
        const e3 = (await window.navigator.mediaDevices.enumerateDevices()).find((e4) => "audioinput" === e4.kind && ["airpod", "headphone", "earphone"].find((t3) => e4.label.toLowerCase().includes(t3)));
        e3 && (l3.deviceId = { ideal: e3.deviceId });
      }
      const c3 = navigator.mediaDevices.getSupportedConstraints().sampleRate;
      a2 = new window.AudioContext(c3 ? { sampleRate: e2 } : {});
      const u2 = a2.createAnalyser();
      c3 || await a2.audioWorklet.addModule("https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js"), await a2.audioWorklet.addModule(s), r2 = await navigator.mediaDevices.getUserMedia({ audio: l3 });
      const d2 = a2.createMediaStreamSource(r2), h2 = new AudioWorkletNode(a2, "raw-audio-processor");
      return h2.port.postMessage({ type: "setFormat", format: t2, sampleRate: e2 }), d2.connect(u2), u2.connect(h2), await a2.resume(), new i(a2, u2, h2, r2);
    } catch (e3) {
      var l2, c2;
      throw null == (l2 = r2) || l2.getTracks().forEach((e4) => e4.stop()), null == (c2 = a2) || c2.close(), e3;
    }
  }
  constructor(e2, t2, n2, a2) {
    this.context = void 0, this.analyser = void 0, this.worklet = void 0, this.inputStream = void 0, this.context = e2, this.analyser = t2, this.worklet = n2, this.inputStream = a2;
  }
  async close() {
    this.inputStream.getTracks().forEach((e2) => e2.stop()), await this.context.close();
  }
};
var r = new Blob(['\n      const decodeTable = [0,132,396,924,1980,4092,8316,16764];\n      \n      export function decodeSample(muLawSample) {\n        let sign;\n        let exponent;\n        let mantissa;\n        let sample;\n        muLawSample = ~muLawSample;\n        sign = (muLawSample & 0x80);\n        exponent = (muLawSample >> 4) & 0x07;\n        mantissa = muLawSample & 0x0F;\n        sample = decodeTable[exponent] + (mantissa << (exponent+3));\n        if (sign !== 0) sample = -sample;\n\n        return sample;\n      }\n      \n      class AudioConcatProcessor extends AudioWorkletProcessor {\n        constructor() {\n          super();\n          this.buffers = []; // Initialize an empty buffer\n          this.cursor = 0;\n          this.currentBuffer = null;\n          this.wasInterrupted = false;\n          this.finished = false;\n          \n          this.port.onmessage = ({ data }) => {\n            switch (data.type) {\n              case "setFormat":\n                this.format = data.format;\n                break;\n              case "buffer":\n                this.wasInterrupted = false;\n                this.buffers.push(\n                  this.format === "ulaw"\n                    ? new Uint8Array(data.buffer)\n                    : new Int16Array(data.buffer)\n                );\n                break;\n              case "interrupt":\n                this.wasInterrupted = true;\n                break;\n              case "clearInterrupted":\n                if (this.wasInterrupted) {\n                  this.wasInterrupted = false;\n                  this.buffers = [];\n                  this.currentBuffer = null;\n                }\n            }\n          };\n        }\n        process(_, outputs) {\n          let finished = false;\n          const output = outputs[0][0];\n          for (let i = 0; i < output.length; i++) {\n            if (!this.currentBuffer) {\n              if (this.buffers.length === 0) {\n                finished = true;\n                break;\n              }\n              this.currentBuffer = this.buffers.shift();\n              this.cursor = 0;\n            }\n\n            let value = this.currentBuffer[this.cursor];\n            if (this.format === "ulaw") {\n              value = decodeSample(value);\n            }\n            output[i] = value / 32768;\n            this.cursor++;\n\n            if (this.cursor >= this.currentBuffer.length) {\n              this.currentBuffer = null;\n            }\n          }\n\n          if (this.finished !== finished) {\n            this.finished = finished;\n            this.port.postMessage({ type: "process", finished });\n          }\n\n          return true; // Continue processing\n        }\n      }\n\n      registerProcessor("audio-concat-processor", AudioConcatProcessor);\n    '], { type: "application/javascript" });
var l = URL.createObjectURL(r);
var c = class {
  static async create({ sampleRate: e2, format: t2 }) {
    let n2 = null;
    try {
      n2 = new AudioContext({ sampleRate: e2 });
      const a3 = n2.createAnalyser(), s2 = n2.createGain();
      s2.connect(a3), a3.connect(n2.destination), await n2.audioWorklet.addModule(l);
      const o2 = new AudioWorkletNode(n2, "audio-concat-processor");
      return o2.port.postMessage({ type: "setFormat", format: t2 }), o2.connect(s2), await n2.resume(), new c(n2, a3, s2, o2);
    } catch (e3) {
      var a2;
      throw null == (a2 = n2) || a2.close(), e3;
    }
  }
  constructor(e2, t2, n2, a2) {
    this.context = void 0, this.analyser = void 0, this.gain = void 0, this.worklet = void 0, this.context = e2, this.analyser = t2, this.gain = n2, this.worklet = a2;
  }
  async close() {
    await this.context.close();
  }
};
function u(e2) {
  return !!e2.type;
}
var d = class {
  static async create(e2) {
    let t2 = null;
    try {
      var n2;
      const a3 = null != (n2 = e2.origin) ? n2 : "wss://api.elevenlabs.io", s2 = e2.signedUrl ? e2.signedUrl : a3 + "/v1/convai/conversation?agent_id=" + e2.agentId, o2 = ["convai"];
      e2.authorization && o2.push(`bearer.${e2.authorization}`), t2 = new WebSocket(s2, o2);
      const i2 = await new Promise((n3, a4) => {
        t2.addEventListener("open", () => {
          var n4;
          const a5 = { type: "conversation_initiation_client_data" };
          var s3, o3, i3, r3;
          e2.overrides && (a5.conversation_config_override = { agent: { prompt: null == (s3 = e2.overrides.agent) ? void 0 : s3.prompt, first_message: null == (o3 = e2.overrides.agent) ? void 0 : o3.firstMessage, language: null == (i3 = e2.overrides.agent) ? void 0 : i3.language }, tts: { voice_id: null == (r3 = e2.overrides.tts) ? void 0 : r3.voiceId } }), e2.customLlmExtraBody && (a5.custom_llm_extra_body = e2.customLlmExtraBody), e2.dynamicVariables && (a5.dynamic_variables = e2.dynamicVariables), null == (n4 = t2) || n4.send(JSON.stringify(a5));
        }, { once: true }), t2.addEventListener("error", (e3) => {
          setTimeout(() => a4(e3), 0);
        }), t2.addEventListener("close", a4), t2.addEventListener("message", (e3) => {
          const t3 = JSON.parse(e3.data);
          u(t3) && ("conversation_initiation_metadata" === t3.type ? n3(t3.conversation_initiation_metadata_event) : console.warn("First received message is not conversation metadata."));
        }, { once: true });
      }), { conversation_id: r2, agent_output_audio_format: l2, user_input_audio_format: c2 } = i2, p2 = h(null != c2 ? c2 : "pcm_16000"), m2 = h(l2);
      return new d(t2, r2, p2, m2);
    } catch (e3) {
      var a2;
      throw null == (a2 = t2) || a2.close(), e3;
    }
  }
  constructor(e2, t2, n2, a2) {
    this.socket = void 0, this.conversationId = void 0, this.inputFormat = void 0, this.outputFormat = void 0, this.queue = [], this.disconnectionDetails = null, this.onDisconnectCallback = null, this.onMessageCallback = null, this.socket = e2, this.conversationId = t2, this.inputFormat = n2, this.outputFormat = a2, this.socket.addEventListener("error", (e3) => {
      setTimeout(() => this.disconnect({ reason: "error", message: "The connection was closed due to a socket error.", context: e3 }), 0);
    }), this.socket.addEventListener("close", (e3) => {
      this.disconnect(1e3 === e3.code ? { reason: "agent", context: e3 } : { reason: "error", message: e3.reason || "The connection was closed by the server.", context: e3 });
    }), this.socket.addEventListener("message", (e3) => {
      try {
        const t3 = JSON.parse(e3.data);
        if (!u(t3))
          return;
        this.onMessageCallback ? this.onMessageCallback(t3) : this.queue.push(t3);
      } catch (e4) {
      }
    });
  }
  close() {
    this.socket.close();
  }
  sendMessage(e2) {
    this.socket.send(JSON.stringify(e2));
  }
  onMessage(e2) {
    this.onMessageCallback = e2, this.queue.forEach(e2), this.queue = [];
  }
  onDisconnect(e2) {
    this.onDisconnectCallback = e2, this.disconnectionDetails && e2(this.disconnectionDetails);
  }
  disconnect(e2) {
    var t2;
    this.disconnectionDetails || (this.disconnectionDetails = e2, null == (t2 = this.onDisconnectCallback) || t2.call(this, e2));
  }
};
function h(e2) {
  const [t2, n2] = e2.split("_");
  if (!["pcm", "ulaw"].includes(t2))
    throw new Error(`Invalid format: ${e2}`);
  const a2 = parseInt(n2);
  if (isNaN(a2))
    throw new Error(`Invalid sample rate: ${n2}`);
  return { format: t2, sampleRate: a2 };
}
var p = { clientTools: {} };
var m = { onConnect: () => {
}, onDebug: () => {
}, onDisconnect: () => {
}, onError: () => {
}, onMessage: () => {
}, onModeChange: () => {
}, onStatusChange: () => {
}, onCanSendFeedbackChange: () => {
} };
var f = class {
  static async startSession(t2) {
    const n2 = e({}, p, m, t2);
    n2.onStatusChange({ status: "connecting" }), n2.onCanSendFeedbackChange({ canSendFeedback: false });
    let a2 = null, s2 = null, r2 = null, l2 = null;
    try {
      var u2, h2;
      l2 = await navigator.mediaDevices.getUserMedia({ audio: true });
      const p2 = null != (u2 = t2.connectionDelay) ? u2 : { default: 0, android: 3e3 };
      let m2 = p2.default;
      var g;
      if (/android/i.test(navigator.userAgent))
        m2 = null != (g = p2.android) ? g : m2;
      else if (o()) {
        var v;
        m2 = null != (v = p2.ios) ? v : m2;
      }
      return m2 > 0 && await new Promise((e2) => setTimeout(e2, m2)), s2 = await d.create(t2), [a2, r2] = await Promise.all([i.create(e({}, s2.inputFormat, { preferHeadphonesForIosDevices: t2.preferHeadphonesForIosDevices })), c.create(s2.outputFormat)]), null == (h2 = l2) || h2.getTracks().forEach((e2) => e2.stop()), l2 = null, new f(n2, s2, a2, r2);
    } catch (e2) {
      var _, y, w, b;
      throw n2.onStatusChange({ status: "disconnected" }), null == (_ = l2) || _.getTracks().forEach((e3) => e3.stop()), null == (y = s2) || y.close(), await (null == (w = a2) ? void 0 : w.close()), await (null == (b = r2) ? void 0 : b.close()), e2;
    }
  }
  constructor(e2, a2, s2, o2) {
    var i2 = this;
    this.options = void 0, this.connection = void 0, this.input = void 0, this.output = void 0, this.lastInterruptTimestamp = 0, this.mode = "listening", this.status = "connecting", this.inputFrequencyData = void 0, this.outputFrequencyData = void 0, this.volume = 1, this.currentEventId = 1, this.lastFeedbackEventId = 1, this.canSendFeedback = false, this.endSession = () => this.endSessionWithDetails({ reason: "user" }), this.endSessionWithDetails = async function(e3) {
      "connected" !== i2.status && "connecting" !== i2.status || (i2.updateStatus("disconnecting"), i2.connection.close(), await i2.input.close(), await i2.output.close(), i2.updateStatus("disconnected"), i2.options.onDisconnect(e3));
    }, this.updateMode = (e3) => {
      e3 !== this.mode && (this.mode = e3, this.options.onModeChange({ mode: e3 }));
    }, this.updateStatus = (e3) => {
      e3 !== this.status && (this.status = e3, this.options.onStatusChange({ status: e3 }));
    }, this.updateCanSendFeedback = () => {
      const e3 = this.currentEventId !== this.lastFeedbackEventId;
      this.canSendFeedback !== e3 && (this.canSendFeedback = e3, this.options.onCanSendFeedbackChange({ canSendFeedback: e3 }));
    }, this.onMessage = async function(e3) {
      switch (e3.type) {
        case "interruption":
          e3.interruption_event && (i2.lastInterruptTimestamp = e3.interruption_event.event_id), i2.fadeOutAudio();
          break;
        case "agent_response":
          i2.options.onMessage({ source: "ai", message: e3.agent_response_event.agent_response });
          break;
        case "user_transcript":
          i2.options.onMessage({ source: "user", message: e3.user_transcription_event.user_transcript });
          break;
        case "internal_tentative_agent_response":
          i2.options.onDebug({ type: "tentative_agent_response", response: e3.tentative_agent_response_internal_event.tentative_agent_response });
          break;
        case "client_tool_call":
          if (i2.options.clientTools.hasOwnProperty(e3.client_tool_call.tool_name)) {
            try {
              var t2;
              const n2 = null != (t2 = await i2.options.clientTools[e3.client_tool_call.tool_name](e3.client_tool_call.parameters)) ? t2 : "Client tool execution successful.";
              i2.connection.sendMessage({ type: "client_tool_result", tool_call_id: e3.client_tool_call.tool_call_id, result: n2, is_error: false });
            } catch (t3) {
              i2.onError("Client tool execution failed with following error: " + (null == t3 ? void 0 : t3.message), { clientToolName: e3.client_tool_call.tool_name }), i2.connection.sendMessage({ type: "client_tool_result", tool_call_id: e3.client_tool_call.tool_call_id, result: "Client tool execution failed: " + (null == t3 ? void 0 : t3.message), is_error: true });
            }
            break;
          }
          if (i2.options.onUnhandledClientToolCall) {
            i2.options.onUnhandledClientToolCall(e3.client_tool_call);
            break;
          }
          i2.onError(`Client tool with name ${e3.client_tool_call.tool_name} is not defined on client`, { clientToolName: e3.client_tool_call.tool_name }), i2.connection.sendMessage({ type: "client_tool_result", tool_call_id: e3.client_tool_call.tool_call_id, result: `Client tool with name ${e3.client_tool_call.tool_name} is not defined on client`, is_error: true });
          break;
        case "audio":
          i2.lastInterruptTimestamp <= e3.audio_event.event_id && (i2.addAudioBase64Chunk(e3.audio_event.audio_base_64), i2.currentEventId = e3.audio_event.event_id, i2.updateCanSendFeedback(), i2.updateMode("speaking"));
          break;
        case "ping":
          i2.connection.sendMessage({ type: "pong", event_id: e3.ping_event.event_id });
          break;
        default:
          i2.options.onDebug(e3);
      }
    }, this.onInputWorkletMessage = (e3) => {
      "connected" === this.status && this.connection.sendMessage({ user_audio_chunk: t(e3.data[0].buffer) });
    }, this.onOutputWorkletMessage = ({ data: e3 }) => {
      "process" === e3.type && this.updateMode(e3.finished ? "listening" : "speaking");
    }, this.addAudioBase64Chunk = (e3) => {
      this.output.gain.gain.value = this.volume, this.output.worklet.port.postMessage({ type: "clearInterrupted" }), this.output.worklet.port.postMessage({ type: "buffer", buffer: n(e3) });
    }, this.fadeOutAudio = () => {
      this.updateMode("listening"), this.output.worklet.port.postMessage({ type: "interrupt" }), this.output.gain.gain.exponentialRampToValueAtTime(1e-4, this.output.context.currentTime + 2), setTimeout(() => {
        this.output.gain.gain.value = this.volume, this.output.worklet.port.postMessage({ type: "clearInterrupted" });
      }, 2e3);
    }, this.onError = (e3, t2) => {
      console.error(e3, t2), this.options.onError(e3, t2);
    }, this.calculateVolume = (e3) => {
      if (0 === e3.length)
        return 0;
      let t2 = 0;
      for (let n2 = 0; n2 < e3.length; n2++)
        t2 += e3[n2] / 255;
      return t2 /= e3.length, t2 < 0 ? 0 : t2 > 1 ? 1 : t2;
    }, this.getId = () => this.connection.conversationId, this.isOpen = () => "connected" === this.status, this.setVolume = ({ volume: e3 }) => {
      this.volume = e3;
    }, this.getInputByteFrequencyData = () => (null != this.inputFrequencyData || (this.inputFrequencyData = new Uint8Array(this.input.analyser.frequencyBinCount)), this.input.analyser.getByteFrequencyData(this.inputFrequencyData), this.inputFrequencyData), this.getOutputByteFrequencyData = () => (null != this.outputFrequencyData || (this.outputFrequencyData = new Uint8Array(this.output.analyser.frequencyBinCount)), this.output.analyser.getByteFrequencyData(this.outputFrequencyData), this.outputFrequencyData), this.getInputVolume = () => this.calculateVolume(this.getInputByteFrequencyData()), this.getOutputVolume = () => this.calculateVolume(this.getOutputByteFrequencyData()), this.sendFeedback = (e3) => {
      this.canSendFeedback ? (this.connection.sendMessage({ type: "feedback", score: e3 ? "like" : "dislike", event_id: this.currentEventId }), this.lastFeedbackEventId = this.currentEventId, this.updateCanSendFeedback()) : console.warn(0 === this.lastFeedbackEventId ? "Cannot send feedback: the conversation has not started yet." : "Cannot send feedback: feedback has already been sent for the current response.");
    }, this.options = e2, this.connection = a2, this.input = s2, this.output = o2, this.options.onConnect({ conversationId: a2.conversationId }), this.connection.onDisconnect(this.endSessionWithDetails), this.connection.onMessage(this.onMessage), this.input.worklet.port.onmessage = this.onInputWorkletMessage, this.output.worklet.port.onmessage = this.onOutputWorkletMessage, this.updateStatus("connected");
  }
};

// main.ts
var import_obsidian = require("obsidian");
function getNotePath(app, title) {
  const fileName = title.replace(/[/\\?%*:|"<>]/g, "-").trim() + ".md";
  const files = app.vault.getFiles();
  const file = files.find((f2) => f2.name === fileName);
  return file ? file.path : null;
}
async function readNote(app, title) {
  const path = getNotePath(app, title);
  if (!path)
    return null;
  const file = app.vault.getAbstractFileByPath(path);
  if (file instanceof import_obsidian.TFile) {
    return await app.vault.read(file);
  }
  return null;
}
var DEFAULT_SETTINGS = {
  agentId: ""
};
var ElevenLabsConversationalAIPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const ribbonIconEl = this.addRibbonIcon(
      "microphone",
      "ElevenLabsConversationalAI Plugin",
      (evt) => {
        new ElevenLabsConversationalAIModal(this.app, this.settings).open();
      }
    );
    ribbonIconEl.addClass("my-plugin-ribbon-class");
    this.addCommand({
      id: "open-voice-ai-agent",
      name: "Open ElevenLabs Conversational AI",
      callback: () => {
        new ElevenLabsConversationalAIModal(this.app, this.settings).open();
      }
    });
    this.addSettingTab(new ElevenLabsConversationalAISettingTab(this.app, this));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var ElevenLabsConversationalAIModal = class extends import_obsidian.Modal {
  constructor(app, settings) {
    super(app);
    this.settings = settings;
    this.conversation = null;
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h1", {
      text: "ElevenLabs Conversational AI",
      attr: { style: "text-align: center;" }
    });
    const buttonContainer = contentEl.createDiv({
      attr: { style: "margin-bottom: 20px; text-align: center;" }
    });
    const startButton = buttonContainer.createEl("button", {
      text: "Start Conversation",
      attr: { style: "padding: 10px 20px; margin: 5px;" }
    });
    const stopButton = buttonContainer.createEl("button", {
      text: "Stop Conversation",
      attr: { style: "padding: 10px 20px; margin: 5px;", disabled: true }
    });
    const statusContainer = contentEl.createDiv({
      attr: { style: "font-size: 18px; text-align: center;" }
    });
    statusContainer.createEl("p", { text: "Status: " }).createEl("span", {
      text: "Disconnected",
      attr: { id: "connectionStatus" }
    });
    statusContainer.createEl("p", { text: "Agent is " }).createEl("span", {
      text: "listening",
      attr: { id: "agentStatus" }
    });
    const connectionStatus = contentEl.querySelector("#connectionStatus");
    const agentStatus = contentEl.querySelector("#agentStatus");
    const startConversation = async () => {
      try {
        await navigator.mediaDevices.getUserMedia({ audio: true });
        this.conversation = await f.startSession({
          agentId: this.settings.agentId,
          clientTools: {
            saveNote: async ({ title, message }) => {
              console.log(message);
              await this.app.vault.create(`${title}.md`, message);
            },
            getNote: async ({ noteName }) => {
              console.log(noteName);
              const content = await readNote(this.app, noteName);
              if (content) {
                console.log(content);
                return content;
              }
              return "Note not found";
            },
            getListOfNotes: async () => {
              const files = this.app.vault.getFiles();
              const notes = files.map((f2) => f2.name.replace(".md", "")).join(", ");
              console.log(notes);
              return notes;
            }
          },
          onConnect: () => {
            if (connectionStatus) {
              connectionStatus.textContent = "Connected";
            }
            startButton.disabled = true;
            stopButton.disabled = false;
          },
          onDisconnect: () => {
            if (connectionStatus) {
              connectionStatus.textContent = "Disconnected";
            }
            startButton.disabled = false;
            stopButton.disabled = true;
          },
          onError: (error) => {
            console.error("Error:", error);
          },
          onModeChange: (mode) => {
            if (agentStatus) {
              agentStatus.textContent = mode.mode === "speaking" ? "speaking" : "listening";
            }
          }
        });
      } catch (error) {
        console.error("Failed to start conversation:", error);
      }
    };
    const stopConversation = async () => {
      if (this.conversation) {
        await this.conversation.endSession();
        this.conversation = null;
      }
    };
    startButton.addEventListener("click", startConversation);
    stopButton.addEventListener("click", stopConversation);
  }
  async onClose() {
    const { contentEl } = this;
    if (this.conversation) {
      await this.conversation.endSession();
    }
    contentEl.empty();
  }
};
var ElevenLabsConversationalAISettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("ElevenLabs Agent Id").setDesc("ElevenLabs Agent Id").addText(
      (text) => text.setPlaceholder("Enter your Agent Id").setValue(this.plugin.settings.agentId).onChange(async (value) => {
        this.plugin.settings.agentId = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJub2RlX21vZHVsZXMvQDExbGFicy9jbGllbnQvc3JjL3V0aWxzL2F1ZGlvLnRzIiwgIm5vZGVfbW9kdWxlcy9AMTFsYWJzL2NsaWVudC9zcmMvdXRpbHMvcmF3QXVkaW9Qcm9jZXNzb3IudHMiLCAibm9kZV9tb2R1bGVzL0AxMWxhYnMvY2xpZW50L3NyYy91dGlscy9jb21wYXRpYmlsaXR5LnRzIiwgIm5vZGVfbW9kdWxlcy9AMTFsYWJzL2NsaWVudC9zcmMvdXRpbHMvaW5wdXQudHMiLCAibm9kZV9tb2R1bGVzL0AxMWxhYnMvY2xpZW50L3NyYy91dGlscy9hdWRpb0NvbmNhdFByb2Nlc3Nvci50cyIsICJub2RlX21vZHVsZXMvQDExbGFicy9jbGllbnQvc3JjL3V0aWxzL291dHB1dC50cyIsICJub2RlX21vZHVsZXMvQDExbGFicy9jbGllbnQvc3JjL3V0aWxzL2V2ZW50cy50cyIsICJub2RlX21vZHVsZXMvQDExbGFicy9jbGllbnQvc3JjL3V0aWxzL2Nvbm5lY3Rpb24udHMiLCAibm9kZV9tb2R1bGVzL0AxMWxhYnMvY2xpZW50L3NyYy9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQ29udmVyc2F0aW9uIH0gZnJvbSBcIkAxMWxhYnMvY2xpZW50XCI7XG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbi8qKlxuICogR2V0cyB0aGUgcGF0aCBvZiBhbiBleGlzdGluZyBub3RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXROb3RlUGF0aChhcHA6IEFwcCwgdGl0bGU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuXHRjb25zdCBmaWxlTmFtZSA9IHRpdGxlLnJlcGxhY2UoL1svXFxcXD8lKjp8XCI8Pl0vZywgXCItXCIpLnRyaW0oKSArIFwiLm1kXCI7XG5cdGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKCk7XG5cdGNvbnN0IGZpbGUgPSBmaWxlcy5maW5kKChmKSA9PiBmLm5hbWUgPT09IGZpbGVOYW1lKTtcblx0cmV0dXJuIGZpbGUgPyBmaWxlLnBhdGggOiBudWxsO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBjb250ZW50IG9mIGEgbm90ZVxuICogQHBhcmFtIGFwcCAtIE9ic2lkaWFuIEFwcCBpbnN0YW5jZVxuICogQHBhcmFtIHRpdGxlIC0gTm90ZSB0aXRsZVxuICogQHJldHVybnMgUHJvbWlzZTxzdHJpbmcgfCBudWxsPiAtIE5vdGUgY29udGVudCBvciBudWxsIGlmIG5vdCBmb3VuZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZE5vdGUoXG5cdGFwcDogQXBwLFxuXHR0aXRsZTogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcblx0Y29uc3QgcGF0aCA9IGdldE5vdGVQYXRoKGFwcCwgdGl0bGUpO1xuXHRpZiAoIXBhdGgpIHJldHVybiBudWxsO1xuXG5cdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuXHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0cmV0dXJuIGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufVxuXG5pbnRlcmZhY2UgRWxldmVuTGFic0NvbnZlcnNhdGlvbmFsQUlTZXR0aW5ncyB7XG5cdGFnZW50SWQ6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRWxldmVuTGFic0NvbnZlcnNhdGlvbmFsQUlTZXR0aW5ncyA9IHtcblx0YWdlbnRJZDogXCJcIixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVsZXZlbkxhYnNDb252ZXJzYXRpb25hbEFJUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IEVsZXZlbkxhYnNDb252ZXJzYXRpb25hbEFJU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBUaGlzIGNyZWF0ZXMgYW4gaWNvbiBpbiB0aGUgbGVmdCByaWJib24uXG5cdFx0Y29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKFxuXHRcdFx0XCJtaWNyb3Bob25lXCIsXG5cdFx0XHRcIkVsZXZlbkxhYnNDb252ZXJzYXRpb25hbEFJIFBsdWdpblwiLFxuXHRcdFx0KGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0XHQvLyBDYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIGljb24uXG5cdFx0XHRcdG5ldyBFbGV2ZW5MYWJzQ29udmVyc2F0aW9uYWxBSU1vZGFsKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0KTtcblx0XHQvLyBQZXJmb3JtIGFkZGl0aW9uYWwgdGhpbmdzIHdpdGggdGhlIHJpYmJvblxuXHRcdHJpYmJvbkljb25FbC5hZGRDbGFzcyhcIm15LXBsdWdpbi1yaWJib24tY2xhc3NcIik7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzaW1wbGUgY29tbWFuZCB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYW55d2hlcmVcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi12b2ljZS1haS1hZ2VudFwiLFxuXHRcdFx0bmFtZTogXCJPcGVuIEVsZXZlbkxhYnMgQ29udmVyc2F0aW9uYWwgQUlcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBFbGV2ZW5MYWJzQ29udmVyc2F0aW9uYWxBSU1vZGFsKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKS5vcGVuKCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEVsZXZlbkxhYnNDb252ZXJzYXRpb25hbEFJU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxuXHRcdCk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG5jbGFzcyBFbGV2ZW5MYWJzQ29udmVyc2F0aW9uYWxBSU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRwcml2YXRlIGNvbnZlcnNhdGlvbjogQ29udmVyc2F0aW9uIHwgbnVsbDtcblx0cHJpdmF0ZSBzZXR0aW5nczogRWxldmVuTGFic0NvbnZlcnNhdGlvbmFsQUlTZXR0aW5ncztcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3M6IEVsZXZlbkxhYnNDb252ZXJzYXRpb25hbEFJU2V0dGluZ3MpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcblx0XHR0aGlzLmNvbnZlcnNhdGlvbiA9IG51bGw7XG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cblx0XHQvLyBTZXQgdXAgdGhlIG1vZGFsIGNvbnRlbnRcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7XG5cdFx0XHR0ZXh0OiBcIkVsZXZlbkxhYnMgQ29udmVyc2F0aW9uYWwgQUlcIixcblx0XHRcdGF0dHI6IHsgc3R5bGU6IFwidGV4dC1hbGlnbjogY2VudGVyO1wiIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6IFwibWFyZ2luLWJvdHRvbTogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyO1wiIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBzdGFydEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlN0YXJ0IENvbnZlcnNhdGlvblwiLFxuXHRcdFx0YXR0cjogeyBzdHlsZTogXCJwYWRkaW5nOiAxMHB4IDIwcHg7IG1hcmdpbjogNXB4O1wiIH0sXG5cdFx0fSk7XG5cdFx0Y29uc3Qgc3RvcEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlN0b3AgQ29udmVyc2F0aW9uXCIsXG5cdFx0XHRhdHRyOiB7IHN0eWxlOiBcInBhZGRpbmc6IDEwcHggMjBweDsgbWFyZ2luOiA1cHg7XCIsIGRpc2FibGVkOiB0cnVlIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBzdGF0dXNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6IFwiZm9udC1zaXplOiAxOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7XCIgfSxcblx0XHR9KTtcblx0XHRzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJTdGF0dXM6IFwiIH0pLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkRpc2Nvbm5lY3RlZFwiLFxuXHRcdFx0YXR0cjogeyBpZDogXCJjb25uZWN0aW9uU3RhdHVzXCIgfSxcblx0XHR9KTtcblx0XHRzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJBZ2VudCBpcyBcIiB9KS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0dGV4dDogXCJsaXN0ZW5pbmdcIixcblx0XHRcdGF0dHI6IHsgaWQ6IFwiYWdlbnRTdGF0dXNcIiB9LFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgY29ubmVjdGlvblN0YXR1cyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiI2Nvbm5lY3Rpb25TdGF0dXNcIik7XG5cdFx0Y29uc3QgYWdlbnRTdGF0dXMgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcihcIiNhZ2VudFN0YXR1c1wiKTtcblxuXHRcdGNvbnN0IHN0YXJ0Q29udmVyc2F0aW9uID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8gUmVxdWVzdCBtaWNyb3Bob25lIHBlcm1pc3Npb25cblx0XHRcdFx0YXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyBhdWRpbzogdHJ1ZSB9KTtcblxuXHRcdFx0XHQvLyBTdGFydCB0aGUgY29udmVyc2F0aW9uXG5cdFx0XHRcdHRoaXMuY29udmVyc2F0aW9uID0gYXdhaXQgQ29udmVyc2F0aW9uLnN0YXJ0U2Vzc2lvbih7XG5cdFx0XHRcdFx0YWdlbnRJZDogdGhpcy5zZXR0aW5ncy5hZ2VudElkLFxuXHRcdFx0XHRcdGNsaWVudFRvb2xzOiB7XG5cdFx0XHRcdFx0XHRzYXZlTm90ZTogYXN5bmMgKHsgdGl0bGUsIG1lc3NhZ2UgfSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhtZXNzYWdlKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGAke3RpdGxlfS5tZGAsIG1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGdldE5vdGU6IGFzeW5jICh7IG5vdGVOYW1lIH0pID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2cobm90ZU5hbWUpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgcmVhZE5vdGUodGhpcy5hcHAsIG5vdGVOYW1lKTtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhjb250ZW50KTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gY29udGVudDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gXCJOb3RlIG5vdCBmb3VuZFwiO1xuXHRcdFx0XHRcdFx0fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldExpc3RPZk5vdGVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVzID0gZmlsZXMubWFwKGYgPT4gZi5uYW1lLnJlcGxhY2UoXCIubWRcIiwgXCJcIikpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhub3Rlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vdGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0b25Db25uZWN0OiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoY29ubmVjdGlvblN0YXR1cykge1xuXHRcdFx0XHRcdFx0XHRjb25uZWN0aW9uU3RhdHVzLnRleHRDb250ZW50ID0gXCJDb25uZWN0ZWRcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHN0YXJ0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdHN0b3BCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG9uRGlzY29ubmVjdDogKCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGNvbm5lY3Rpb25TdGF0dXMpIHtcblx0XHRcdFx0XHRcdFx0Y29ubmVjdGlvblN0YXR1cy50ZXh0Q29udGVudCA9IFwiRGlzY29ubmVjdGVkXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRzdGFydEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0c3RvcEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRvbkVycm9yOiAoZXJyb3IpID0+IHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0b25Nb2RlQ2hhbmdlOiAobW9kZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGFnZW50U3RhdHVzKSB7XG5cdFx0XHRcdFx0XHRcdGFnZW50U3RhdHVzLnRleHRDb250ZW50ID1cblx0XHRcdFx0XHRcdFx0XHRtb2RlLm1vZGUgPT09IFwic3BlYWtpbmdcIlxuXHRcdFx0XHRcdFx0XHRcdFx0PyBcInNwZWFraW5nXCJcblx0XHRcdFx0XHRcdFx0XHRcdDogXCJsaXN0ZW5pbmdcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc3RhcnQgY29udmVyc2F0aW9uOlwiLCBlcnJvcik7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IHN0b3BDb252ZXJzYXRpb24gPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5jb252ZXJzYXRpb24pIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5jb252ZXJzYXRpb24uZW5kU2Vzc2lvbigpO1xuXHRcdFx0XHR0aGlzLmNvbnZlcnNhdGlvbiA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzdGFydENvbnZlcnNhdGlvbik7XG5cdFx0c3RvcEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc3RvcENvbnZlcnNhdGlvbik7XG5cdH1cblxuXHRhc3luYyBvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGlmICh0aGlzLmNvbnZlcnNhdGlvbikge1xuXHRcdFx0YXdhaXQgdGhpcy5jb252ZXJzYXRpb24uZW5kU2Vzc2lvbigpO1xuXHRcdH1cblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBFbGV2ZW5MYWJzQ29udmVyc2F0aW9uYWxBSVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBFbGV2ZW5MYWJzQ29udmVyc2F0aW9uYWxBSVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbGV2ZW5MYWJzQ29udmVyc2F0aW9uYWxBSVBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiRWxldmVuTGFicyBBZ2VudCBJZFwiKVxuXHRcdFx0LnNldERlc2MoXCJFbGV2ZW5MYWJzIEFnZW50IElkXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIHlvdXIgQWdlbnQgSWRcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWdlbnRJZClcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZ2VudElkID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0fVxufSIsICJleHBvcnQgZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChiOiBBcnJheUJ1ZmZlckxpa2UpIHtcbiAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYik7XG4gIC8vIEB0cy1pZ25vcmVcbiAgY29uc3QgYmFzZTY0RGF0YSA9IHdpbmRvdy5idG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uYnVmZmVyKSk7XG4gIHJldHVybiBiYXNlNjREYXRhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQ6IHN0cmluZyk6IEFycmF5QnVmZmVyIHtcbiAgY29uc3QgYmluYXJ5U3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0KTtcbiAgY29uc3QgbGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgfVxuICByZXR1cm4gYnl0ZXMuYnVmZmVyO1xufVxuIiwgIi8qXG4gKiB1bGF3IGVuY29kaW5nIGxvZ2ljIHRha2VuIGZyb20gdGhlIHdhdmVmaWxlIGxpYnJhcnlcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2NoYXJzL3dhdmVmaWxlL2Jsb2IvbWFzdGVyL2xpYi9jb2RlY3MvbXVsYXcuanNcbiAqL1xuXG5jb25zdCBibG9iID0gbmV3IEJsb2IoXG4gIFtcbiAgICAvLyBsYW5ndWFnZT1KYXZhU2NyaXB0XG4gICAgYFxuICAgICAgY29uc3QgQklBUyA9IDB4ODQ7XG4gICAgICBjb25zdCBDTElQID0gMzI2MzU7XG4gICAgICBjb25zdCBlbmNvZGVUYWJsZSA9IFtcbiAgICAgICAgMCwwLDEsMSwyLDIsMiwyLDMsMywzLDMsMywzLDMsMyxcbiAgICAgICAgNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCxcbiAgICAgICAgNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSxcbiAgICAgICAgNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSxcbiAgICAgICAgNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNixcbiAgICAgICAgNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNixcbiAgICAgICAgNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNixcbiAgICAgICAgNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNixcbiAgICAgICAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcbiAgICAgICAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcbiAgICAgICAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcbiAgICAgICAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcbiAgICAgICAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcbiAgICAgICAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcbiAgICAgICAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcbiAgICAgICAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsN1xuICAgICAgXTtcbiAgICAgIFxuICAgICAgZnVuY3Rpb24gZW5jb2RlU2FtcGxlKHNhbXBsZSkge1xuICAgICAgICBsZXQgc2lnbjtcbiAgICAgICAgbGV0IGV4cG9uZW50O1xuICAgICAgICBsZXQgbWFudGlzc2E7XG4gICAgICAgIGxldCBtdUxhd1NhbXBsZTtcbiAgICAgICAgc2lnbiA9IChzYW1wbGUgPj4gOCkgJiAweDgwO1xuICAgICAgICBpZiAoc2lnbiAhPT0gMCkgc2FtcGxlID0gLXNhbXBsZTtcbiAgICAgICAgc2FtcGxlID0gc2FtcGxlICsgQklBUztcbiAgICAgICAgaWYgKHNhbXBsZSA+IENMSVApIHNhbXBsZSA9IENMSVA7XG4gICAgICAgIGV4cG9uZW50ID0gZW5jb2RlVGFibGVbKHNhbXBsZT4+NykgJiAweEZGXTtcbiAgICAgICAgbWFudGlzc2EgPSAoc2FtcGxlID4+IChleHBvbmVudCszKSkgJiAweDBGO1xuICAgICAgICBtdUxhd1NhbXBsZSA9IH4oc2lnbiB8IChleHBvbmVudCA8PCA0KSB8IG1hbnRpc3NhKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBtdUxhd1NhbXBsZTtcbiAgICAgIH1cbiAgICBcbiAgICAgIGNsYXNzIFJhd0F1ZGlvUHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgdGhpcy5wb3J0Lm9ubWVzc2FnZSA9ICh7IGRhdGEgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBbXTsgLy8gSW5pdGlhbGl6ZSBhbiBlbXB0eSBidWZmZXJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGRhdGEuc2FtcGxlUmF0ZSAvIDQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChnbG9iYWxUaGlzLkxpYlNhbXBsZVJhdGUgJiYgc2FtcGxlUmF0ZSAhPT0gZGF0YS5zYW1wbGVSYXRlKSB7XG4gICAgICAgICAgICAgIGdsb2JhbFRoaXMuTGliU2FtcGxlUmF0ZS5jcmVhdGUoMSwgc2FtcGxlUmF0ZSwgZGF0YS5zYW1wbGVSYXRlKS50aGVuKHJlc2FtcGxlciA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNhbXBsZXIgPSByZXNhbXBsZXI7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHByb2Nlc3MoaW5wdXRzKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdOyAvLyBHZXQgdGhlIGZpcnN0IGlucHV0IG5vZGVcbiAgICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IGNoYW5uZWxEYXRhID0gaW5wdXRbMF07IC8vIEdldCB0aGUgZmlyc3QgY2hhbm5lbCdzIGRhdGFcblxuICAgICAgICAgICAgLy8gUmVzYW1wbGUgdGhlIGF1ZGlvIGlmIG5lY2Vzc2FyeVxuICAgICAgICAgICAgaWYgKHRoaXMucmVzYW1wbGVyKSB7XG4gICAgICAgICAgICAgIGNoYW5uZWxEYXRhID0gdGhpcy5yZXNhbXBsZXIuZnVsbChjaGFubmVsRGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBjaGFubmVsIGRhdGEgdG8gdGhlIGJ1ZmZlclxuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCguLi5jaGFubmVsRGF0YSk7XG4gICAgICAgICAgICAvLyBHZXQgbWF4IHZvbHVtZSBcbiAgICAgICAgICAgIGxldCBzdW0gPSAwLjA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYW5uZWxEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIHN1bSArPSBjaGFubmVsRGF0YVtpXSAqIGNoYW5uZWxEYXRhW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWF4Vm9sdW1lID0gTWF0aC5zcXJ0KHN1bSAvIGNoYW5uZWxEYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBidWZmZXIgc2l6ZSBoYXMgcmVhY2hlZCBvciBleGNlZWRlZCB0aGUgdGhyZXNob2xkXG4gICAgICAgICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID49IHRoaXMuYnVmZmVyU2l6ZSkge1xuICAgICAgICAgICAgICBjb25zdCBmbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYnVmZmVyKVxuICAgICAgICAgICAgICBsZXQgZW5jb2RlZEFycmF5ID0gdGhpcy5mb3JtYXQgPT09IFwidWxhd1wiXG4gICAgICAgICAgICAgICAgPyBuZXcgVWludDhBcnJheShmbG9hdDMyQXJyYXkubGVuZ3RoKVxuICAgICAgICAgICAgICAgIDogbmV3IEludDE2QXJyYXkoZmxvYXQzMkFycmF5Lmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHRoZSBGbG9hdDMyQXJyYXkgYW5kIGNvbnZlcnQgZWFjaCBzYW1wbGUgdG8gUENNMTZcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbG9hdDMyQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAvLyBDbGFtcCB0aGUgdmFsdWUgdG8gdGhlIHJhbmdlIFstMSwgMV1cbiAgICAgICAgICAgICAgICBsZXQgc2FtcGxlID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsIGZsb2F0MzJBcnJheVtpXSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2NhbGUgdGhlIHNhbXBsZSB0byB0aGUgcmFuZ2UgWy0zMjc2OCwgMzI3NjddXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gc2FtcGxlIDwgMCA/IHNhbXBsZSAqIDMyNzY4IDogc2FtcGxlICogMzI3Njc7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybWF0ID09PSBcInVsYXdcIikge1xuICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlbmNvZGVTYW1wbGUoTWF0aC5yb3VuZCh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVuY29kZWRBcnJheVtpXSA9IHZhbHVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gU2VuZCB0aGUgYnVmZmVyZWQgZGF0YSB0byB0aGUgbWFpbiBzY3JpcHRcbiAgICAgICAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKFtlbmNvZGVkQXJyYXksIG1heFZvbHVtZV0pO1xuXG4gICAgICAgICAgICAgIC8vIENsZWFyIHRoZSBidWZmZXIgYWZ0ZXIgc2VuZGluZ1xuICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQ29udGludWUgcHJvY2Vzc2luZ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWdpc3RlclByb2Nlc3NvcihcInJhdy1hdWRpby1wcm9jZXNzb3JcIiwgUmF3QXVkaW9Qcm9jZXNzb3IpO1xuICBgLFxuICBdLFxuICB7IHR5cGU6IFwiYXBwbGljYXRpb24vamF2YXNjcmlwdFwiIH1cbik7XG5cbmV4cG9ydCBjb25zdCByYXdBdWRpb1Byb2Nlc3NvciA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGlzSW9zRGV2aWNlKCkge1xuICByZXR1cm4gKFxuICAgIFtcbiAgICAgIFwiaVBhZCBTaW11bGF0b3JcIixcbiAgICAgIFwiaVBob25lIFNpbXVsYXRvclwiLFxuICAgICAgXCJpUG9kIFNpbXVsYXRvclwiLFxuICAgICAgXCJpUGFkXCIsXG4gICAgICBcImlQaG9uZVwiLFxuICAgICAgXCJpUG9kXCIsXG4gICAgXS5pbmNsdWRlcyhuYXZpZ2F0b3IucGxhdGZvcm0pIHx8XG4gICAgLy8gaVBhZCBvbiBpT1MgMTMgZGV0ZWN0aW9uXG4gICAgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJNYWNcIikgJiYgXCJvbnRvdWNoZW5kXCIgaW4gZG9jdW1lbnQpXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0FuZHJvaWREZXZpY2UoKSB7XG4gIHJldHVybiAvYW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG59XG4iLCAiaW1wb3J0IHsgcmF3QXVkaW9Qcm9jZXNzb3IgfSBmcm9tIFwiLi9yYXdBdWRpb1Byb2Nlc3NvclwiO1xuaW1wb3J0IHsgRm9ybWF0Q29uZmlnIH0gZnJvbSBcIi4vY29ubmVjdGlvblwiO1xuaW1wb3J0IHsgaXNJb3NEZXZpY2UgfSBmcm9tIFwiLi9jb21wYXRpYmlsaXR5XCI7XG5cbmV4cG9ydCB0eXBlIElucHV0Q29uZmlnID0ge1xuICBwcmVmZXJIZWFkcGhvbmVzRm9ySW9zRGV2aWNlcz86IGJvb2xlYW47XG59O1xuXG5jb25zdCBMSUJTQU1QTEVSQVRFX0pTID1cbiAgXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0BhbGV4YW5kZXJvbHNlbi9saWJzYW1wbGVyYXRlLWpzQDIuMS4yL2Rpc3QvbGlic2FtcGxlcmF0ZS53b3JrbGV0LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBJbnB1dCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlKHtcbiAgICBzYW1wbGVSYXRlLFxuICAgIGZvcm1hdCxcbiAgICBwcmVmZXJIZWFkcGhvbmVzRm9ySW9zRGV2aWNlcyxcbiAgfTogRm9ybWF0Q29uZmlnICYgSW5wdXRDb25maWcpOiBQcm9taXNlPElucHV0PiB7XG4gICAgbGV0IGNvbnRleHQ6IEF1ZGlvQ29udGV4dCB8IG51bGwgPSBudWxsO1xuICAgIGxldCBpbnB1dFN0cmVhbTogTWVkaWFTdHJlYW0gfCBudWxsID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcHRpb25zOiBNZWRpYVRyYWNrQ29uc3RyYWludHMgPSB7XG4gICAgICAgIHNhbXBsZVJhdGU6IHsgaWRlYWw6IHNhbXBsZVJhdGUgfSxcbiAgICAgICAgZWNob0NhbmNlbGxhdGlvbjogeyBpZGVhbDogdHJ1ZSB9LFxuICAgICAgICBub2lzZVN1cHByZXNzaW9uOiB7IGlkZWFsOiB0cnVlIH0sXG4gICAgICB9O1xuXG4gICAgICBpZiAoaXNJb3NEZXZpY2UoKSAmJiBwcmVmZXJIZWFkcGhvbmVzRm9ySW9zRGV2aWNlcykge1xuICAgICAgICBjb25zdCBhdmFpbGFibGVEZXZpY2VzID1cbiAgICAgICAgICBhd2FpdCB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCk7XG4gICAgICAgIGNvbnN0IGlkZWFsRGV2aWNlID0gYXZhaWxhYmxlRGV2aWNlcy5maW5kKFxuICAgICAgICAgIGQgPT5cbiAgICAgICAgICAgIC8vIGNhdXRpb3VzIHRvIGluY2x1ZGUgXCJibHVldG9vdGhcIiBpbiB0aGUgc2VhcmNoXG4gICAgICAgICAgICAvLyBhcyBtaWdodCB0cmlnZ2VyIGJsdWV0b290aCBzcGVha2Vyc1xuICAgICAgICAgICAgZC5raW5kID09PSBcImF1ZGlvaW5wdXRcIiAmJlxuICAgICAgICAgICAgW1wiYWlycG9kXCIsIFwiaGVhZHBob25lXCIsIFwiZWFycGhvbmVcIl0uZmluZChrZXl3b3JkID0+XG4gICAgICAgICAgICAgIGQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBpZiAoaWRlYWxEZXZpY2UpIHtcbiAgICAgICAgICBvcHRpb25zLmRldmljZUlkID0geyBpZGVhbDogaWRlYWxEZXZpY2UuZGV2aWNlSWQgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzdXBwb3J0c1NhbXBsZVJhdGVDb25zdHJhaW50ID1cbiAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLnNhbXBsZVJhdGU7XG5cbiAgICAgIGNvbnRleHQgPSBuZXcgd2luZG93LkF1ZGlvQ29udGV4dChcbiAgICAgICAgc3VwcG9ydHNTYW1wbGVSYXRlQ29uc3RyYWludCA/IHsgc2FtcGxlUmF0ZSB9IDoge31cbiAgICAgICk7XG4gICAgICBjb25zdCBhbmFseXNlciA9IGNvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtcbiAgICAgIGlmICghc3VwcG9ydHNTYW1wbGVSYXRlQ29uc3RyYWludCkge1xuICAgICAgICBhd2FpdCBjb250ZXh0LmF1ZGlvV29ya2xldC5hZGRNb2R1bGUoTElCU0FNUExFUkFURV9KUyk7XG4gICAgICB9XG4gICAgICBhd2FpdCBjb250ZXh0LmF1ZGlvV29ya2xldC5hZGRNb2R1bGUocmF3QXVkaW9Qcm9jZXNzb3IpO1xuXG4gICAgICBpbnB1dFN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgICAgYXVkaW86IG9wdGlvbnMsXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc291cmNlID0gY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShpbnB1dFN0cmVhbSk7XG4gICAgICBjb25zdCB3b3JrbGV0ID0gbmV3IEF1ZGlvV29ya2xldE5vZGUoY29udGV4dCwgXCJyYXctYXVkaW8tcHJvY2Vzc29yXCIpO1xuICAgICAgd29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJzZXRGb3JtYXRcIiwgZm9ybWF0LCBzYW1wbGVSYXRlIH0pO1xuXG4gICAgICBzb3VyY2UuY29ubmVjdChhbmFseXNlcik7XG4gICAgICBhbmFseXNlci5jb25uZWN0KHdvcmtsZXQpO1xuXG4gICAgICBhd2FpdCBjb250ZXh0LnJlc3VtZSgpO1xuXG4gICAgICByZXR1cm4gbmV3IElucHV0KGNvbnRleHQsIGFuYWx5c2VyLCB3b3JrbGV0LCBpbnB1dFN0cmVhbSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlucHV0U3RyZWFtPy5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICBjb250ZXh0Py5jbG9zZSgpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgY29udGV4dDogQXVkaW9Db250ZXh0LFxuICAgIHB1YmxpYyByZWFkb25seSBhbmFseXNlcjogQW5hbHlzZXJOb2RlLFxuICAgIHB1YmxpYyByZWFkb25seSB3b3JrbGV0OiBBdWRpb1dvcmtsZXROb2RlLFxuICAgIHB1YmxpYyByZWFkb25seSBpbnB1dFN0cmVhbTogTWVkaWFTdHJlYW1cbiAgKSB7fVxuXG4gIHB1YmxpYyBhc3luYyBjbG9zZSgpIHtcbiAgICB0aGlzLmlucHV0U3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKTtcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuY2xvc2UoKTtcbiAgfVxufVxuIiwgIi8qXG4gKiB1bGF3IGRlY29kaW5nIGxvZ2ljIHRha2VuIGZyb20gdGhlIHdhdmVmaWxlIGxpYnJhcnlcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2NoYXJzL3dhdmVmaWxlL2Jsb2IvbWFzdGVyL2xpYi9jb2RlY3MvbXVsYXcuanNcbiAqL1xuXG5jb25zdCBibG9iID0gbmV3IEJsb2IoXG4gIFtcbiAgICAvLyBsYW5ndWFnZT1KYXZhU2NyaXB0XG4gICAgYFxuICAgICAgY29uc3QgZGVjb2RlVGFibGUgPSBbMCwxMzIsMzk2LDkyNCwxOTgwLDQwOTIsODMxNiwxNjc2NF07XG4gICAgICBcbiAgICAgIGV4cG9ydCBmdW5jdGlvbiBkZWNvZGVTYW1wbGUobXVMYXdTYW1wbGUpIHtcbiAgICAgICAgbGV0IHNpZ247XG4gICAgICAgIGxldCBleHBvbmVudDtcbiAgICAgICAgbGV0IG1hbnRpc3NhO1xuICAgICAgICBsZXQgc2FtcGxlO1xuICAgICAgICBtdUxhd1NhbXBsZSA9IH5tdUxhd1NhbXBsZTtcbiAgICAgICAgc2lnbiA9IChtdUxhd1NhbXBsZSAmIDB4ODApO1xuICAgICAgICBleHBvbmVudCA9IChtdUxhd1NhbXBsZSA+PiA0KSAmIDB4MDc7XG4gICAgICAgIG1hbnRpc3NhID0gbXVMYXdTYW1wbGUgJiAweDBGO1xuICAgICAgICBzYW1wbGUgPSBkZWNvZGVUYWJsZVtleHBvbmVudF0gKyAobWFudGlzc2EgPDwgKGV4cG9uZW50KzMpKTtcbiAgICAgICAgaWYgKHNpZ24gIT09IDApIHNhbXBsZSA9IC1zYW1wbGU7XG5cbiAgICAgICAgcmV0dXJuIHNhbXBsZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY2xhc3MgQXVkaW9Db25jYXRQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3Ige1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgIHRoaXMuYnVmZmVycyA9IFtdOyAvLyBJbml0aWFsaXplIGFuIGVtcHR5IGJ1ZmZlclxuICAgICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRCdWZmZXIgPSBudWxsO1xuICAgICAgICAgIHRoaXMud2FzSW50ZXJydXB0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5wb3J0Lm9ubWVzc2FnZSA9ICh7IGRhdGEgfSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInNldEZvcm1hdFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gZGF0YS5mb3JtYXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgXCJidWZmZXJcIjpcbiAgICAgICAgICAgICAgICB0aGlzLndhc0ludGVycnVwdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goXG4gICAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdCA9PT0gXCJ1bGF3XCJcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgVWludDhBcnJheShkYXRhLmJ1ZmZlcilcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgSW50MTZBcnJheShkYXRhLmJ1ZmZlcilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFwiaW50ZXJydXB0XCI6XG4gICAgICAgICAgICAgICAgdGhpcy53YXNJbnRlcnJ1cHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgXCJjbGVhckludGVycnVwdGVkXCI6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMud2FzSW50ZXJydXB0ZWQpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMud2FzSW50ZXJydXB0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50QnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBwcm9jZXNzKF8sIG91dHB1dHMpIHtcbiAgICAgICAgICBsZXQgZmluaXNoZWQgPSBmYWxzZTtcbiAgICAgICAgICBjb25zdCBvdXRwdXQgPSBvdXRwdXRzWzBdWzBdO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0cHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudEJ1ZmZlcikge1xuICAgICAgICAgICAgICBpZiAodGhpcy5idWZmZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRCdWZmZXIgPSB0aGlzLmJ1ZmZlcnMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmN1cnJlbnRCdWZmZXJbdGhpcy5jdXJzb3JdO1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybWF0ID09PSBcInVsYXdcIikge1xuICAgICAgICAgICAgICB2YWx1ZSA9IGRlY29kZVNhbXBsZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXRbaV0gPSB2YWx1ZSAvIDMyNzY4O1xuICAgICAgICAgICAgdGhpcy5jdXJzb3IrKztcblxuICAgICAgICAgICAgaWYgKHRoaXMuY3Vyc29yID49IHRoaXMuY3VycmVudEJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50QnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5maW5pc2hlZCAhPT0gZmluaXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSBmaW5pc2hlZDtcbiAgICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZSh7IHR5cGU6IFwicHJvY2Vzc1wiLCBmaW5pc2hlZCB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQ29udGludWUgcHJvY2Vzc2luZ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlZ2lzdGVyUHJvY2Vzc29yKFwiYXVkaW8tY29uY2F0LXByb2Nlc3NvclwiLCBBdWRpb0NvbmNhdFByb2Nlc3Nvcik7XG4gICAgYCxcbiAgXSxcbiAgeyB0eXBlOiBcImFwcGxpY2F0aW9uL2phdmFzY3JpcHRcIiB9XG4pO1xuXG5leHBvcnQgY29uc3QgYXVkaW9Db25jYXRQcm9jZXNzb3IgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuIiwgImltcG9ydCB7IGF1ZGlvQ29uY2F0UHJvY2Vzc29yIH0gZnJvbSBcIi4vYXVkaW9Db25jYXRQcm9jZXNzb3JcIjtcbmltcG9ydCB7IEZvcm1hdENvbmZpZyB9IGZyb20gXCIuL2Nvbm5lY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIE91dHB1dCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlKHtcbiAgICBzYW1wbGVSYXRlLFxuICAgIGZvcm1hdCxcbiAgfTogRm9ybWF0Q29uZmlnKTogUHJvbWlzZTxPdXRwdXQ+IHtcbiAgICBsZXQgY29udGV4dDogQXVkaW9Db250ZXh0IHwgbnVsbCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KHsgc2FtcGxlUmF0ZSB9KTtcbiAgICAgIGNvbnN0IGFuYWx5c2VyID0gY29udGV4dC5jcmVhdGVBbmFseXNlcigpO1xuICAgICAgY29uc3QgZ2FpbiA9IGNvbnRleHQuY3JlYXRlR2FpbigpO1xuICAgICAgZ2Fpbi5jb25uZWN0KGFuYWx5c2VyKTtcbiAgICAgIGFuYWx5c2VyLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICBhd2FpdCBjb250ZXh0LmF1ZGlvV29ya2xldC5hZGRNb2R1bGUoYXVkaW9Db25jYXRQcm9jZXNzb3IpO1xuICAgICAgY29uc3Qgd29ya2xldCA9IG5ldyBBdWRpb1dvcmtsZXROb2RlKGNvbnRleHQsIFwiYXVkaW8tY29uY2F0LXByb2Nlc3NvclwiKTtcbiAgICAgIHdvcmtsZXQucG9ydC5wb3N0TWVzc2FnZSh7IHR5cGU6IFwic2V0Rm9ybWF0XCIsIGZvcm1hdCB9KTtcbiAgICAgIHdvcmtsZXQuY29ubmVjdChnYWluKTtcblxuICAgICAgYXdhaXQgY29udGV4dC5yZXN1bWUoKTtcblxuICAgICAgcmV0dXJuIG5ldyBPdXRwdXQoY29udGV4dCwgYW5hbHlzZXIsIGdhaW4sIHdvcmtsZXQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb250ZXh0Py5jbG9zZSgpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgY29udGV4dDogQXVkaW9Db250ZXh0LFxuICAgIHB1YmxpYyByZWFkb25seSBhbmFseXNlcjogQW5hbHlzZXJOb2RlLFxuICAgIHB1YmxpYyByZWFkb25seSBnYWluOiBHYWluTm9kZSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgd29ya2xldDogQXVkaW9Xb3JrbGV0Tm9kZVxuICApIHt9XG5cbiAgcHVibGljIGFzeW5jIGNsb3NlKCkge1xuICAgIGF3YWl0IHRoaXMuY29udGV4dC5jbG9zZSgpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgTGFuZ3VhZ2UgfSBmcm9tIFwiLi9jb25uZWN0aW9uXCI7XG5cbmV4cG9ydCB0eXBlIFVzZXJUcmFuc2NyaXB0aW9uRXZlbnQgPSB7XG4gIHR5cGU6IFwidXNlcl90cmFuc2NyaXB0XCI7XG4gIHVzZXJfdHJhbnNjcmlwdGlvbl9ldmVudDogeyB1c2VyX3RyYW5zY3JpcHQ6IHN0cmluZyB9O1xufTtcbmV4cG9ydCB0eXBlIEFnZW50UmVzcG9uc2VFdmVudCA9IHtcbiAgdHlwZTogXCJhZ2VudF9yZXNwb25zZVwiO1xuICBhZ2VudF9yZXNwb25zZV9ldmVudDogeyBhZ2VudF9yZXNwb25zZTogc3RyaW5nIH07XG59O1xuZXhwb3J0IHR5cGUgQWdlbnRBdWRpb0V2ZW50ID0ge1xuICB0eXBlOiBcImF1ZGlvXCI7XG4gIGF1ZGlvX2V2ZW50OiB7XG4gICAgYXVkaW9fYmFzZV82NDogc3RyaW5nO1xuICAgIGV2ZW50X2lkOiBudW1iZXI7XG4gIH07XG59O1xuZXhwb3J0IHR5cGUgSW50ZXJydXB0aW9uRXZlbnQgPSB7XG4gIHR5cGU6IFwiaW50ZXJydXB0aW9uXCI7XG4gIGludGVycnVwdGlvbl9ldmVudDoge1xuICAgIGV2ZW50X2lkOiBudW1iZXI7XG4gIH07XG59O1xuZXhwb3J0IHR5cGUgSW50ZXJuYWxUZW50YXRpdmVBZ2VudFJlc3BvbnNlRXZlbnQgPSB7XG4gIHR5cGU6IFwiaW50ZXJuYWxfdGVudGF0aXZlX2FnZW50X3Jlc3BvbnNlXCI7XG4gIHRlbnRhdGl2ZV9hZ2VudF9yZXNwb25zZV9pbnRlcm5hbF9ldmVudDoge1xuICAgIHRlbnRhdGl2ZV9hZ2VudF9yZXNwb25zZTogc3RyaW5nO1xuICB9O1xufTtcbmV4cG9ydCB0eXBlIENvbmZpZ0V2ZW50ID0ge1xuICB0eXBlOiBcImNvbnZlcnNhdGlvbl9pbml0aWF0aW9uX21ldGFkYXRhXCI7XG4gIGNvbnZlcnNhdGlvbl9pbml0aWF0aW9uX21ldGFkYXRhX2V2ZW50OiB7XG4gICAgY29udmVyc2F0aW9uX2lkOiBzdHJpbmc7XG4gICAgYWdlbnRfb3V0cHV0X2F1ZGlvX2Zvcm1hdDogc3RyaW5nO1xuICAgIHVzZXJfaW5wdXRfYXVkaW9fZm9ybWF0Pzogc3RyaW5nO1xuICB9O1xufTtcbmV4cG9ydCB0eXBlIFBpbmdFdmVudCA9IHtcbiAgdHlwZTogXCJwaW5nXCI7XG4gIHBpbmdfZXZlbnQ6IHtcbiAgICBldmVudF9pZDogbnVtYmVyO1xuICAgIHBpbmdfbXM/OiBudW1iZXI7XG4gIH07XG59O1xuZXhwb3J0IHR5cGUgQ2xpZW50VG9vbENhbGxFdmVudCA9IHtcbiAgdHlwZTogXCJjbGllbnRfdG9vbF9jYWxsXCI7XG4gIGNsaWVudF90b29sX2NhbGw6IHtcbiAgICB0b29sX25hbWU6IHN0cmluZztcbiAgICB0b29sX2NhbGxfaWQ6IHN0cmluZztcbiAgICBwYXJhbWV0ZXJzOiBhbnk7XG4gICAgZXhwZWN0c19yZXNwb25zZTogYm9vbGVhbjtcbiAgfTtcbn07XG5cbi8vIFRPRE8gY29ycmVjdGlvbiBtaXNzaW5nXG5leHBvcnQgdHlwZSBJbmNvbWluZ1NvY2tldEV2ZW50ID1cbiAgfCBVc2VyVHJhbnNjcmlwdGlvbkV2ZW50XG4gIHwgQWdlbnRSZXNwb25zZUV2ZW50XG4gIHwgQWdlbnRBdWRpb0V2ZW50XG4gIHwgSW50ZXJydXB0aW9uRXZlbnRcbiAgfCBJbnRlcm5hbFRlbnRhdGl2ZUFnZW50UmVzcG9uc2VFdmVudFxuICB8IENvbmZpZ0V2ZW50XG4gIHwgUGluZ0V2ZW50XG4gIHwgQ2xpZW50VG9vbENhbGxFdmVudDtcblxuZXhwb3J0IHR5cGUgUG9uZ0V2ZW50ID0ge1xuICB0eXBlOiBcInBvbmdcIjtcbiAgZXZlbnRfaWQ6IG51bWJlcjtcbn07XG5leHBvcnQgdHlwZSBVc2VyQXVkaW9FdmVudCA9IHtcbiAgdXNlcl9hdWRpb19jaHVuazogc3RyaW5nO1xufTtcbmV4cG9ydCB0eXBlIFVzZXJGZWVkYmFja0V2ZW50ID0ge1xuICB0eXBlOiBcImZlZWRiYWNrXCI7XG4gIHNjb3JlOiBcImxpa2VcIiB8IFwiZGlzbGlrZVwiO1xuICBldmVudF9pZDogbnVtYmVyO1xufTtcbmV4cG9ydCB0eXBlIENsaWVudFRvb2xSZXN1bHRFdmVudCA9IHtcbiAgdHlwZTogXCJjbGllbnRfdG9vbF9yZXN1bHRcIjtcbiAgdG9vbF9jYWxsX2lkOiBzdHJpbmc7XG4gIHJlc3VsdDogYW55O1xuICBpc19lcnJvcjogYm9vbGVhbjtcbn07XG5leHBvcnQgdHlwZSBJbml0aWF0aW9uQ2xpZW50RGF0YUV2ZW50ID0ge1xuICB0eXBlOiBcImNvbnZlcnNhdGlvbl9pbml0aWF0aW9uX2NsaWVudF9kYXRhXCI7XG4gIGNvbnZlcnNhdGlvbl9jb25maWdfb3ZlcnJpZGU/OiB7XG4gICAgYWdlbnQ/OiB7XG4gICAgICBwcm9tcHQ/OiB7XG4gICAgICAgIHByb21wdD86IHN0cmluZztcbiAgICAgIH07XG4gICAgICBmaXJzdF9tZXNzYWdlPzogc3RyaW5nO1xuICAgICAgbGFuZ3VhZ2U/OiBMYW5ndWFnZTtcbiAgICB9O1xuICAgIHR0cz86IHtcbiAgICAgIHZvaWNlX2lkPzogc3RyaW5nO1xuICAgIH07XG4gIH07XG4gIGN1c3RvbV9sbG1fZXh0cmFfYm9keT86IGFueTtcbiAgZHluYW1pY192YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuPjtcbn07XG5leHBvcnQgdHlwZSBPdXRnb2luZ1NvY2tldEV2ZW50ID1cbiAgfCBQb25nRXZlbnRcbiAgfCBVc2VyQXVkaW9FdmVudFxuICB8IEluaXRpYXRpb25DbGllbnREYXRhRXZlbnRcbiAgfCBVc2VyRmVlZGJhY2tFdmVudFxuICB8IENsaWVudFRvb2xSZXN1bHRFdmVudDtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRTb2NrZXRFdmVudChldmVudDogYW55KTogZXZlbnQgaXMgSW5jb21pbmdTb2NrZXRFdmVudCB7XG4gIHJldHVybiAhIWV2ZW50LnR5cGU7XG59XG4iLCAiaW1wb3J0IHtcbiAgSW5pdGlhdGlvbkNsaWVudERhdGFFdmVudCxcbiAgQ29uZmlnRXZlbnQsXG4gIGlzVmFsaWRTb2NrZXRFdmVudCxcbiAgT3V0Z29pbmdTb2NrZXRFdmVudCxcbiAgSW5jb21pbmdTb2NrZXRFdmVudCxcbn0gZnJvbSBcIi4vZXZlbnRzXCI7XG5cbmNvbnN0IE1BSU5fUFJPVE9DT0wgPSBcImNvbnZhaVwiO1xuXG5leHBvcnQgdHlwZSBMYW5ndWFnZSA9XG4gIHwgXCJlblwiXG4gIHwgXCJqYVwiXG4gIHwgXCJ6aFwiXG4gIHwgXCJkZVwiXG4gIHwgXCJoaVwiXG4gIHwgXCJmclwiXG4gIHwgXCJrb1wiXG4gIHwgXCJwdFwiXG4gIHwgXCJpdFwiXG4gIHwgXCJlc1wiXG4gIHwgXCJpZFwiXG4gIHwgXCJubFwiXG4gIHwgXCJ0clwiXG4gIHwgXCJwbFwiXG4gIHwgXCJzdlwiXG4gIHwgXCJiZ1wiXG4gIHwgXCJyb1wiXG4gIHwgXCJhclwiXG4gIHwgXCJjc1wiXG4gIHwgXCJlbFwiXG4gIHwgXCJmaVwiXG4gIHwgXCJtc1wiXG4gIHwgXCJkYVwiXG4gIHwgXCJ0YVwiXG4gIHwgXCJ1a1wiXG4gIHwgXCJydVwiXG4gIHwgXCJodVwiXG4gIHwgXCJub1wiXG4gIHwgXCJ2aVwiO1xuZXhwb3J0IHR5cGUgU2Vzc2lvbkNvbmZpZyA9IHtcbiAgb3JpZ2luPzogc3RyaW5nO1xuICBhdXRob3JpemF0aW9uPzogc3RyaW5nO1xuICBvdmVycmlkZXM/OiB7XG4gICAgYWdlbnQ/OiB7XG4gICAgICBwcm9tcHQ/OiB7XG4gICAgICAgIHByb21wdD86IHN0cmluZztcbiAgICAgIH07XG4gICAgICBmaXJzdE1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgICBsYW5ndWFnZT86IExhbmd1YWdlO1xuICAgIH07XG4gICAgdHRzPzoge1xuICAgICAgdm9pY2VJZD86IHN0cmluZztcbiAgICB9O1xuICB9O1xuICBjdXN0b21MbG1FeHRyYUJvZHk/OiBhbnk7XG4gIGR5bmFtaWNWYXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuPjtcbiAgY29ubmVjdGlvbkRlbGF5Pzoge1xuICAgIGRlZmF1bHQ6IG51bWJlcjtcbiAgICBhbmRyb2lkPzogbnVtYmVyO1xuICAgIGlvcz86IG51bWJlcjtcbiAgfTtcbn0gJiAoXG4gIHwgeyBzaWduZWRVcmw6IHN0cmluZzsgYWdlbnRJZD86IHVuZGVmaW5lZCB9XG4gIHwgeyBhZ2VudElkOiBzdHJpbmc7IHNpZ25lZFVybD86IHVuZGVmaW5lZCB9XG4pO1xuZXhwb3J0IHR5cGUgRm9ybWF0Q29uZmlnID0ge1xuICBmb3JtYXQ6IFwicGNtXCIgfCBcInVsYXdcIjtcbiAgc2FtcGxlUmF0ZTogbnVtYmVyO1xufTtcbmV4cG9ydCB0eXBlIERpc2Nvbm5lY3Rpb25EZXRhaWxzID1cbiAgfCB7XG4gICAgICByZWFzb246IFwiZXJyb3JcIjtcbiAgICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICAgIGNvbnRleHQ6IEV2ZW50O1xuICAgIH1cbiAgfCB7XG4gICAgICByZWFzb246IFwiYWdlbnRcIjtcbiAgICAgIGNvbnRleHQ6IENsb3NlRXZlbnQ7XG4gICAgfVxuICB8IHtcbiAgICAgIHJlYXNvbjogXCJ1c2VyXCI7XG4gICAgfTtcbmV4cG9ydCB0eXBlIE9uRGlzY29ubmVjdENhbGxiYWNrID0gKGRldGFpbHM6IERpc2Nvbm5lY3Rpb25EZXRhaWxzKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgT25NZXNzYWdlQ2FsbGJhY2sgPSAoZXZlbnQ6IEluY29taW5nU29ja2V0RXZlbnQpID0+IHZvaWQ7XG5cbmNvbnN0IFdTU19BUElfT1JJR0lOID0gXCJ3c3M6Ly9hcGkuZWxldmVubGFicy5pb1wiO1xuY29uc3QgV1NTX0FQSV9QQVRITkFNRSA9IFwiL3YxL2NvbnZhaS9jb252ZXJzYXRpb24/YWdlbnRfaWQ9XCI7XG5cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjcmVhdGUoY29uZmlnOiBTZXNzaW9uQ29uZmlnKTogUHJvbWlzZTxDb25uZWN0aW9uPiB7XG4gICAgbGV0IHNvY2tldDogV2ViU29ja2V0IHwgbnVsbCA9IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3JpZ2luID0gY29uZmlnLm9yaWdpbiA/PyBXU1NfQVBJX09SSUdJTjtcbiAgICAgIGNvbnN0IHVybCA9IGNvbmZpZy5zaWduZWRVcmxcbiAgICAgICAgPyBjb25maWcuc2lnbmVkVXJsXG4gICAgICAgIDogb3JpZ2luICsgV1NTX0FQSV9QQVRITkFNRSArIGNvbmZpZy5hZ2VudElkO1xuXG4gICAgICBjb25zdCBwcm90b2NvbHMgPSBbTUFJTl9QUk9UT0NPTF07XG4gICAgICBpZiAoY29uZmlnLmF1dGhvcml6YXRpb24pIHtcbiAgICAgICAgcHJvdG9jb2xzLnB1c2goYGJlYXJlci4ke2NvbmZpZy5hdXRob3JpemF0aW9ufWApO1xuICAgICAgfVxuICAgICAgc29ja2V0ID0gbmV3IFdlYlNvY2tldCh1cmwsIHByb3RvY29scyk7XG4gICAgICBjb25zdCBjb252ZXJzYXRpb25Db25maWcgPSBhd2FpdCBuZXcgUHJvbWlzZTxcbiAgICAgICAgQ29uZmlnRXZlbnRbXCJjb252ZXJzYXRpb25faW5pdGlhdGlvbl9tZXRhZGF0YV9ldmVudFwiXVxuICAgICAgPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHNvY2tldCEuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBcIm9wZW5cIixcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvdmVycmlkZXNFdmVudDogSW5pdGlhdGlvbkNsaWVudERhdGFFdmVudCA9IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjb252ZXJzYXRpb25faW5pdGlhdGlvbl9jbGllbnRfZGF0YVwiLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGNvbmZpZy5vdmVycmlkZXMpIHtcbiAgICAgICAgICAgICAgb3ZlcnJpZGVzRXZlbnQuY29udmVyc2F0aW9uX2NvbmZpZ19vdmVycmlkZSA9IHtcbiAgICAgICAgICAgICAgICBhZ2VudDoge1xuICAgICAgICAgICAgICAgICAgcHJvbXB0OiBjb25maWcub3ZlcnJpZGVzLmFnZW50Py5wcm9tcHQsXG4gICAgICAgICAgICAgICAgICBmaXJzdF9tZXNzYWdlOiBjb25maWcub3ZlcnJpZGVzLmFnZW50Py5maXJzdE1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICBsYW5ndWFnZTogY29uZmlnLm92ZXJyaWRlcy5hZ2VudD8ubGFuZ3VhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0dHM6IHtcbiAgICAgICAgICAgICAgICAgIHZvaWNlX2lkOiBjb25maWcub3ZlcnJpZGVzLnR0cz8udm9pY2VJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY29uZmlnLmN1c3RvbUxsbUV4dHJhQm9keSkge1xuICAgICAgICAgICAgICBvdmVycmlkZXNFdmVudC5jdXN0b21fbGxtX2V4dHJhX2JvZHkgPSBjb25maWcuY3VzdG9tTGxtRXh0cmFCb2R5O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY29uZmlnLmR5bmFtaWNWYXJpYWJsZXMpIHtcbiAgICAgICAgICAgICAgb3ZlcnJpZGVzRXZlbnQuZHluYW1pY192YXJpYWJsZXMgPSBjb25maWcuZHluYW1pY1ZhcmlhYmxlcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc29ja2V0Py5zZW5kKEpTT04uc3RyaW5naWZ5KG92ZXJyaWRlc0V2ZW50KSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgICApO1xuICAgICAgICBzb2NrZXQhLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBldmVudCA9PiB7XG4gICAgICAgICAgLy8gSW4gY2FzZSB0aGUgZXJyb3IgZXZlbnQgaXMgZm9sbG93ZWQgYnkgYSBjbG9zZSBldmVudCwgd2Ugd2FudCB0aGVcbiAgICAgICAgICAvLyBsYXR0ZXIgdG8gYmUgdGhlIG9uZSB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UgYXMgaXQgY29udGFpbnMgbW9yZVxuICAgICAgICAgIC8vIHVzZWZ1bCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChldmVudCksIDApO1xuICAgICAgICB9KTtcbiAgICAgICAgc29ja2V0IS5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgcmVqZWN0KTtcbiAgICAgICAgc29ja2V0IS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIFwibWVzc2FnZVwiLFxuICAgICAgICAgIChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcblxuICAgICAgICAgICAgaWYgKCFpc1ZhbGlkU29ja2V0RXZlbnQobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcImNvbnZlcnNhdGlvbl9pbml0aWF0aW9uX21ldGFkYXRhXCIpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlLmNvbnZlcnNhdGlvbl9pbml0aWF0aW9uX21ldGFkYXRhX2V2ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICBcIkZpcnN0IHJlY2VpdmVkIG1lc3NhZ2UgaXMgbm90IGNvbnZlcnNhdGlvbiBtZXRhZGF0YS5cIlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7XG4gICAgICAgIGNvbnZlcnNhdGlvbl9pZCxcbiAgICAgICAgYWdlbnRfb3V0cHV0X2F1ZGlvX2Zvcm1hdCxcbiAgICAgICAgdXNlcl9pbnB1dF9hdWRpb19mb3JtYXQsXG4gICAgICB9ID0gY29udmVyc2F0aW9uQ29uZmlnO1xuXG4gICAgICBjb25zdCBpbnB1dEZvcm1hdCA9IHBhcnNlRm9ybWF0KHVzZXJfaW5wdXRfYXVkaW9fZm9ybWF0ID8/IFwicGNtXzE2MDAwXCIpO1xuICAgICAgY29uc3Qgb3V0cHV0Rm9ybWF0ID0gcGFyc2VGb3JtYXQoYWdlbnRfb3V0cHV0X2F1ZGlvX2Zvcm1hdCk7XG5cbiAgICAgIHJldHVybiBuZXcgQ29ubmVjdGlvbihzb2NrZXQsIGNvbnZlcnNhdGlvbl9pZCwgaW5wdXRGb3JtYXQsIG91dHB1dEZvcm1hdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHNvY2tldD8uY2xvc2UoKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcXVldWU6IEluY29taW5nU29ja2V0RXZlbnRbXSA9IFtdO1xuICBwcml2YXRlIGRpc2Nvbm5lY3Rpb25EZXRhaWxzOiBEaXNjb25uZWN0aW9uRGV0YWlscyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9uRGlzY29ubmVjdENhbGxiYWNrOiBPbkRpc2Nvbm5lY3RDYWxsYmFjayB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9uTWVzc2FnZUNhbGxiYWNrOiBPbk1lc3NhZ2VDYWxsYmFjayB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IHNvY2tldDogV2ViU29ja2V0LFxuICAgIHB1YmxpYyByZWFkb25seSBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICAgIHB1YmxpYyByZWFkb25seSBpbnB1dEZvcm1hdDogRm9ybWF0Q29uZmlnLFxuICAgIHB1YmxpYyByZWFkb25seSBvdXRwdXRGb3JtYXQ6IEZvcm1hdENvbmZpZ1xuICApIHtcbiAgICB0aGlzLnNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZXZlbnQgPT4ge1xuICAgICAgLy8gSW4gY2FzZSB0aGUgZXJyb3IgZXZlbnQgaXMgZm9sbG93ZWQgYnkgYSBjbG9zZSBldmVudCwgd2Ugd2FudCB0aGVcbiAgICAgIC8vIGxhdHRlciB0byBiZSB0aGUgb25lIHRoYXQgZGlzY29ubmVjdHMgdGhlIHNlc3Npb24gYXMgaXQgY29udGFpbnMgbW9yZVxuICAgICAgLy8gdXNlZnVsIGluZm9ybWF0aW9uLlxuICAgICAgc2V0VGltZW91dChcbiAgICAgICAgKCkgPT5cbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3Qoe1xuICAgICAgICAgICAgcmVhc29uOiBcImVycm9yXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgZHVlIHRvIGEgc29ja2V0IGVycm9yLlwiLFxuICAgICAgICAgICAgY29udGV4dDogZXZlbnQsXG4gICAgICAgICAgfSksXG4gICAgICAgIDBcbiAgICAgICk7XG4gICAgfSk7XG4gICAgdGhpcy5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsIGV2ZW50ID0+IHtcbiAgICAgIHRoaXMuZGlzY29ubmVjdChcbiAgICAgICAgZXZlbnQuY29kZSA9PT0gMTAwMFxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICByZWFzb246IFwiYWdlbnRcIixcbiAgICAgICAgICAgICAgY29udGV4dDogZXZlbnQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIHJlYXNvbjogXCJlcnJvclwiLFxuICAgICAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgICAgIGV2ZW50LnJlYXNvbiB8fCBcIlRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgYnkgdGhlIHNlcnZlci5cIixcbiAgICAgICAgICAgICAgY29udGV4dDogZXZlbnQsXG4gICAgICAgICAgICB9XG4gICAgICApO1xuICAgIH0pO1xuICAgIHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGV2ZW50ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZEV2ZW50ID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgaWYgKCFpc1ZhbGlkU29ja2V0RXZlbnQocGFyc2VkRXZlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub25NZXNzYWdlQ2FsbGJhY2spIHtcbiAgICAgICAgICB0aGlzLm9uTWVzc2FnZUNhbGxiYWNrKHBhcnNlZEV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2gocGFyc2VkRXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChfKSB7fVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGNsb3NlKCkge1xuICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7XG4gIH1cblxuICBwdWJsaWMgc2VuZE1lc3NhZ2UobWVzc2FnZTogT3V0Z29pbmdTb2NrZXRFdmVudCkge1xuICAgIHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuICB9XG5cbiAgcHVibGljIG9uTWVzc2FnZShjYWxsYmFjazogT25NZXNzYWdlQ2FsbGJhY2spIHtcbiAgICB0aGlzLm9uTWVzc2FnZUNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5xdWV1ZS5mb3JFYWNoKGNhbGxiYWNrKTtcbiAgICB0aGlzLnF1ZXVlID0gW107XG4gIH1cblxuICBwdWJsaWMgb25EaXNjb25uZWN0KGNhbGxiYWNrOiBPbkRpc2Nvbm5lY3RDYWxsYmFjaykge1xuICAgIHRoaXMub25EaXNjb25uZWN0Q2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICBpZiAodGhpcy5kaXNjb25uZWN0aW9uRGV0YWlscykge1xuICAgICAgY2FsbGJhY2sodGhpcy5kaXNjb25uZWN0aW9uRGV0YWlscyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkaXNjb25uZWN0KGRldGFpbHM6IERpc2Nvbm5lY3Rpb25EZXRhaWxzKSB7XG4gICAgaWYgKCF0aGlzLmRpc2Nvbm5lY3Rpb25EZXRhaWxzKSB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3Rpb25EZXRhaWxzID0gZGV0YWlscztcbiAgICAgIHRoaXMub25EaXNjb25uZWN0Q2FsbGJhY2s/LihkZXRhaWxzKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VGb3JtYXQoZm9ybWF0OiBzdHJpbmcpOiBGb3JtYXRDb25maWcge1xuICBjb25zdCBbZm9ybWF0UGFydCwgc2FtcGxlUmF0ZVBhcnRdID0gZm9ybWF0LnNwbGl0KFwiX1wiKTtcbiAgaWYgKCFbXCJwY21cIiwgXCJ1bGF3XCJdLmluY2x1ZGVzKGZvcm1hdFBhcnQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGZvcm1hdDogJHtmb3JtYXR9YCk7XG4gIH1cblxuICBjb25zdCBzYW1wbGVSYXRlID0gcGFyc2VJbnQoc2FtcGxlUmF0ZVBhcnQpO1xuICBpZiAoaXNOYU4oc2FtcGxlUmF0ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc2FtcGxlIHJhdGU6ICR7c2FtcGxlUmF0ZVBhcnR9YCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZvcm1hdDogZm9ybWF0UGFydCBhcyBGb3JtYXRDb25maWdbXCJmb3JtYXRcIl0sXG4gICAgc2FtcGxlUmF0ZSxcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBhcnJheUJ1ZmZlclRvQmFzZTY0LCBiYXNlNjRUb0FycmF5QnVmZmVyIH0gZnJvbSBcIi4vdXRpbHMvYXVkaW9cIjtcbmltcG9ydCB7IElucHV0LCBJbnB1dENvbmZpZyB9IGZyb20gXCIuL3V0aWxzL2lucHV0XCI7XG5pbXBvcnQgeyBPdXRwdXQgfSBmcm9tIFwiLi91dGlscy9vdXRwdXRcIjtcbmltcG9ydCB7XG4gIENvbm5lY3Rpb24sXG4gIERpc2Nvbm5lY3Rpb25EZXRhaWxzLFxuICBPbkRpc2Nvbm5lY3RDYWxsYmFjayxcbiAgU2Vzc2lvbkNvbmZpZyxcbn0gZnJvbSBcIi4vdXRpbHMvY29ubmVjdGlvblwiO1xuaW1wb3J0IHsgQ2xpZW50VG9vbENhbGxFdmVudCwgSW5jb21pbmdTb2NrZXRFdmVudCB9IGZyb20gXCIuL3V0aWxzL2V2ZW50c1wiO1xuaW1wb3J0IHsgaXNBbmRyb2lkRGV2aWNlLCBpc0lvc0RldmljZSB9IGZyb20gXCIuL3V0aWxzL2NvbXBhdGliaWxpdHlcIjtcblxuZXhwb3J0IHR5cGUgeyBJbmNvbWluZ1NvY2tldEV2ZW50IH0gZnJvbSBcIi4vdXRpbHMvZXZlbnRzXCI7XG5leHBvcnQgdHlwZSB7IFNlc3Npb25Db25maWcsIERpc2Nvbm5lY3Rpb25EZXRhaWxzIH0gZnJvbSBcIi4vdXRpbHMvY29ubmVjdGlvblwiO1xuZXhwb3J0IHR5cGUgUm9sZSA9IFwidXNlclwiIHwgXCJhaVwiO1xuZXhwb3J0IHR5cGUgTW9kZSA9IFwic3BlYWtpbmdcIiB8IFwibGlzdGVuaW5nXCI7XG5leHBvcnQgdHlwZSBTdGF0dXMgPVxuICB8IFwiY29ubmVjdGluZ1wiXG4gIHwgXCJjb25uZWN0ZWRcIlxuICB8IFwiZGlzY29ubmVjdGluZ1wiXG4gIHwgXCJkaXNjb25uZWN0ZWRcIjtcbmV4cG9ydCB0eXBlIE9wdGlvbnMgPSBTZXNzaW9uQ29uZmlnICZcbiAgQ2FsbGJhY2tzICZcbiAgQ2xpZW50VG9vbHNDb25maWcgJlxuICBJbnB1dENvbmZpZztcbmV4cG9ydCB0eXBlIENsaWVudFRvb2xzQ29uZmlnID0ge1xuICBjbGllbnRUb29sczogUmVjb3JkPFxuICAgIHN0cmluZyxcbiAgICAoXG4gICAgICBwYXJhbWV0ZXJzOiBhbnlcbiAgICApID0+IFByb21pc2U8c3RyaW5nIHwgbnVtYmVyIHwgdm9pZD4gfCBzdHJpbmcgfCBudW1iZXIgfCB2b2lkXG4gID47XG59O1xuZXhwb3J0IHR5cGUgQ2FsbGJhY2tzID0ge1xuICBvbkNvbm5lY3Q6IChwcm9wczogeyBjb252ZXJzYXRpb25JZDogc3RyaW5nIH0pID0+IHZvaWQ7XG4gIC8vIGludGVybmFsIGRlYnVnIGV2ZW50cywgbm90IHRvIGJlIHVzZWRcbiAgb25EZWJ1ZzogKHByb3BzOiBhbnkpID0+IHZvaWQ7XG4gIG9uRGlzY29ubmVjdDogT25EaXNjb25uZWN0Q2FsbGJhY2s7XG4gIG9uRXJyb3I6IChtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnkpID0+IHZvaWQ7XG4gIG9uTWVzc2FnZTogKHByb3BzOiB7IG1lc3NhZ2U6IHN0cmluZzsgc291cmNlOiBSb2xlIH0pID0+IHZvaWQ7XG4gIG9uTW9kZUNoYW5nZTogKHByb3A6IHsgbW9kZTogTW9kZSB9KSA9PiB2b2lkO1xuICBvblN0YXR1c0NoYW5nZTogKHByb3A6IHsgc3RhdHVzOiBTdGF0dXMgfSkgPT4gdm9pZDtcbiAgb25DYW5TZW5kRmVlZGJhY2tDaGFuZ2U6IChwcm9wOiB7IGNhblNlbmRGZWVkYmFjazogYm9vbGVhbiB9KSA9PiB2b2lkO1xuICBvblVuaGFuZGxlZENsaWVudFRvb2xDYWxsPzogKFxuICAgIHBhcmFtczogQ2xpZW50VG9vbENhbGxFdmVudFtcImNsaWVudF90b29sX2NhbGxcIl1cbiAgKSA9PiB2b2lkO1xufTtcblxuY29uc3QgZGVmYXVsdENsaWVudFRvb2xzID0geyBjbGllbnRUb29sczoge30gfTtcbmNvbnN0IGRlZmF1bHRDYWxsYmFja3M6IENhbGxiYWNrcyA9IHtcbiAgb25Db25uZWN0OiAoKSA9PiB7fSxcbiAgb25EZWJ1ZzogKCkgPT4ge30sXG4gIG9uRGlzY29ubmVjdDogKCkgPT4ge30sXG4gIG9uRXJyb3I6ICgpID0+IHt9LFxuICBvbk1lc3NhZ2U6ICgpID0+IHt9LFxuICBvbk1vZGVDaGFuZ2U6ICgpID0+IHt9LFxuICBvblN0YXR1c0NoYW5nZTogKCkgPT4ge30sXG4gIG9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlOiAoKSA9PiB7fSxcbn07XG5cbmNvbnN0IEhUVFBTX0FQSV9PUklHSU4gPSBcImh0dHBzOi8vYXBpLmVsZXZlbmxhYnMuaW9cIjtcblxuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbiB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgc3RhcnRTZXNzaW9uKFxuICAgIG9wdGlvbnM6IFNlc3Npb25Db25maWcgJlxuICAgICAgUGFydGlhbDxDYWxsYmFja3M+ICZcbiAgICAgIFBhcnRpYWw8Q2xpZW50VG9vbHNDb25maWc+ICZcbiAgICAgIFBhcnRpYWw8SW5wdXRDb25maWc+XG4gICk6IFByb21pc2U8Q29udmVyc2F0aW9uPiB7XG4gICAgY29uc3QgZnVsbE9wdGlvbnM6IE9wdGlvbnMgPSB7XG4gICAgICAuLi5kZWZhdWx0Q2xpZW50VG9vbHMsXG4gICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9O1xuXG4gICAgZnVsbE9wdGlvbnMub25TdGF0dXNDaGFuZ2UoeyBzdGF0dXM6IFwiY29ubmVjdGluZ1wiIH0pO1xuICAgIGZ1bGxPcHRpb25zLm9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlKHsgY2FuU2VuZEZlZWRiYWNrOiBmYWxzZSB9KTtcblxuICAgIGxldCBpbnB1dDogSW5wdXQgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgY29ubmVjdGlvbjogQ29ubmVjdGlvbiB8IG51bGwgPSBudWxsO1xuICAgIGxldCBvdXRwdXQ6IE91dHB1dCB8IG51bGwgPSBudWxsO1xuICAgIGxldCBwcmVsaW1pbmFyeUlucHV0U3RyZWFtOiBNZWRpYVN0cmVhbSB8IG51bGwgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIHNvbWUgYnJvd3NlcnMgd29uJ3QgYWxsb3cgY2FsbGluZyBnZXRTdXBwb3J0ZWRDb25zdHJhaW50cyBvciBlbnVtZXJhdGVEZXZpY2VzXG4gICAgICAvLyBiZWZvcmUgZ2V0dGluZyBhcHByb3ZhbCBmb3IgbWljcm9waG9uZSBhY2Nlc3NcbiAgICAgIHByZWxpbWluYXJ5SW5wdXRTdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRlbGF5Q29uZmlnID0gb3B0aW9ucy5jb25uZWN0aW9uRGVsYXkgPz8ge1xuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgICAvLyBHaXZlIHRoZSBBbmRyb2lkIEF1ZGlvTWFuYWdlciBlbm91Z2ggdGltZSB0byBzd2l0Y2ggdG8gdGhlIGNvcnJlY3QgYXVkaW8gbW9kZVxuICAgICAgICBhbmRyb2lkOiAzXzAwMCxcbiAgICAgIH07XG4gICAgICBsZXQgZGVsYXkgPSBkZWxheUNvbmZpZy5kZWZhdWx0O1xuICAgICAgaWYgKGlzQW5kcm9pZERldmljZSgpKSB7XG4gICAgICAgIGRlbGF5ID0gZGVsYXlDb25maWcuYW5kcm9pZCA/PyBkZWxheTtcbiAgICAgIH0gZWxzZSBpZiAoaXNJb3NEZXZpY2UoKSkge1xuICAgICAgICBkZWxheSA9IGRlbGF5Q29uZmlnLmlvcyA/PyBkZWxheTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKTtcbiAgICAgIH1cblxuICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IENvbm5lY3Rpb24uY3JlYXRlKG9wdGlvbnMpO1xuICAgICAgW2lucHV0LCBvdXRwdXRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBJbnB1dC5jcmVhdGUoe1xuICAgICAgICAgIC4uLmNvbm5lY3Rpb24uaW5wdXRGb3JtYXQsXG4gICAgICAgICAgcHJlZmVySGVhZHBob25lc0Zvcklvc0RldmljZXM6IG9wdGlvbnMucHJlZmVySGVhZHBob25lc0Zvcklvc0RldmljZXMsXG4gICAgICAgIH0pLFxuICAgICAgICBPdXRwdXQuY3JlYXRlKGNvbm5lY3Rpb24ub3V0cHV0Rm9ybWF0KSxcbiAgICAgIF0pO1xuXG4gICAgICBwcmVsaW1pbmFyeUlucHV0U3RyZWFtPy5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICBwcmVsaW1pbmFyeUlucHV0U3RyZWFtID0gbnVsbDtcblxuICAgICAgcmV0dXJuIG5ldyBDb252ZXJzYXRpb24oZnVsbE9wdGlvbnMsIGNvbm5lY3Rpb24sIGlucHV0LCBvdXRwdXQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBmdWxsT3B0aW9ucy5vblN0YXR1c0NoYW5nZSh7IHN0YXR1czogXCJkaXNjb25uZWN0ZWRcIiB9KTtcbiAgICAgIHByZWxpbWluYXJ5SW5wdXRTdHJlYW0/LmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKTtcbiAgICAgIGNvbm5lY3Rpb24/LmNsb3NlKCk7XG4gICAgICBhd2FpdCBpbnB1dD8uY2xvc2UoKTtcbiAgICAgIGF3YWl0IG91dHB1dD8uY2xvc2UoKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbGFzdEludGVycnVwdFRpbWVzdGFtcDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBtb2RlOiBNb2RlID0gXCJsaXN0ZW5pbmdcIjtcbiAgcHJpdmF0ZSBzdGF0dXM6IFN0YXR1cyA9IFwiY29ubmVjdGluZ1wiO1xuICBwcml2YXRlIGlucHV0RnJlcXVlbmN5RGF0YT86IFVpbnQ4QXJyYXk7XG4gIHByaXZhdGUgb3V0cHV0RnJlcXVlbmN5RGF0YT86IFVpbnQ4QXJyYXk7XG4gIHByaXZhdGUgdm9sdW1lOiBudW1iZXIgPSAxO1xuICBwcml2YXRlIGN1cnJlbnRFdmVudElkOiBudW1iZXIgPSAxO1xuICBwcml2YXRlIGxhc3RGZWVkYmFja0V2ZW50SWQ6IG51bWJlciA9IDE7XG4gIHByaXZhdGUgY2FuU2VuZEZlZWRiYWNrOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IE9wdGlvbnMsXG4gICAgcHJpdmF0ZSByZWFkb25seSBjb25uZWN0aW9uOiBDb25uZWN0aW9uLFxuICAgIHB1YmxpYyByZWFkb25seSBpbnB1dDogSW5wdXQsXG4gICAgcHVibGljIHJlYWRvbmx5IG91dHB1dDogT3V0cHV0XG4gICkge1xuICAgIHRoaXMub3B0aW9ucy5vbkNvbm5lY3QoeyBjb252ZXJzYXRpb25JZDogY29ubmVjdGlvbi5jb252ZXJzYXRpb25JZCB9KTtcblxuICAgIHRoaXMuY29ubmVjdGlvbi5vbkRpc2Nvbm5lY3QodGhpcy5lbmRTZXNzaW9uV2l0aERldGFpbHMpO1xuICAgIHRoaXMuY29ubmVjdGlvbi5vbk1lc3NhZ2UodGhpcy5vbk1lc3NhZ2UpO1xuXG4gICAgdGhpcy5pbnB1dC53b3JrbGV0LnBvcnQub25tZXNzYWdlID0gdGhpcy5vbklucHV0V29ya2xldE1lc3NhZ2U7XG4gICAgdGhpcy5vdXRwdXQud29ya2xldC5wb3J0Lm9ubWVzc2FnZSA9IHRoaXMub25PdXRwdXRXb3JrbGV0TWVzc2FnZTtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyhcImNvbm5lY3RlZFwiKTtcbiAgfVxuXG4gIHB1YmxpYyBlbmRTZXNzaW9uID0gKCkgPT4gdGhpcy5lbmRTZXNzaW9uV2l0aERldGFpbHMoeyByZWFzb246IFwidXNlclwiIH0pO1xuXG4gIHByaXZhdGUgZW5kU2Vzc2lvbldpdGhEZXRhaWxzID0gYXN5bmMgKGRldGFpbHM6IERpc2Nvbm5lY3Rpb25EZXRhaWxzKSA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdHVzICE9PSBcImNvbm5lY3RlZFwiICYmIHRoaXMuc3RhdHVzICE9PSBcImNvbm5lY3RpbmdcIikgcmV0dXJuO1xuICAgIHRoaXMudXBkYXRlU3RhdHVzKFwiZGlzY29ubmVjdGluZ1wiKTtcblxuICAgIHRoaXMuY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgIGF3YWl0IHRoaXMuaW5wdXQuY2xvc2UoKTtcbiAgICBhd2FpdCB0aGlzLm91dHB1dC5jbG9zZSgpO1xuXG4gICAgdGhpcy51cGRhdGVTdGF0dXMoXCJkaXNjb25uZWN0ZWRcIik7XG4gICAgdGhpcy5vcHRpb25zLm9uRGlzY29ubmVjdChkZXRhaWxzKTtcbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZU1vZGUgPSAobW9kZTogTW9kZSkgPT4ge1xuICAgIGlmIChtb2RlICE9PSB0aGlzLm1vZGUpIHtcbiAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgICB0aGlzLm9wdGlvbnMub25Nb2RlQ2hhbmdlKHsgbW9kZSB9KTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdGF0dXMgPSAoc3RhdHVzOiBTdGF0dXMpID0+IHtcbiAgICBpZiAoc3RhdHVzICE9PSB0aGlzLnN0YXR1cykge1xuICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICB0aGlzLm9wdGlvbnMub25TdGF0dXNDaGFuZ2UoeyBzdGF0dXMgfSk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlQ2FuU2VuZEZlZWRiYWNrID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhblNlbmRGZWVkYmFjayA9IHRoaXMuY3VycmVudEV2ZW50SWQgIT09IHRoaXMubGFzdEZlZWRiYWNrRXZlbnRJZDtcbiAgICBpZiAodGhpcy5jYW5TZW5kRmVlZGJhY2sgIT09IGNhblNlbmRGZWVkYmFjaykge1xuICAgICAgdGhpcy5jYW5TZW5kRmVlZGJhY2sgPSBjYW5TZW5kRmVlZGJhY2s7XG4gICAgICB0aGlzLm9wdGlvbnMub25DYW5TZW5kRmVlZGJhY2tDaGFuZ2UoeyBjYW5TZW5kRmVlZGJhY2sgfSk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgb25NZXNzYWdlID0gYXN5bmMgKHBhcnNlZEV2ZW50OiBJbmNvbWluZ1NvY2tldEV2ZW50KSA9PiB7XG4gICAgc3dpdGNoIChwYXJzZWRFdmVudC50eXBlKSB7XG4gICAgICBjYXNlIFwiaW50ZXJydXB0aW9uXCI6IHtcbiAgICAgICAgaWYgKHBhcnNlZEV2ZW50LmludGVycnVwdGlvbl9ldmVudCkge1xuICAgICAgICAgIHRoaXMubGFzdEludGVycnVwdFRpbWVzdGFtcCA9IHBhcnNlZEV2ZW50LmludGVycnVwdGlvbl9ldmVudC5ldmVudF9pZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZhZGVPdXRBdWRpbygpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBcImFnZW50X3Jlc3BvbnNlXCI6IHtcbiAgICAgICAgdGhpcy5vcHRpb25zLm9uTWVzc2FnZSh7XG4gICAgICAgICAgc291cmNlOiBcImFpXCIsXG4gICAgICAgICAgbWVzc2FnZTogcGFyc2VkRXZlbnQuYWdlbnRfcmVzcG9uc2VfZXZlbnQuYWdlbnRfcmVzcG9uc2UsXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBcInVzZXJfdHJhbnNjcmlwdFwiOiB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vbk1lc3NhZ2Uoe1xuICAgICAgICAgIHNvdXJjZTogXCJ1c2VyXCIsXG4gICAgICAgICAgbWVzc2FnZTogcGFyc2VkRXZlbnQudXNlcl90cmFuc2NyaXB0aW9uX2V2ZW50LnVzZXJfdHJhbnNjcmlwdCxcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFwiaW50ZXJuYWxfdGVudGF0aXZlX2FnZW50X3Jlc3BvbnNlXCI6IHtcbiAgICAgICAgdGhpcy5vcHRpb25zLm9uRGVidWcoe1xuICAgICAgICAgIHR5cGU6IFwidGVudGF0aXZlX2FnZW50X3Jlc3BvbnNlXCIsXG4gICAgICAgICAgcmVzcG9uc2U6XG4gICAgICAgICAgICBwYXJzZWRFdmVudC50ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2VfaW50ZXJuYWxfZXZlbnRcbiAgICAgICAgICAgICAgLnRlbnRhdGl2ZV9hZ2VudF9yZXNwb25zZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFwiY2xpZW50X3Rvb2xfY2FsbFwiOiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLm9wdGlvbnMuY2xpZW50VG9vbHMuaGFzT3duUHJvcGVydHkoXG4gICAgICAgICAgICBwYXJzZWRFdmVudC5jbGllbnRfdG9vbF9jYWxsLnRvb2xfbmFtZVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9XG4gICAgICAgICAgICAgIChhd2FpdCB0aGlzLm9wdGlvbnMuY2xpZW50VG9vbHNbXG4gICAgICAgICAgICAgICAgcGFyc2VkRXZlbnQuY2xpZW50X3Rvb2xfY2FsbC50b29sX25hbWVcbiAgICAgICAgICAgICAgXShwYXJzZWRFdmVudC5jbGllbnRfdG9vbF9jYWxsLnBhcmFtZXRlcnMpKSA/P1xuICAgICAgICAgICAgICBcIkNsaWVudCB0b29sIGV4ZWN1dGlvbiBzdWNjZXNzZnVsLlwiOyAvLyBkZWZhdWx0IGNsaWVudC10b29sIGNhbGwgcmVzcG9uc2VcblxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjbGllbnRfdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiBwYXJzZWRFdmVudC5jbGllbnRfdG9vbF9jYWxsLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQsXG4gICAgICAgICAgICAgIGlzX2Vycm9yOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihcbiAgICAgICAgICAgICAgXCJDbGllbnQgdG9vbCBleGVjdXRpb24gZmFpbGVkIHdpdGggZm9sbG93aW5nIGVycm9yOiBcIiArXG4gICAgICAgICAgICAgICAgKGUgYXMgRXJyb3IpPy5tZXNzYWdlLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xpZW50VG9vbE5hbWU6IHBhcnNlZEV2ZW50LmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjbGllbnRfdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiBwYXJzZWRFdmVudC5jbGllbnRfdG9vbF9jYWxsLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgICAgICAgcmVzdWx0OiBcIkNsaWVudCB0b29sIGV4ZWN1dGlvbiBmYWlsZWQ6IFwiICsgKGUgYXMgRXJyb3IpPy5tZXNzYWdlLFxuICAgICAgICAgICAgICBpc19lcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5vblVuaGFuZGxlZENsaWVudFRvb2xDYWxsKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uVW5oYW5kbGVkQ2xpZW50VG9vbENhbGwocGFyc2VkRXZlbnQuY2xpZW50X3Rvb2xfY2FsbCk7XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25FcnJvcihcbiAgICAgICAgICBgQ2xpZW50IHRvb2wgd2l0aCBuYW1lICR7cGFyc2VkRXZlbnQuY2xpZW50X3Rvb2xfY2FsbC50b29sX25hbWV9IGlzIG5vdCBkZWZpbmVkIG9uIGNsaWVudGAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xpZW50VG9vbE5hbWU6IHBhcnNlZEV2ZW50LmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICB0eXBlOiBcImNsaWVudF90b29sX3Jlc3VsdFwiLFxuICAgICAgICAgIHRvb2xfY2FsbF9pZDogcGFyc2VkRXZlbnQuY2xpZW50X3Rvb2xfY2FsbC50b29sX2NhbGxfaWQsXG4gICAgICAgICAgcmVzdWx0OiBgQ2xpZW50IHRvb2wgd2l0aCBuYW1lICR7cGFyc2VkRXZlbnQuY2xpZW50X3Rvb2xfY2FsbC50b29sX25hbWV9IGlzIG5vdCBkZWZpbmVkIG9uIGNsaWVudGAsXG4gICAgICAgICAgaXNfZXJyb3I6IHRydWUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFwiYXVkaW9cIjoge1xuICAgICAgICBpZiAodGhpcy5sYXN0SW50ZXJydXB0VGltZXN0YW1wIDw9IHBhcnNlZEV2ZW50LmF1ZGlvX2V2ZW50LmV2ZW50X2lkKSB7XG4gICAgICAgICAgdGhpcy5hZGRBdWRpb0Jhc2U2NENodW5rKHBhcnNlZEV2ZW50LmF1ZGlvX2V2ZW50LmF1ZGlvX2Jhc2VfNjQpO1xuICAgICAgICAgIHRoaXMuY3VycmVudEV2ZW50SWQgPSBwYXJzZWRFdmVudC5hdWRpb19ldmVudC5ldmVudF9pZDtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUNhblNlbmRGZWVkYmFjaygpO1xuICAgICAgICAgIHRoaXMudXBkYXRlTW9kZShcInNwZWFraW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjYXNlIFwicGluZ1wiOiB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgdHlwZTogXCJwb25nXCIsXG4gICAgICAgICAgZXZlbnRfaWQ6IHBhcnNlZEV2ZW50LnBpbmdfZXZlbnQuZXZlbnRfaWQsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBwYXJzZWRFdmVudC5waW5nX2V2ZW50LnBpbmdfbXMgY2FuIGJlIHVzZWQgb24gY2xpZW50IHNpZGUsIGZvciBleGFtcGxlXG4gICAgICAgIC8vIHRvIHdhcm4gaWYgcGluZyBpcyB0b28gaGlnaCB0aGF0IGV4cGVyaWVuY2UgbWlnaHQgYmUgZGVncmFkZWQuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyB1bmhhbmRsZWQgZXZlbnRzIGFyZSBleHBlY3RlZCB0byBiZSBpbnRlcm5hbCBldmVudHNcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhpcy5vcHRpb25zLm9uRGVidWcocGFyc2VkRXZlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBvbklucHV0V29ya2xldE1lc3NhZ2UgPSAoZXZlbnQ6IE1lc3NhZ2VFdmVudCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHJhd0F1ZGlvUGNtRGF0YSA9IGV2ZW50LmRhdGFbMF07XG4gICAgY29uc3QgbWF4Vm9sdW1lID0gZXZlbnQuZGF0YVsxXTtcblxuICAgIC8vIGNoZWNrIGlmIHRoZSBzb3VuZCB3YXMgbG91ZCBlbm91Z2gsIHNvIHdlIGRvbid0IHNlbmQgdW5uZWNlc3NhcnkgY2h1bmtzXG4gICAgLy8gdGhlbiBmb3J3YXJkIGF1ZGlvIHRvIHdlYnNvY2tldFxuICAgIC8vaWYgKG1heFZvbHVtZSA+IDAuMDAxKSB7XG4gICAgaWYgKHRoaXMuc3RhdHVzID09PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZE1lc3NhZ2Uoe1xuICAgICAgICB1c2VyX2F1ZGlvX2NodW5rOiBhcnJheUJ1ZmZlclRvQmFzZTY0KHJhd0F1ZGlvUGNtRGF0YS5idWZmZXIpLFxuICAgICAgICAvL3NhbXBsZV9yYXRlOiB0aGlzLmlucHV0QXVkaW9Db250ZXh0Py5pbnB1dFNhbXBsZVJhdGUgfHwgdGhpcy5pbnB1dFNhbXBsZVJhdGUsXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy99XG4gIH07XG5cbiAgcHJpdmF0ZSBvbk91dHB1dFdvcmtsZXRNZXNzYWdlID0gKHsgZGF0YSB9OiBNZXNzYWdlRXZlbnQpOiB2b2lkID0+IHtcbiAgICBpZiAoZGF0YS50eXBlID09PSBcInByb2Nlc3NcIikge1xuICAgICAgdGhpcy51cGRhdGVNb2RlKGRhdGEuZmluaXNoZWQgPyBcImxpc3RlbmluZ1wiIDogXCJzcGVha2luZ1wiKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBhZGRBdWRpb0Jhc2U2NENodW5rID0gKGNodW5rOiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLm91dHB1dC5nYWluLmdhaW4udmFsdWUgPSB0aGlzLnZvbHVtZTtcbiAgICB0aGlzLm91dHB1dC53b3JrbGV0LnBvcnQucG9zdE1lc3NhZ2UoeyB0eXBlOiBcImNsZWFySW50ZXJydXB0ZWRcIiB9KTtcbiAgICB0aGlzLm91dHB1dC53b3JrbGV0LnBvcnQucG9zdE1lc3NhZ2Uoe1xuICAgICAgdHlwZTogXCJidWZmZXJcIixcbiAgICAgIGJ1ZmZlcjogYmFzZTY0VG9BcnJheUJ1ZmZlcihjaHVuayksXG4gICAgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBmYWRlT3V0QXVkaW8gPSAoKSA9PiB7XG4gICAgLy8gbXV0ZSBhZ2VudFxuICAgIHRoaXMudXBkYXRlTW9kZShcImxpc3RlbmluZ1wiKTtcbiAgICB0aGlzLm91dHB1dC53b3JrbGV0LnBvcnQucG9zdE1lc3NhZ2UoeyB0eXBlOiBcImludGVycnVwdFwiIH0pO1xuICAgIHRoaXMub3V0cHV0LmdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKFxuICAgICAgMC4wMDAxLFxuICAgICAgdGhpcy5vdXRwdXQuY29udGV4dC5jdXJyZW50VGltZSArIDJcbiAgICApO1xuXG4gICAgLy8gcmVzZXQgdm9sdW1lIGJhY2tcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMub3V0cHV0LmdhaW4uZ2Fpbi52YWx1ZSA9IHRoaXMudm9sdW1lO1xuICAgICAgdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJjbGVhckludGVycnVwdGVkXCIgfSk7XG4gICAgfSwgMjAwMCk7IC8vIEFkanVzdCB0aGUgZHVyYXRpb24gYXMgbmVlZGVkXG4gIH07XG5cbiAgcHJpdmF0ZSBvbkVycm9yID0gKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IGFueSkgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSwgY29udGV4dCk7XG4gICAgdGhpcy5vcHRpb25zLm9uRXJyb3IobWVzc2FnZSwgY29udGV4dCk7XG4gIH07XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVWb2x1bWUgPSAoZnJlcXVlbmN5RGF0YTogVWludDhBcnJheSkgPT4ge1xuICAgIGlmIChmcmVxdWVuY3lEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogQ3VycmVudGx5IHRoaXMgYXZlcmFnZXMgYWxsIGZyZXF1ZW5jaWVzLCBidXQgd2Ugc2hvdWxkIHByb2JhYmx5XG4gICAgLy8gYmlhcyB0b3dhcmRzIHRoZSBmcmVxdWVuY2llcyB0aGF0IGFyZSBtb3JlIHR5cGljYWwgZm9yIGh1bWFuIHZvaWNlXG4gICAgbGV0IHZvbHVtZSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmVxdWVuY3lEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2b2x1bWUgKz0gZnJlcXVlbmN5RGF0YVtpXSAvIDI1NTtcbiAgICB9XG4gICAgdm9sdW1lIC89IGZyZXF1ZW5jeURhdGEubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHZvbHVtZSA8IDAgPyAwIDogdm9sdW1lID4gMSA/IDEgOiB2b2x1bWU7XG4gIH07XG5cbiAgcHVibGljIGdldElkID0gKCkgPT4gdGhpcy5jb25uZWN0aW9uLmNvbnZlcnNhdGlvbklkO1xuXG4gIHB1YmxpYyBpc09wZW4gPSAoKSA9PiB0aGlzLnN0YXR1cyA9PT0gXCJjb25uZWN0ZWRcIjtcblxuICBwdWJsaWMgc2V0Vm9sdW1lID0gKHsgdm9sdW1lIH06IHsgdm9sdW1lOiBudW1iZXIgfSkgPT4ge1xuICAgIHRoaXMudm9sdW1lID0gdm9sdW1lO1xuICB9O1xuXG4gIHB1YmxpYyBnZXRJbnB1dEJ5dGVGcmVxdWVuY3lEYXRhID0gKCkgPT4ge1xuICAgIHRoaXMuaW5wdXRGcmVxdWVuY3lEYXRhID8/PSBuZXcgVWludDhBcnJheShcbiAgICAgIHRoaXMuaW5wdXQuYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnRcbiAgICApO1xuICAgIHRoaXMuaW5wdXQuYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEodGhpcy5pbnB1dEZyZXF1ZW5jeURhdGEpO1xuICAgIHJldHVybiB0aGlzLmlucHV0RnJlcXVlbmN5RGF0YTtcbiAgfTtcblxuICBwdWJsaWMgZ2V0T3V0cHV0Qnl0ZUZyZXF1ZW5jeURhdGEgPSAoKSA9PiB7XG4gICAgdGhpcy5vdXRwdXRGcmVxdWVuY3lEYXRhID8/PSBuZXcgVWludDhBcnJheShcbiAgICAgIHRoaXMub3V0cHV0LmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50XG4gICAgKTtcbiAgICB0aGlzLm91dHB1dC5hbmFseXNlci5nZXRCeXRlRnJlcXVlbmN5RGF0YSh0aGlzLm91dHB1dEZyZXF1ZW5jeURhdGEpO1xuICAgIHJldHVybiB0aGlzLm91dHB1dEZyZXF1ZW5jeURhdGE7XG4gIH07XG5cbiAgcHVibGljIGdldElucHV0Vm9sdW1lID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVZvbHVtZSh0aGlzLmdldElucHV0Qnl0ZUZyZXF1ZW5jeURhdGEoKSk7XG4gIH07XG5cbiAgcHVibGljIGdldE91dHB1dFZvbHVtZSA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVWb2x1bWUodGhpcy5nZXRPdXRwdXRCeXRlRnJlcXVlbmN5RGF0YSgpKTtcbiAgfTtcblxuICBwdWJsaWMgc2VuZEZlZWRiYWNrID0gKGxpa2U6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoIXRoaXMuY2FuU2VuZEZlZWRiYWNrKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIHRoaXMubGFzdEZlZWRiYWNrRXZlbnRJZCA9PT0gMFxuICAgICAgICAgID8gXCJDYW5ub3Qgc2VuZCBmZWVkYmFjazogdGhlIGNvbnZlcnNhdGlvbiBoYXMgbm90IHN0YXJ0ZWQgeWV0LlwiXG4gICAgICAgICAgOiBcIkNhbm5vdCBzZW5kIGZlZWRiYWNrOiBmZWVkYmFjayBoYXMgYWxyZWFkeSBiZWVuIHNlbnQgZm9yIHRoZSBjdXJyZW50IHJlc3BvbnNlLlwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7XG4gICAgICB0eXBlOiBcImZlZWRiYWNrXCIsXG4gICAgICBzY29yZTogbGlrZSA/IFwibGlrZVwiIDogXCJkaXNsaWtlXCIsXG4gICAgICBldmVudF9pZDogdGhpcy5jdXJyZW50RXZlbnRJZCxcbiAgICB9KTtcbiAgICB0aGlzLmxhc3RGZWVkYmFja0V2ZW50SWQgPSB0aGlzLmN1cnJlbnRFdmVudElkO1xuICAgIHRoaXMudXBkYXRlQ2FuU2VuZEZlZWRiYWNrKCk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb3N0T3ZlcmFsbEZlZWRiYWNrKFxuICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICBsaWtlOiBib29sZWFuLFxuICBvcmlnaW46IHN0cmluZyA9IEhUVFBTX0FQSV9PUklHSU5cbikge1xuICByZXR1cm4gZmV0Y2goYCR7b3JpZ2lufS92MS9jb252YWkvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfS9mZWVkYmFja2AsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGZlZWRiYWNrOiBsaWtlID8gXCJsaWtlXCIgOiBcImRpc2xpa2VcIixcbiAgICB9KSxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICB9LFxuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7O0FDQU0sU0FBVUEsRUFBb0JDLElBQUFBO0FBQ2xDLFFBQU1DLEtBQVMsSUFBSUMsV0FBV0YsRUFBQUE7QUFHOUIsU0FEbUJHLE9BQU9DLEtBQUtDLE9BQU9DLGFBQUFBLEdBQWdCTCxFQUFBQSxDQUFBQTtBQUV4RDtBQUFBLFNBRWdCTSxFQUFvQkMsSUFBQUE7QUFDbEMsUUFBTUMsS0FBZU4sT0FBT08sS0FBS0YsRUFBQUEsR0FDM0JHLEtBQU1GLEdBQWFHLFFBQ25CQyxLQUFRLElBQUlYLFdBQVdTLEVBQUFBO0FBQzdCLFdBQVNHLEtBQUksR0FBR0EsS0FBSUgsSUFBS0c7QUFDdkJELElBQUFBLEdBQU1DLEVBQUFBLElBQUtMLEdBQWFNLFdBQVdELEVBQUFBO0FBRXJDLFNBQU9ELEdBQU1aO0FBQ2Y7QUNWQSxJQUFNZSxJQUFPLElBQUlDLEtBQ2YsQ0FFRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FBQSxHQTZHRixFQUFFQyxNQUFNLHlCQUFBLENBQUE7QUFoSFYsSUFtSGFDLElBQW9CQyxJQUFJQyxnQkFBZ0JMLENBQUFBO0FBQUFBLFNDeEhyQ00sSUFBQUE7QUFDZCxTQUNFLENBQ0Usa0JBQ0Esb0JBQ0Esa0JBQ0EsUUFDQSxVQUNBLE1BQUEsRUFDQUMsU0FBU0MsVUFBVUMsUUFBQUEsS0FFcEJELFVBQVVFLFVBQVVILFNBQVMsS0FBQSxLQUFVLGdCQUFnQkk7QUFFNUQ7QUFBQSxJQ0ZhQyxJREViLE1DRmFBO0VBQ0osYUFBQSxPQUFhQyxFQUFPQyxZQUN6QkEsSUFBVUMsUUFDVkEsSUFBTUMsK0JBQ05BLEdBQUFBLEdBQUFBO0FBRUEsUUFBSUMsS0FBK0IsTUFDL0JDLEtBQWtDO0FBRXRDLFFBQUE7QUFDRSxZQUFNQyxLQUFpQyxFQUNyQ0wsWUFBWSxFQUFFTSxPQUFPTixHQUFBQSxHQUNyQk8sa0JBQWtCLEVBQUVELE9BQUFBLEtBQU8sR0FDM0JFLGtCQUFrQixFQUFFRixPQUFBQSxLQUFPLEVBQUE7QUFHN0IsVUFBSWQsRUFBQUEsS0FBaUJVLElBQStCO0FBQ2xELGNBRU1PLE1BQUFBLE1BREVwQyxPQUFPcUIsVUFBVWdCLGFBQWFDLGlCQUFBQSxHQUNEQyxLQUNuQ0MsQ0FBQUEsT0FHYSxpQkFBWEEsR0FBRUMsUUFDRixDQUFDLFVBQVUsYUFBYSxVQUFBLEVBQVlGLEtBQUtHLENBQUFBLE9BQ3ZDRixHQUFFRyxNQUFNQyxZQUFBQSxFQUFjeEIsU0FBU3NCLEVBQUFBLENBQUFBLENBQUFBO0FBR2pDTixRQUFBQSxPQUNGSixHQUFRYSxXQUFXLEVBQUVaLE9BQU9HLEdBQVlTLFNBQUFBO01BRTVDO0FBRUEsWUFBTUMsS0FDSnpCLFVBQVVnQixhQUFhVSx3QkFBQUEsRUFBMEJwQjtBQUVuREcsTUFBQUEsS0FBVSxJQUFJOUIsT0FBT2dELGFBQ25CRixLQUErQixFQUFFbkIsWUFBQUEsR0FBQUEsSUFBZSxDQUFBLENBQUE7QUFFbEQsWUFBTXNCLEtBQVduQixHQUFRb0IsZUFBQUE7QUFDcEJKLE1BQUFBLE1BQUFBLE1BQ0doQixHQUFRcUIsYUFBYUMsVUEzQ2pDLG1HQUFBLEdBQUEsTUE2Q1V0QixHQUFRcUIsYUFBYUMsVUFBVXBDLENBQUFBLEdBRXJDZSxLQUFBQSxNQUFvQlYsVUFBVWdCLGFBQWFnQixhQUFhLEVBQ3REQyxPQUFPdEIsR0FBQUEsQ0FBQUE7QUFHVCxZQUFNdUIsS0FBU3pCLEdBQVEwQix3QkFBd0J6QixFQUFBQSxHQUN6QzBCLEtBQVUsSUFBSUMsaUJBQWlCNUIsSUFBUyxxQkFBQTtBQVE5QyxhQVBBMkIsR0FBUUUsS0FBS0MsWUFBWSxFQUFFN0MsTUFBTSxhQUFhYSxRQUFBQSxJQUFRRCxZQUFBQSxHQUFBQSxDQUFBQSxHQUV0RDRCLEdBQU9NLFFBQVFaLEVBQUFBLEdBQ2ZBLEdBQVNZLFFBQVFKLEVBQUFBLEdBQUFBLE1BRVgzQixHQUFRZ0MsT0FBQUEsR0FFUCxJQUFJckMsRUFBTUssSUFBU21CLElBQVVRLElBQVMxQixFQUFBQTtJQUMvQyxTQUFTZ0MsSUFBUDtBQUFjLFVBQUFDLElBQUFDO0FBR2QsWUFGQUQsU0FBQUEsS0FBQWpDLE9BQUFpQyxHQUFhRSxVQUFBQSxFQUFZQyxRQUFRQyxDQUFBQSxPQUFTQSxHQUFNQyxLQUFBQSxDQUFBQSxHQUN6QyxTQUFQSixLQUFBbkMsT0FBQW1DLEdBQVNLLE1BQUFBLEdBQ0hQO0lBQ1I7RUFDRjtFQUVBUSxZQUNrQnpDLElBQ0FtQixJQUNBUSxJQUNBMUIsSUFBQUE7QUFIQUQsU0FBQUEsVUFBQUEsUUFDQW1CLEtBQUFBLFdBQUFBLFFBQUFBLEtBQ0FRLFVBQUFBLFFBQUFlLEtBQ0F6QyxjQUFBQSxRQUhBeUMsS0FBTzFDLFVBQVBBLElBQ0EwQyxLQUFRdkIsV0FBUkEsSUFDQXVCLEtBQU9mLFVBQVBBLElBQ0FlLEtBQVd6QyxjQUFYQTtFQUNmO0VBRUksTUFBQSxRQUFNdUM7QUFDWEUsU0FBS3pDLFlBQVltQyxVQUFBQSxFQUFZQyxRQUFRQyxDQUFBQSxPQUFTQSxHQUFNQyxLQUFBQSxDQUFBQSxHQUFBQSxNQUM5Q0csS0FBSzFDLFFBQVF3QyxNQUFBQTtFQUNyQjtBQUFBO0FDbEZGLElBQU16RCxJQUFPLElBQUlDLEtBQ2YsQ0FFRSxvd0ZBQUEsR0F5RkYsRUFBRUMsTUFBTSx5QkFBQSxDQUFBO0FBNUZWLElBK0ZhMEQsSUFBdUJ4RCxJQUFJQyxnQkFBZ0JMLENBQUFBO0FBQUFBLElDakczQzZELElEaUcyQzdELE1DakczQzZEO0VBQ0osYUFBQSxPQUFhaEQsRUFBT0MsWUFDekJBLElBQVVDLFFBQ1ZBLEdBQUFBLEdBQUFBO0FBRUEsUUFBSUUsS0FBK0I7QUFDbkMsUUFBQTtBQUNFQSxNQUFBQSxLQUFVLElBQUlrQixhQUFhLEVBQUVyQixZQUFBQSxHQUFBQSxDQUFBQTtBQUM3QixZQUFNc0IsS0FBV25CLEdBQVFvQixlQUFBQSxHQUNuQnlCLEtBQU83QyxHQUFROEMsV0FBQUE7QUFDckJELE1BQUFBLEdBQUtkLFFBQVFaLEVBQUFBLEdBQ2JBLEdBQVNZLFFBQVEvQixHQUFRK0MsV0FBQUEsR0FBQUEsTUFDbkIvQyxHQUFRcUIsYUFBYUMsVUFBVXFCLENBQUFBO0FBQ3JDLFlBQU1oQixLQUFVLElBQUlDLGlCQUFpQjVCLElBQVMsd0JBQUE7QUFNOUMsYUFMQTJCLEdBQVFFLEtBQUtDLFlBQVksRUFBRTdDLE1BQU0sYUFBYWEsUUFBQUEsR0FBQUEsQ0FBQUEsR0FDOUM2QixHQUFRSSxRQUFRYyxFQUFBQSxHQUFBQSxNQUVWN0MsR0FBUWdDLE9BQUFBLEdBRUgsSUFBQVksRUFBTzVDLElBQVNtQixJQUFVMEIsSUFBTWxCLEVBQUFBO0lBQzdDLFNBQVNNLElBQVA7QUFBT0EsVUFBT0U7QUFFZCxZQUFBLFNBREFBLEtBQUFuQyxPQUFBbUMsR0FBU0ssTUFBQUEsR0FDSFA7SUFDUjtFQUNGO0VBRUFRLFlBQ2tCekMsSUFDQW1CLElBQ0EwQixJQUNBbEIsSUFBQUE7QUFIQTNCLFNBQUFBLFVBQUFBLFFBQ0FtQixLQUFBQSxXQUFBQSxRQUNBMEIsS0FBQUEsT0FBQUEsUUFBQUEsS0FDQWxCLFVBQUFBLFFBSEFlLEtBQU8xQyxVQUFQQSxJQUNBMEMsS0FBUXZCLFdBQVJBLElBQ0F1QixLQUFJRyxPQUFKQSxJQUNBSCxLQUFPZixVQUFQQTtFQUNmO0VBRUksTUFBQSxRQUFNYTtBQUFBQSxVQUNMRSxLQUFLMUMsUUFBUXdDLE1BQUFBO0VBQ3JCO0FBQUE7QUNxRWMsU0FBQVEsRUFBbUJDLElBQUFBO0FBQ2pDLFNBQUEsQ0FBQSxDQUFTQSxHQUFNaEU7QUFDakI7QUNwQmEsSUFBQWlFLElBQUEsTUFBQUE7RUFDSixhQUFBLE9BQW9CQyxJQUFBQTtBQUN6QixRQUFJQyxLQUEyQjtBQUUvQixRQUFBO0FBQUlDLFVBQUFBO0FBQ0YsWUFBTUMsS0FBc0JELFNBQWhCQSxLQUFHRixHQUFPRyxVQUFNRCxLQVJYLDJCQVNYRSxLQUFNSixHQUFPSyxZQUNmTCxHQUFPSyxZQUNQRixLQVZlLHNDQVVhSCxHQUFPTSxTQUVqQ0MsS0FBWSxDQTNGRixRQUFBO0FBNEZaUCxNQUFBQSxHQUFPUSxpQkFDVEQsR0FBVUUsS0FBSyxVQUFVVCxHQUFPUSxlQUFBQSxHQUVsQ1AsS0FBUyxJQUFJUyxVQUFVTixJQUFLRyxFQUFBQTtBQUM1QixZQUFNSSxLQUFBQSxNQUFBQSxJQUErQkMsUUFFbkMsQ0FBQ0MsSUFBU0MsT0FBQUE7QUFDVmIsUUFBQUEsR0FBUWMsaUJBQ04sUUFDQSxNQUFBO0FBQUEsY0FBS0M7QUFDSCxnQkFBTUMsS0FBNEMsRUFDaERuRixNQUFNLHNDQUFBO0FBR2NvRixjQUFBQSxJQUFBQyxJQUFBQyxJQUFBQztBQUFsQnJCLFVBQUFBLEdBQU9zQixjQUNUTCxHQUFlTSwrQkFBK0IsRUFDNUNDLE9BQU8sRUFDTEMsUUFBQUEsU0FBTVAsS0FBRWxCLEdBQU9zQixVQUFVRSxTQUFBQSxTQUFqQk4sR0FBd0JPLFFBQ2hDQyxlQUFBQSxTQUFhUCxLQUFFbkIsR0FBT3NCLFVBQVVFLFNBQUFBLFNBQWpCTCxHQUF3QlEsY0FDdkNDLFVBQUFBLFNBQVFSLEtBQUVwQixHQUFPc0IsVUFBVUUsU0FBQUEsU0FBakJKLEdBQXdCUSxTQUFBQSxHQUVwQ0MsS0FBSyxFQUNIQyxVQUFVVCxTQUFGQSxLQUFFckIsR0FBT3NCLFVBQVVPLE9BQUFBLFNBQWpCUixHQUFzQlUsUUFBQUEsRUFBQUEsSUFLbEMvQixHQUFPZ0MsdUJBQ1RmLEdBQWVnQix3QkFBd0JqQyxHQUFPZ0MscUJBRzVDaEMsR0FBT2tDLHFCQUNUakIsR0FBZWtCLG9CQUFvQm5DLEdBQU9rQyxtQkFHNUNsQixTQUFBQSxLQUFBZixPQUFBZSxHQUFRb0IsS0FBS0MsS0FBS0MsVUFBVXJCLEVBQUFBLENBQUFBO1FBQzlCLEdBQ0EsRUFBRXNCLE1BQUFBLEtBQU0sQ0FBQSxHQUVWdEMsR0FBUWMsaUJBQWlCLFNBQVNqQixDQUFBQSxPQUFBQTtBQUloQzBDLHFCQUFXLE1BQU0xQixHQUFPaEIsRUFBQUEsR0FBUSxDQUFBO1FBQ2xDLENBQUEsR0FDQUcsR0FBUWMsaUJBQWlCLFNBQVNELEVBQUFBLEdBQ2xDYixHQUFRYyxpQkFDTixXQUNDakIsQ0FBQUEsT0FBQUE7QUFDQyxnQkFBTTJDLEtBQVVKLEtBQUtLLE1BQU01QyxHQUFNNkMsSUFBQUE7QUFFNUI5QyxZQUFtQjRDLEVBQUFBLE1BSUgsdUNBQWpCQSxHQUFRM0csT0FDVitFLEdBQVE0QixHQUFRRyxzQ0FBQUEsSUFFaEJDLFFBQVFDLEtBQ04sc0RBQUE7UUFFSixHQUVGLEVBQUVQLE1BQUFBLEtBQU0sQ0FBQTtNQUFNLENBQUEsR0FBQSxFQUlaUSxpQkFDSkEsSUFBZUMsMkJBQ2ZBLElBQXlCQyx5QkFDekJBLEdBQUFBLElBQ0V0QyxJQUVFdUMsS0FBY0MsRUFBbUMsUUFBdkJGLEtBQUFBLEtBQTJCLFdBQUEsR0FDckRHLEtBQWVELEVBQVlILEVBQUFBO0FBRWpDLGFBQU8sSUFBSWpELEVBQVdFLElBQVE4QyxJQUFpQkcsSUFBYUUsRUFBQUE7SUFDOUQsU0FBU3RFLElBQVA7QUFBY3VFLFVBQUFBO0FBRWQsWUFETSxTQUFOQSxLQUFBcEQsT0FBQW9ELEdBQVFoRSxNQUFBQSxHQUNGUDtJQUNSO0VBQ0Y7RUFPQVEsWUFDa0JXLElBQ0FxRCxJQUNBSixJQUNBRSxJQUFBQTtBQUFBQSxTQUhBbkQsU0FBQUEsUUFBQVYsS0FDQStELGlCQUFBQSxRQUNBSixLQUFBQSxjQUFBQSxRQUNBRSxLQUFBQSxlQUFBQSxRQVRWRyxLQUFBQSxRQUErQixDQUFBLEdBQUVoRSxLQUNqQ2lFLHVCQUFvRCxNQUFJakUsS0FDeERrRSx1QkFBb0QsTUFDcERDLEtBQUFBLG9CQUE4QyxNQUdwQ25FLEtBQU1VLFNBQU5BLElBQ0FWLEtBQWMrRCxpQkFBZEEsSUFDQS9ELEtBQVcyRCxjQUFYQSxJQUNBM0QsS0FBWTZELGVBQVpBLElBRWhCN0QsS0FBS1UsT0FBT2MsaUJBQWlCLFNBQVNqQixDQUFBQSxPQUFBQTtBQUlwQzBDLGlCQUNFLE1BQ0VqRCxLQUFLb0UsV0FBVyxFQUNkQyxRQUFRLFNBQ1JuQixTQUFTLG9EQUNUNUYsU0FBU2lELEdBQUFBLENBQUFBLEdBRWIsQ0FBQTtJQUVKLENBQUEsR0FDQVAsS0FBS1UsT0FBT2MsaUJBQWlCLFNBQVNqQixDQUFBQSxPQUFBQTtBQUNwQ1AsV0FBS29FLFdBQ1ksUUFBZjdELEdBQU0rRCxPQUNGLEVBQ0VELFFBQVEsU0FDUi9HLFNBQVNpRCxHQUFBQSxJQUVYLEVBQ0U4RCxRQUFRLFNBQ1JuQixTQUNFM0MsR0FBTThELFVBQVUsNENBQ2xCL0csU0FBU2lELEdBQUFBLENBQUFBO0lBQUFBLENBQUFBLEdBSW5CUCxLQUFLVSxPQUFPYyxpQkFBaUIsV0FBV2pCLENBQUFBLE9BQUFBO0FBQ3RDLFVBQUE7QUFDRSxjQUFNZ0UsS0FBY3pCLEtBQUtLLE1BQU01QyxHQUFNNkMsSUFBQUE7QUFDckMsWUFBQSxDQUFLOUMsRUFBbUJpRSxFQUFBQTtBQUN0QjtBQUdFdkUsYUFBS21FLG9CQUNQbkUsS0FBS21FLGtCQUFrQkksRUFBQUEsSUFFdkJ2RSxLQUFLZ0UsTUFBTTlDLEtBQUtxRCxFQUFBQTtNQUVwQixTQUFTQyxJQUFQO01BQVU7SUFBQSxDQUFBO0VBRWhCO0VBRU8xRSxRQUFBQTtBQUNMRSxTQUFLVSxPQUFPWixNQUFBQTtFQUNkO0VBRU8yRSxZQUFZdkIsSUFBQUE7QUFDakJsRCxTQUFLVSxPQUFPbUMsS0FBS0MsS0FBS0MsVUFBVUcsRUFBQUEsQ0FBQUE7RUFDbEM7RUFFT3dCLFVBQVVDLElBQUFBO0FBQ2YzRSxTQUFLbUUsb0JBQW9CUSxJQUN6QjNFLEtBQUtnRSxNQUFNckUsUUFBUWdGLEVBQUFBLEdBQ25CM0UsS0FBS2dFLFFBQVEsQ0FBQTtFQUNmO0VBRU9ZLGFBQWFELElBQUFBO0FBQ2xCM0UsU0FBS2tFLHVCQUF1QlMsSUFDeEIzRSxLQUFLaUUsd0JBQ1BVLEdBQVMzRSxLQUFLaUUsb0JBQUFBO0VBRWxCO0VBRVFHLFdBQVdTLElBQUFBO0FBQ2VDLFFBQUFBO0FBQTNCOUUsU0FBS2lFLHlCQUNSakUsS0FBS2lFLHVCQUF1QlksSUFDNUJDLFNBQUFBLEtBQUE5RSxLQUFLa0UseUJBQUxZLEdBQUFDLEtBQUEvRSxNQUE0QjZFLEVBQUFBO0VBRWhDO0FBQUE7QUFHRixTQUFTakIsRUFBWXhHLElBQUFBO0FBQ25CLFFBQUEsQ0FBTzRILElBQVlDLEVBQUFBLElBQWtCN0gsR0FBTzhILE1BQU0sR0FBQTtBQUNsRCxNQUFBLENBQUssQ0FBQyxPQUFPLE1BQUEsRUFBUXRJLFNBQVNvSSxFQUFBQTtBQUM1QixVQUFVLElBQUFHLE1BQU0sbUJBQW1CL0gsSUFBQUE7QUFHckMsUUFBTUQsS0FBYWlJLFNBQVNILEVBQUFBO0FBQzVCLE1BQUlJLE1BQU1sSSxFQUFBQTtBQUNSLFVBQVUsSUFBQWdJLE1BQU0sd0JBQXdCRixJQUFBQTtBQUcxQyxTQUFPLEVBQ0w3SCxRQUFRNEgsSUFDUjdILFlBQUFBLEdBQUFBO0FBRUo7QUMzT0EsSUFBTW1JLElBQXFCLEVBQUVDLGFBQWEsQ0FBQSxFQUFBO0FBQTFDLElBQ01DLElBQThCLEVBQ2xDQyxXQUFXQSxNQUFBQTtBQUFBQSxHQUNYQyxTQUFTQSxNQUFBQTtBQUFBQSxHQUNUZCxjQUFjQSxNQUFBQTtBQUFBQSxHQUNkZSxTQUFTQSxNQUFBQTtBQUFBQSxHQUNUakIsV0FBV0EsTUFBQUE7QUFBQUEsR0FDWGtCLGNBQWNBLE1BQUFBO0FBQUFBLEdBQ2RDLGdCQUFnQkEsTUFBQUE7QUFBQUEsR0FDaEJDLHlCQUF5QkEsTUFBQUE7QUFBQUEsRUFBQUE7QUFLZCxJQUFBQyxJQUFBLE1BQUFBO0VBQ0osYUFBQSxhQUNMdkksSUFBQUE7QUFLQSxVQUFNd0ksS0FBV0MsRUFDWlgsQ0FBQUEsR0FBQUEsR0FDQUUsR0FDQWhJLEVBQUFBO0FBR0x3SSxJQUFBQSxHQUFZSCxlQUFlLEVBQUVLLFFBQVEsYUFBQSxDQUFBLEdBQ3JDRixHQUFZRix3QkFBd0IsRUFBRUssaUJBQUFBLE1BQWlCLENBQUE7QUFFdkQsUUFBSUMsS0FBc0IsTUFDdEJDLEtBQWdDLE1BQ2hDQyxLQUF3QixNQUN4QkMsS0FBNkM7QUFFakQsUUFBQTtBQUFJLFVBQUFDLElBQUFDO0FBR0ZGLE1BQUFBLEtBQUFBLE1BQStCMUosVUFBVWdCLGFBQWFnQixhQUFhLEVBQ2pFQyxPQUFBQSxLQUFPLENBQUE7QUFHVCxZQUFNNEgsS0FBcUMsU0FBMUJGLEtBQUdoSixHQUFRbUosbUJBQWVILEtBQUksRUFDN0NJLFNBQVMsR0FFVEMsU0FBUyxJQUFBO0FBRVgsVUFBSUMsS0FBUUosR0FBWUU7QUFDRCxVQUFBRztBQUF2QixVTmhGRyxXQUFXQyxLQUFLbkssVUFBVUUsU0FBQUE7QU1pRjNCK0osUUFBQUEsS0FBMkJDLFNBQXRCQSxJQUFHTCxHQUFZRyxXQUFPRSxJQUFJRDtlQUN0Qm5LLEVBQUFBLEdBQWU7QUFBQXNLLFlBQUFBO0FBQ3hCSCxRQUFBQSxLQUF1QixTQUFsQkcsSUFBR1AsR0FBWVEsT0FBR0QsSUFBSUg7TUFDN0I7QUFrQkEsYUFoQklBLEtBQVEsS0FBQSxNQUNBLElBQUF6RixRQUFRQyxDQUFBQSxPQUFXMkIsV0FBVzNCLElBQVN3RixFQUFBQSxDQUFBQSxHQUduRFQsS0FBQUEsTUFBbUI3RixFQUFXdEQsT0FBT00sRUFBQUEsR0FBQUEsQ0FDcEM0SSxJQUFPRSxFQUFBQSxJQUFBQSxNQUFnQmpGLFFBQVE4RixJQUFJLENBQ2xDbEssRUFBTUMsT0FBTStJLEVBQUFBLENBQUFBLEdBQ1BJLEdBQVcxQyxhQUFXLEVBQ3pCdEcsK0JBQStCRyxHQUFRSCw4QkFBQUEsQ0FBQUEsQ0FBQUEsR0FFekM2QyxFQUFPaEQsT0FBT21KLEdBQVd4QyxZQUFBQSxDQUFBQSxDQUFBQSxHQUczQjRDLFNBQUFBLEtBQUFGLE9BQUFFLEdBQXdCL0csVUFBQUEsRUFBWUMsUUFBUUMsQ0FBQUEsT0FBU0EsR0FBTUMsS0FBQUEsQ0FBQUEsR0FDM0QwRyxLQUF5QixNQUVkLElBQUFSLEVBQWFDLElBQWFLLElBQVlELElBQU9FLEVBQUFBO0lBQzFELFNBQVMvRyxJQUFQO0FBQWMsVUFBQTZILEdBQUFDLEdBQUFDLEdBQUFDO0FBTWQsWUFMQXZCLEdBQVlILGVBQWUsRUFBRUssUUFBUSxlQUFBLENBQUEsR0FDZixTQUF0QmtCLElBQUFiLE9BQUFhLEVBQXdCMUgsVUFBQUEsRUFBWUMsUUFBUUMsQ0FBQUEsT0FBU0EsR0FBTUMsS0FBQUEsQ0FBQUEsR0FDM0R3SCxTQUFBQSxJQUFBaEIsT0FBQWdCLEVBQVl2SCxNQUFBQSxHQUFBQSxPQUNOd0gsU0FBTkEsSUFBTWxCLE1BQUFBLFNBQUFrQixFQUFPeEgsTUFBQUEsSUFBQUEsT0FDUHlILFNBQU5BLElBQU1qQixNQUFBQSxTQUFBaUIsRUFBUXpILE1BQUFBLElBQ1JQO0lBQ1I7RUFDRjtFQVlBUSxZQUNtQnZDLElBQ0E2SSxJQUNERCxJQUNBRSxJQUFBQTtBQUFja0IsUUFBQUEsS0FIYmhLO0FBQUFBLFNBQUFBLFVBQUFBLFFBQ0E2SSxLQUFBQSxhQUFBQSxRQUFBQSxLQUNERCxRQUFBQSxRQUFBcEcsS0FDQXNHLFNBQUFBLFFBQUF0RyxLQWRWeUgseUJBQWlDLEdBQUN6SCxLQUNsQzBILE9BQWEsYUFBVzFILEtBQ3hCa0csU0FBaUIsY0FDakJ5QixLQUFBQSxxQkFBQUEsUUFDQUMsS0FBQUEsc0JBQUFBLFFBQ0FDLEtBQUFBLFNBQWlCLEdBQ2pCQyxLQUFBQSxpQkFBeUIsR0FDekJDLEtBQUFBLHNCQUE4QixHQUFDL0gsS0FDL0JtRyxrQkFBQUEsT0FBZ0NuRyxLQWtCakNnSSxhQUFhLE1BQU1oSSxLQUFLaUksc0JBQXNCLEVBQUU1RCxRQUFRLE9BQUEsQ0FBQSxHQUV2RDRELEtBQUFBLHdCQUF3QkMsZUFBT3JELElBQUFBO0FBQ2pCLHNCQUFoQjJDLEdBQUt0QixVQUEwQyxpQkFBaEJzQixHQUFLdEIsV0FDeENzQixHQUFLVyxhQUFhLGVBQUEsR0FFbEJYLEdBQUtuQixXQUFXdkcsTUFBQUEsR0FBQUEsTUFDVjBILEdBQUtwQixNQUFNdEcsTUFBQUEsR0FBQUEsTUFDWDBILEdBQUtsQixPQUFPeEcsTUFBQUEsR0FFbEIwSCxHQUFLVyxhQUFhLGNBQUEsR0FDbEJYLEdBQUtoSyxRQUFRb0gsYUFBYUMsRUFBQUE7SUFDNUIsR0FBQzdFLEtBRU9vSSxhQUFjVixDQUFBQSxPQUFBQTtBQUNoQkEsTUFBQUEsT0FBUzFILEtBQUswSCxTQUNoQjFILEtBQUswSCxPQUFPQSxJQUNaMUgsS0FBS3hDLFFBQVFvSSxhQUFhLEVBQUU4QixNQUFBQSxHQUFBQSxDQUFBQTtJQUM5QixHQUNEMUgsS0FFT21JLGVBQWdCakMsQ0FBQUEsT0FBQUE7QUFDbEJBLE1BQUFBLE9BQVdsRyxLQUFLa0csV0FDbEJsRyxLQUFLa0csU0FBU0EsSUFDZGxHLEtBQUt4QyxRQUFRcUksZUFBZSxFQUFFSyxRQUFBQSxHQUFBQSxDQUFBQTtJQUNoQyxHQUdNbUMsS0FBQUEsd0JBQXdCLE1BQUE7QUFDOUIsWUFBTWxDLEtBQWtCbkcsS0FBSzhILG1CQUFtQjlILEtBQUsrSDtBQUNqRC9ILFdBQUttRyxvQkFBb0JBLE9BQzNCbkcsS0FBS21HLGtCQUFrQkEsSUFDdkJuRyxLQUFLeEMsUUFBUXNJLHdCQUF3QixFQUFFSyxpQkFBQUEsR0FBQUEsQ0FBQUE7SUFDekMsR0FBQSxLQUdNekIsWUFBWXdELGVBQU8zRCxJQUFBQTtBQUN6QixjQUFRQSxHQUFZaEksTUFBQUE7UUFDbEIsS0FBSztBQUNDZ0ksVUFBQUEsR0FBWStELHVCQUNkZCxHQUFLQyx5QkFBeUJsRCxHQUFZK0QsbUJBQW1CQyxXQUUvRGYsR0FBS2dCLGFBQUFBO0FBQ0w7UUFHRixLQUFLO0FBQ0hoQixVQUFBQSxHQUFLaEssUUFBUWtILFVBQVUsRUFDckIzRixRQUFRLE1BQ1JtRSxTQUFTcUIsR0FBWWtFLHFCQUFxQkMsZUFBQUEsQ0FBQUE7QUFFNUM7UUFHRixLQUFLO0FBQ0hsQixVQUFBQSxHQUFLaEssUUFBUWtILFVBQVUsRUFDckIzRixRQUFRLFFBQ1JtRSxTQUFTcUIsR0FBWW9FLHlCQUF5QkMsZ0JBQUFBLENBQUFBO0FBRWhEO1FBR0YsS0FBSztBQUNIcEIsVUFBQUEsR0FBS2hLLFFBQVFrSSxRQUFRLEVBQ25CbkosTUFBTSw0QkFDTnNNLFVBQ0V0RSxHQUFZdUUsd0NBQ1RDLHlCQUFBQSxDQUFBQTtBQUVQO1FBR0YsS0FBSztBQUNILGNBQ0V2QixHQUFLaEssUUFBUStILFlBQVl5RCxlQUN2QnpFLEdBQVkwRSxpQkFBaUJDLFNBQUFBLEdBRS9CO0FBQ0EsZ0JBQUE7QUFBSUMsa0JBQUFBO0FBQ0Ysb0JBQU1DLEtBR3NDRCxTQUhoQ0EsS0FBQUEsTUFDSDNCLEdBQUtoSyxRQUFRK0gsWUFDbEJoQixHQUFZMEUsaUJBQWlCQyxTQUFBQSxFQUM3QjNFLEdBQVkwRSxpQkFBaUJJLFVBQUFBLEtBQVdGLEtBQzFDO0FBRUYzQixjQUFBQSxHQUFLbkIsV0FBVzVCLFlBQVksRUFDMUJsSSxNQUFNLHNCQUNOK00sY0FBYy9FLEdBQVkwRSxpQkFBaUJLLGNBQzNDRixRQUFRQSxJQUNSRyxVQUFBQSxNQUFVLENBQUE7WUFFZCxTQUFTQyxJQUFQO0FBQ0FoQyxjQUFBQSxHQUFLN0IsUUFDSCx5REFDRzZELFFBQUFBLEtBQUFBLFNBQUFBLEdBQWF0RyxVQUNoQixFQUNFdUcsZ0JBQWdCbEYsR0FBWTBFLGlCQUFpQkMsVUFBQUEsQ0FBQUEsR0FHakQxQixHQUFLbkIsV0FBVzVCLFlBQVksRUFDMUJsSSxNQUFNLHNCQUNOK00sY0FBYy9FLEdBQVkwRSxpQkFBaUJLLGNBQzNDRixRQUFRLG9DQUErQyxRQUFYSSxLQUFBQSxTQUFBQSxHQUFhdEcsVUFDekRxRyxVQUFBQSxLQUFVLENBQUE7WUFFZDtBQUVBO1VBQ0Y7QUFFQSxjQUFJL0IsR0FBS2hLLFFBQVFrTSwyQkFBMkI7QUFDMUNsQyxZQUFBQSxHQUFLaEssUUFBUWtNLDBCQUEwQm5GLEdBQVkwRSxnQkFBQUE7QUFFbkQ7VUFDRjtBQUVBekIsVUFBQUEsR0FBSzdCLFFBQ0gseUJBQXlCcEIsR0FBWTBFLGlCQUFpQkMsc0NBQ3RELEVBQ0VPLGdCQUFnQmxGLEdBQVkwRSxpQkFBaUJDLFVBQUFBLENBQUFBLEdBR2pEMUIsR0FBS25CLFdBQVc1QixZQUFZLEVBQzFCbEksTUFBTSxzQkFDTitNLGNBQWMvRSxHQUFZMEUsaUJBQWlCSyxjQUMzQ0YsUUFBUSx5QkFBeUI3RSxHQUFZMEUsaUJBQWlCQyxzQ0FDOURLLFVBQUFBLEtBQVUsQ0FBQTtBQUdaO1FBR0YsS0FBSztBQUNDL0IsVUFBQUEsR0FBS0MsMEJBQTBCbEQsR0FBWW9GLFlBQVlwQixhQUN6RGYsR0FBS29DLG9CQUFvQnJGLEdBQVlvRixZQUFZRSxhQUFBQSxHQUNqRHJDLEdBQUtNLGlCQUFpQnZELEdBQVlvRixZQUFZcEIsVUFDOUNmLEdBQUthLHNCQUFBQSxHQUNMYixHQUFLWSxXQUFXLFVBQUE7QUFFbEI7UUFHRixLQUFLO0FBQ0haLFVBQUFBLEdBQUtuQixXQUFXNUIsWUFBWSxFQUMxQmxJLE1BQU0sUUFDTmdNLFVBQVVoRSxHQUFZdUYsV0FBV3ZCLFNBQUFBLENBQUFBO0FBSW5DO1FBSUY7QUFDRWYsVUFBQUEsR0FBS2hLLFFBQVFrSSxRQUFRbkIsRUFBQUE7TUFBQUE7SUFJM0IsR0FBQ3ZFLEtBRU8rSix3QkFBeUJ4SixDQUFBQSxPQUFBQTtBQU9YLHNCQUFoQlAsS0FBS2tHLFVBQ1BsRyxLQUFLcUcsV0FBVzVCLFlBQVksRUFDMUJ1RixrQkFBa0I1TyxFQVJFbUYsR0FBTTZDLEtBQUssQ0FBQSxFQVF1QjlILE1BQUFBLEVBQUFBLENBQUFBO0lBRzFELEdBRUQwRSxLQUVPaUsseUJBQXlCLENBQUEsRUFBRzdHLE1BQUFBLEdBQUFBLE1BQUFBO0FBQ2hCLG9CQUFkQSxHQUFLN0csUUFDUHlELEtBQUtvSSxXQUFXaEYsR0FBSzhHLFdBQVcsY0FBYyxVQUFBO0lBQ2hELEdBQUEsS0FHTU4sc0JBQXVCTyxDQUFBQSxPQUFBQTtBQUM3Qm5LLFdBQUtzRyxPQUFPbkcsS0FBS0EsS0FBS2lLLFFBQVFwSyxLQUFLNkgsUUFDbkM3SCxLQUFLc0csT0FBT3JILFFBQVFFLEtBQUtDLFlBQVksRUFBRTdDLE1BQU0sbUJBQUEsQ0FBQSxHQUM3Q3lELEtBQUtzRyxPQUFPckgsUUFBUUUsS0FBS0MsWUFBWSxFQUNuQzdDLE1BQU0sVUFDTmpCLFFBQVFNLEVBQW9CdU8sRUFBQUEsRUFBQUEsQ0FBQUE7SUFBQUEsR0FFL0JuSyxLQUVPd0ksZUFBZSxNQUFBO0FBRXJCeEksV0FBS29JLFdBQVcsV0FBQSxHQUNoQnBJLEtBQUtzRyxPQUFPckgsUUFBUUUsS0FBS0MsWUFBWSxFQUFFN0MsTUFBTSxZQUFBLENBQUEsR0FDN0N5RCxLQUFLc0csT0FBT25HLEtBQUtBLEtBQUtrSyw2QkFDcEIsTUFDQXJLLEtBQUtzRyxPQUFPaEosUUFBUWdOLGNBQWMsQ0FBQSxHQUlwQ3JILFdBQVcsTUFBQTtBQUNUakQsYUFBS3NHLE9BQU9uRyxLQUFLQSxLQUFLaUssUUFBUXBLLEtBQUs2SCxRQUNuQzdILEtBQUtzRyxPQUFPckgsUUFBUUUsS0FBS0MsWUFBWSxFQUFFN0MsTUFBTSxtQkFBQSxDQUFBO01BQy9DLEdBQUcsR0FBQTtJQUFJLEdBR0RvSixLQUFBQSxVQUFVLENBQUN6QyxJQUFpQjVGLE9BQUFBO0FBQ2xDZ0csY0FBUS9ELE1BQU0yRCxJQUFTNUYsRUFBQUEsR0FDdkIwQyxLQUFLeEMsUUFBUW1JLFFBQVF6QyxJQUFTNUYsRUFBQUE7SUFBTyxHQUcvQmlOLEtBQUFBLGtCQUFtQkMsQ0FBQUEsT0FBQUE7QUFDekIsVUFBNkIsTUFBekJBLEdBQWN2TztBQUNoQixlQUNGO0FBSUEsVUFBSTRMLEtBQVM7QUFDYixlQUFTMUwsS0FBSSxHQUFHQSxLQUFJcU8sR0FBY3ZPLFFBQVFFO0FBQ3hDMEwsUUFBQUEsTUFBVTJDLEdBQWNyTyxFQUFBQSxJQUFLO0FBSS9CLGFBRkEwTCxNQUFVMkMsR0FBY3ZPLFFBRWpCNEwsS0FBUyxJQUFJLElBQUlBLEtBQVMsSUFBSSxJQUFJQTtJQUFBQSxHQUMxQzdILEtBRU15SyxRQUFRLE1BQU16SyxLQUFLcUcsV0FBV3RDLGdCQUFjL0QsS0FFNUMwSyxTQUFTLE1BQXNCLGdCQUFoQjFLLEtBQUtrRyxRQUVwQnlFLEtBQUFBLFlBQVksQ0FBQSxFQUFHOUMsUUFBQUEsR0FBQUEsTUFBQUE7QUFDcEI3SCxXQUFLNkgsU0FBU0E7SUFDaEIsR0FFTytDLEtBQUFBLDRCQUE0QixPQUNWQyxRQUFuQjdLLEtBQUMySCx1QkFBTDNILEtBQUsySCxxQkFBdUIsSUFBSXBNLFdBQzlCeUUsS0FBS29HLE1BQU0zSCxTQUFTcU0saUJBQUFBLElBRXRCOUssS0FBS29HLE1BQU0zSCxTQUFTc00scUJBQXFCL0ssS0FBSzJILGtCQUFBQSxHQUNuQzNILEtBQUMySCxxQkFDYjNILEtBRU1nTCw2QkFBNkIsT0FDVixRQUFwQmhMLEtBQUM0SCx3QkFBTDVILEtBQUs0SCxzQkFBd0IsSUFBSXJNLFdBQy9CeUUsS0FBS3NHLE9BQU83SCxTQUFTcU0saUJBQUFBLElBRXZCOUssS0FBS3NHLE9BQU83SCxTQUFTc00scUJBQXFCL0ssS0FBSzRILG1CQUFBQSxHQUN4QzVILEtBQUs0SCxzQkFDYjVILEtBRU1pTCxpQkFBaUIsTUFDZmpMLEtBQUt1SyxnQkFBZ0J2SyxLQUFLNEssMEJBQUFBLENBQUFBLEdBQ2xDNUssS0FFTWtMLGtCQUFrQixNQUNabEwsS0FBQ3VLLGdCQUFnQnZLLEtBQUtnTCwyQkFBQUEsQ0FBQUEsR0FHNUJHLEtBQUFBLGVBQWdCQyxDQUFBQSxPQUFBQTtBQUNoQnBMLFdBQUttRyxtQkFTVm5HLEtBQUtxRyxXQUFXNUIsWUFBWSxFQUMxQmxJLE1BQU0sWUFDTjhPLE9BQU9ELEtBQU8sU0FBUyxXQUN2QjdDLFVBQVV2SSxLQUFLOEgsZUFBQUEsQ0FBQUEsR0FFakI5SCxLQUFLK0gsc0JBQXNCL0gsS0FBSzhILGdCQUNoQzlILEtBQUtxSSxzQkFBQUEsS0FkSC9FLFFBQVFDLEtBQ3VCLE1BQTdCdkQsS0FBSytILHNCQUNELGdFQUNBLGdGQUFBO0lBV2tCLEdBblNUL0gsS0FBT3hDLFVBQVBBLElBQ0F3QyxLQUFVcUcsYUFBVkEsSUFDRHJHLEtBQUtvRyxRQUFMQSxJQUNBcEcsS0FBTXNHLFNBQU5BLElBRWhCdEcsS0FBS3hDLFFBQVFpSSxVQUFVLEVBQUUxQixnQkFBZ0JzQyxHQUFXdEMsZUFBQUEsQ0FBQUEsR0FFcEQvRCxLQUFLcUcsV0FBV3pCLGFBQWE1RSxLQUFLaUkscUJBQUFBLEdBQ2xDakksS0FBS3FHLFdBQVczQixVQUFVMUUsS0FBSzBFLFNBQUFBLEdBRS9CMUUsS0FBS29HLE1BQU1uSCxRQUFRRSxLQUFLbU0sWUFBWXRMLEtBQUsrSix1QkFDekMvSixLQUFLc0csT0FBT3JILFFBQVFFLEtBQUttTSxZQUFZdEwsS0FBS2lLLHdCQUMxQ2pLLEtBQUttSSxhQUFhLFdBQUE7RUFDcEI7QUFBQTs7O0FUeEpGLHNCQUFxRTtBQUs5RCxTQUFTLFlBQVksS0FBVSxPQUE4QjtBQUNuRSxRQUFNLFdBQVcsTUFBTSxRQUFRLGtCQUFrQixHQUFHLEVBQUUsS0FBSyxJQUFJO0FBQy9ELFFBQU0sUUFBUSxJQUFJLE1BQU0sU0FBUztBQUNqQyxRQUFNLE9BQU8sTUFBTSxLQUFLLENBQUNvRCxPQUFNQSxHQUFFLFNBQVMsUUFBUTtBQUNsRCxTQUFPLE9BQU8sS0FBSyxPQUFPO0FBQzNCO0FBUUEsZUFBc0IsU0FDckIsS0FDQSxPQUN5QjtBQUN6QixRQUFNLE9BQU8sWUFBWSxLQUFLLEtBQUs7QUFDbkMsTUFBSSxDQUFDO0FBQU0sV0FBTztBQUVsQixRQUFNLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixJQUFJO0FBQ2pELE1BQUksZ0JBQWdCLHVCQUFPO0FBQzFCLFdBQU8sTUFBTSxJQUFJLE1BQU0sS0FBSyxJQUFJO0FBQUEsRUFDakM7QUFDQSxTQUFPO0FBQ1I7QUFNQSxJQUFNLG1CQUF1RDtBQUFBLEVBQzVELFNBQVM7QUFDVjtBQUVBLElBQXFCLG1DQUFyQixjQUE4RCx1QkFBTztBQUFBLEVBR3BFLE1BQU0sU0FBUztBQUNkLFVBQU0sS0FBSyxhQUFhO0FBR3hCLFVBQU0sZUFBZSxLQUFLO0FBQUEsTUFDekI7QUFBQSxNQUNBO0FBQUEsTUFDQSxDQUFDLFFBQW9CO0FBRXBCLFlBQUksZ0NBQWdDLEtBQUssS0FBSyxLQUFLLFFBQVEsRUFBRSxLQUFLO0FBQUEsTUFDbkU7QUFBQSxJQUNEO0FBRUEsaUJBQWEsU0FBUyx3QkFBd0I7QUFHOUMsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDZixZQUFJLGdDQUFnQyxLQUFLLEtBQUssS0FBSyxRQUFRLEVBQUUsS0FBSztBQUFBLE1BQ25FO0FBQUEsSUFDRCxDQUFDO0FBR0QsU0FBSyxjQUFjLElBQUkscUNBQXFDLEtBQUssS0FBSyxJQUFJLENBQUM7QUFBQSxFQUM1RTtBQUFBLEVBRUEsV0FBVztBQUFBLEVBQUM7QUFBQSxFQUVaLE1BQU0sZUFBZTtBQUNwQixTQUFLLFdBQVcsT0FBTztBQUFBLE1BQ3RCLENBQUM7QUFBQSxNQUNEO0FBQUEsTUFDQSxNQUFNLEtBQUssU0FBUztBQUFBLElBQ3JCO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQ0Q7QUFFQSxJQUFNLGtDQUFOLGNBQThDLHNCQUFNO0FBQUEsRUFJbkQsWUFBWSxLQUFVLFVBQThDO0FBQ25FLFVBQU0sR0FBRztBQUNULFNBQUssV0FBVztBQUNoQixTQUFLLGVBQWU7QUFBQSxFQUNyQjtBQUFBLEVBRUEsTUFBTSxTQUFTO0FBQ2QsVUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixjQUFVLE1BQU07QUFHaEIsY0FBVSxTQUFTLE1BQU07QUFBQSxNQUN4QixNQUFNO0FBQUEsTUFDTixNQUFNLEVBQUUsT0FBTyxzQkFBc0I7QUFBQSxJQUN0QyxDQUFDO0FBRUQsVUFBTSxrQkFBa0IsVUFBVSxVQUFVO0FBQUEsTUFDM0MsTUFBTSxFQUFFLE9BQU8sMkNBQTJDO0FBQUEsSUFDM0QsQ0FBQztBQUVELFVBQU0sY0FBYyxnQkFBZ0IsU0FBUyxVQUFVO0FBQUEsTUFDdEQsTUFBTTtBQUFBLE1BQ04sTUFBTSxFQUFFLE9BQU8sbUNBQW1DO0FBQUEsSUFDbkQsQ0FBQztBQUNELFVBQU0sYUFBYSxnQkFBZ0IsU0FBUyxVQUFVO0FBQUEsTUFDckQsTUFBTTtBQUFBLE1BQ04sTUFBTSxFQUFFLE9BQU8sb0NBQW9DLFVBQVUsS0FBSztBQUFBLElBQ25FLENBQUM7QUFFRCxVQUFNLGtCQUFrQixVQUFVLFVBQVU7QUFBQSxNQUMzQyxNQUFNLEVBQUUsT0FBTyx1Q0FBdUM7QUFBQSxJQUN2RCxDQUFDO0FBQ0Qsb0JBQWdCLFNBQVMsS0FBSyxFQUFFLE1BQU0sV0FBVyxDQUFDLEVBQUUsU0FBUyxRQUFRO0FBQUEsTUFDcEUsTUFBTTtBQUFBLE1BQ04sTUFBTSxFQUFFLElBQUksbUJBQW1CO0FBQUEsSUFDaEMsQ0FBQztBQUNELG9CQUFnQixTQUFTLEtBQUssRUFBRSxNQUFNLFlBQVksQ0FBQyxFQUFFLFNBQVMsUUFBUTtBQUFBLE1BQ3JFLE1BQU07QUFBQSxNQUNOLE1BQU0sRUFBRSxJQUFJLGNBQWM7QUFBQSxJQUMzQixDQUFDO0FBRUQsVUFBTSxtQkFBbUIsVUFBVSxjQUFjLG1CQUFtQjtBQUNwRSxVQUFNLGNBQWMsVUFBVSxjQUFjLGNBQWM7QUFFMUQsVUFBTSxvQkFBb0IsWUFBWTtBQUNyQyxVQUFJO0FBRUgsY0FBTSxVQUFVLGFBQWEsYUFBYSxFQUFFLE9BQU8sS0FBSyxDQUFDO0FBR3pELGFBQUssZUFBZSxNQUFNLEVBQWEsYUFBYTtBQUFBLFVBQ25ELFNBQVMsS0FBSyxTQUFTO0FBQUEsVUFDdkIsYUFBYTtBQUFBLFlBQ1osVUFBVSxPQUFPLEVBQUUsT0FBTyxRQUFRLE1BQU07QUFDdkMsc0JBQVEsSUFBSSxPQUFPO0FBQ25CLG9CQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sR0FBRyxZQUFZLE9BQU87QUFBQSxZQUNuRDtBQUFBLFlBQ0EsU0FBUyxPQUFPLEVBQUUsU0FBUyxNQUFNO0FBQ2hDLHNCQUFRLElBQUksUUFBUTtBQUNwQixvQkFBTSxVQUFVLE1BQU0sU0FBUyxLQUFLLEtBQUssUUFBUTtBQUNqRCxrQkFBSSxTQUFTO0FBQ1osd0JBQVEsSUFBSSxPQUFPO0FBQ25CLHVCQUFPO0FBQUEsY0FDUjtBQUNBLHFCQUFPO0FBQUEsWUFDUjtBQUFBLFlBQ2tCLGdCQUFnQixZQUFZO0FBQ3hCLG9CQUFNLFFBQVEsS0FBSyxJQUFJLE1BQU0sU0FBUztBQUN0QyxvQkFBTSxRQUFRLE1BQU0sSUFBSSxDQUFBQSxPQUFLQSxHQUFFLEtBQUssUUFBUSxPQUFPLEVBQUUsQ0FBQyxFQUFFLEtBQUssSUFBSTtBQUNqRSxzQkFBUSxJQUFJLEtBQUs7QUFDakIscUJBQU87QUFBQSxZQUNYO0FBQUEsVUFDbkI7QUFBQSxVQUNBLFdBQVcsTUFBTTtBQUNoQixnQkFBSSxrQkFBa0I7QUFDckIsK0JBQWlCLGNBQWM7QUFBQSxZQUNoQztBQUNBLHdCQUFZLFdBQVc7QUFDdkIsdUJBQVcsV0FBVztBQUFBLFVBQ3ZCO0FBQUEsVUFDQSxjQUFjLE1BQU07QUFDbkIsZ0JBQUksa0JBQWtCO0FBQ3JCLCtCQUFpQixjQUFjO0FBQUEsWUFDaEM7QUFDQSx3QkFBWSxXQUFXO0FBQ3ZCLHVCQUFXLFdBQVc7QUFBQSxVQUN2QjtBQUFBLFVBQ0EsU0FBUyxDQUFDLFVBQVU7QUFDbkIsb0JBQVEsTUFBTSxVQUFVLEtBQUs7QUFBQSxVQUM5QjtBQUFBLFVBQ0EsY0FBYyxDQUFDLFNBQVM7QUFDdkIsZ0JBQUksYUFBYTtBQUNoQiwwQkFBWSxjQUNYLEtBQUssU0FBUyxhQUNYLGFBQ0E7QUFBQSxZQUNMO0FBQUEsVUFDRDtBQUFBLFFBQ0QsQ0FBQztBQUFBLE1BQ0YsU0FBUyxPQUFQO0FBQ0QsZ0JBQVEsTUFBTSxpQ0FBaUMsS0FBSztBQUFBLE1BQ3JEO0FBQUEsSUFDRDtBQUVBLFVBQU0sbUJBQW1CLFlBQVk7QUFDcEMsVUFBSSxLQUFLLGNBQWM7QUFDdEIsY0FBTSxLQUFLLGFBQWEsV0FBVztBQUNuQyxhQUFLLGVBQWU7QUFBQSxNQUNyQjtBQUFBLElBQ0Q7QUFFQSxnQkFBWSxpQkFBaUIsU0FBUyxpQkFBaUI7QUFDdkQsZUFBVyxpQkFBaUIsU0FBUyxnQkFBZ0I7QUFBQSxFQUN0RDtBQUFBLEVBRUEsTUFBTSxVQUFVO0FBQ2YsVUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixRQUFJLEtBQUssY0FBYztBQUN0QixZQUFNLEtBQUssYUFBYSxXQUFXO0FBQUEsSUFDcEM7QUFDQSxjQUFVLE1BQU07QUFBQSxFQUNqQjtBQUNEO0FBRUEsSUFBTSx1Q0FBTixjQUFtRCxpQ0FBaUI7QUFBQSxFQUduRSxZQUFZLEtBQVUsUUFBMEM7QUFDL0QsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDZjtBQUFBLEVBRUEsVUFBZ0I7QUFDZixVQUFNLEVBQUUsWUFBWSxJQUFJO0FBRXhCLGdCQUFZLE1BQU07QUFFbEIsUUFBSSx3QkFBUSxXQUFXLEVBQ3JCLFFBQVEscUJBQXFCLEVBQzdCLFFBQVEscUJBQXFCLEVBQzdCO0FBQUEsTUFBUSxDQUFDLFNBQ1QsS0FDRSxlQUFlLHFCQUFxQixFQUNwQyxTQUFTLEtBQUssT0FBTyxTQUFTLE9BQU8sRUFDckMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsVUFBVTtBQUMvQixjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBQ0Q7IiwKICAibmFtZXMiOiBbImFycmF5QnVmZmVyVG9CYXNlNjQiLCAiYiIsICJidWZmZXIiLCAiVWludDhBcnJheSIsICJ3aW5kb3ciLCAiYnRvYSIsICJTdHJpbmciLCAiZnJvbUNoYXJDb2RlIiwgImJhc2U2NFRvQXJyYXlCdWZmZXIiLCAiYmFzZTY0IiwgImJpbmFyeVN0cmluZyIsICJhdG9iIiwgImxlbiIsICJsZW5ndGgiLCAiYnl0ZXMiLCAiaSIsICJjaGFyQ29kZUF0IiwgImJsb2IiLCAiQmxvYiIsICJ0eXBlIiwgInJhd0F1ZGlvUHJvY2Vzc29yIiwgIlVSTCIsICJjcmVhdGVPYmplY3RVUkwiLCAiaXNJb3NEZXZpY2UiLCAiaW5jbHVkZXMiLCAibmF2aWdhdG9yIiwgInBsYXRmb3JtIiwgInVzZXJBZ2VudCIsICJkb2N1bWVudCIsICJJbnB1dCIsICJjcmVhdGUiLCAic2FtcGxlUmF0ZSIsICJmb3JtYXQiLCAicHJlZmVySGVhZHBob25lc0Zvcklvc0RldmljZXMiLCAiY29udGV4dCIsICJpbnB1dFN0cmVhbSIsICJvcHRpb25zIiwgImlkZWFsIiwgImVjaG9DYW5jZWxsYXRpb24iLCAibm9pc2VTdXBwcmVzc2lvbiIsICJpZGVhbERldmljZSIsICJtZWRpYURldmljZXMiLCAiZW51bWVyYXRlRGV2aWNlcyIsICJmaW5kIiwgImQiLCAia2luZCIsICJrZXl3b3JkIiwgImxhYmVsIiwgInRvTG93ZXJDYXNlIiwgImRldmljZUlkIiwgInN1cHBvcnRzU2FtcGxlUmF0ZUNvbnN0cmFpbnQiLCAiZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMiLCAiQXVkaW9Db250ZXh0IiwgImFuYWx5c2VyIiwgImNyZWF0ZUFuYWx5c2VyIiwgImF1ZGlvV29ya2xldCIsICJhZGRNb2R1bGUiLCAiZ2V0VXNlck1lZGlhIiwgImF1ZGlvIiwgInNvdXJjZSIsICJjcmVhdGVNZWRpYVN0cmVhbVNvdXJjZSIsICJ3b3JrbGV0IiwgIkF1ZGlvV29ya2xldE5vZGUiLCAicG9ydCIsICJwb3N0TWVzc2FnZSIsICJjb25uZWN0IiwgInJlc3VtZSIsICJlcnJvciIsICJfaW5wdXRTdHJlYW0iLCAiX2NvbnRleHQiLCAiZ2V0VHJhY2tzIiwgImZvckVhY2giLCAidHJhY2siLCAic3RvcCIsICJjbG9zZSIsICJjb25zdHJ1Y3RvciIsICJ0aGlzIiwgImF1ZGlvQ29uY2F0UHJvY2Vzc29yIiwgIk91dHB1dCIsICJnYWluIiwgImNyZWF0ZUdhaW4iLCAiZGVzdGluYXRpb24iLCAiaXNWYWxpZFNvY2tldEV2ZW50IiwgImV2ZW50IiwgIkNvbm5lY3Rpb24iLCAiY29uZmlnIiwgInNvY2tldCIsICJfY29uZmlnJG9yaWdpbiIsICJvcmlnaW4iLCAidXJsIiwgInNpZ25lZFVybCIsICJhZ2VudElkIiwgInByb3RvY29scyIsICJhdXRob3JpemF0aW9uIiwgInB1c2giLCAiV2ViU29ja2V0IiwgImNvbnZlcnNhdGlvbkNvbmZpZyIsICJQcm9taXNlIiwgInJlc29sdmUiLCAicmVqZWN0IiwgImFkZEV2ZW50TGlzdGVuZXIiLCAiX3NvY2tldCIsICJvdmVycmlkZXNFdmVudCIsICJfY29uZmlnJG92ZXJyaWRlcyRhZ2UiLCAiX2NvbmZpZyRvdmVycmlkZXMkYWdlMiIsICJfY29uZmlnJG92ZXJyaWRlcyRhZ2UzIiwgIl9jb25maWckb3ZlcnJpZGVzJHR0cyIsICJvdmVycmlkZXMiLCAiY29udmVyc2F0aW9uX2NvbmZpZ19vdmVycmlkZSIsICJhZ2VudCIsICJwcm9tcHQiLCAiZmlyc3RfbWVzc2FnZSIsICJmaXJzdE1lc3NhZ2UiLCAibGFuZ3VhZ2UiLCAidHRzIiwgInZvaWNlX2lkIiwgInZvaWNlSWQiLCAiY3VzdG9tTGxtRXh0cmFCb2R5IiwgImN1c3RvbV9sbG1fZXh0cmFfYm9keSIsICJkeW5hbWljVmFyaWFibGVzIiwgImR5bmFtaWNfdmFyaWFibGVzIiwgInNlbmQiLCAiSlNPTiIsICJzdHJpbmdpZnkiLCAib25jZSIsICJzZXRUaW1lb3V0IiwgIm1lc3NhZ2UiLCAicGFyc2UiLCAiZGF0YSIsICJjb252ZXJzYXRpb25faW5pdGlhdGlvbl9tZXRhZGF0YV9ldmVudCIsICJjb25zb2xlIiwgIndhcm4iLCAiY29udmVyc2F0aW9uX2lkIiwgImFnZW50X291dHB1dF9hdWRpb19mb3JtYXQiLCAidXNlcl9pbnB1dF9hdWRpb19mb3JtYXQiLCAiaW5wdXRGb3JtYXQiLCAicGFyc2VGb3JtYXQiLCAib3V0cHV0Rm9ybWF0IiwgIl9zb2NrZXQyIiwgImNvbnZlcnNhdGlvbklkIiwgInF1ZXVlIiwgImRpc2Nvbm5lY3Rpb25EZXRhaWxzIiwgIm9uRGlzY29ubmVjdENhbGxiYWNrIiwgIm9uTWVzc2FnZUNhbGxiYWNrIiwgImRpc2Nvbm5lY3QiLCAicmVhc29uIiwgImNvZGUiLCAicGFyc2VkRXZlbnQiLCAiXyIsICJzZW5kTWVzc2FnZSIsICJvbk1lc3NhZ2UiLCAiY2FsbGJhY2siLCAib25EaXNjb25uZWN0IiwgImRldGFpbHMiLCAiX3RoaXMkb25EaXNjb25uZWN0Q2FsIiwgImNhbGwiLCAiZm9ybWF0UGFydCIsICJzYW1wbGVSYXRlUGFydCIsICJzcGxpdCIsICJFcnJvciIsICJwYXJzZUludCIsICJpc05hTiIsICJkZWZhdWx0Q2xpZW50VG9vbHMiLCAiY2xpZW50VG9vbHMiLCAiZGVmYXVsdENhbGxiYWNrcyIsICJvbkNvbm5lY3QiLCAib25EZWJ1ZyIsICJvbkVycm9yIiwgIm9uTW9kZUNoYW5nZSIsICJvblN0YXR1c0NoYW5nZSIsICJvbkNhblNlbmRGZWVkYmFja0NoYW5nZSIsICJDb252ZXJzYXRpb24iLCAiZnVsbE9wdGlvbnMiLCAiX2V4dGVuZHMiLCAic3RhdHVzIiwgImNhblNlbmRGZWVkYmFjayIsICJpbnB1dCIsICJjb25uZWN0aW9uIiwgIm91dHB1dCIsICJwcmVsaW1pbmFyeUlucHV0U3RyZWFtIiwgIl9vcHRpb25zJGNvbm5lY3Rpb25EZSIsICJfcHJlbGltaW5hcnlJbnB1dFN0cmUiLCAiZGVsYXlDb25maWciLCAiY29ubmVjdGlvbkRlbGF5IiwgImRlZmF1bHQiLCAiYW5kcm9pZCIsICJkZWxheSIsICJfZGVsYXlDb25maWckYW5kcm9pZCIsICJ0ZXN0IiwgIl9kZWxheUNvbmZpZyRpb3MiLCAiaW9zIiwgImFsbCIsICJfcHJlbGltaW5hcnlJbnB1dFN0cmUyIiwgIl9jb25uZWN0aW9uIiwgIl9pbnB1dCIsICJfb3V0cHV0IiwgIl90aGlzIiwgImxhc3RJbnRlcnJ1cHRUaW1lc3RhbXAiLCAibW9kZSIsICJpbnB1dEZyZXF1ZW5jeURhdGEiLCAib3V0cHV0RnJlcXVlbmN5RGF0YSIsICJ2b2x1bWUiLCAiY3VycmVudEV2ZW50SWQiLCAibGFzdEZlZWRiYWNrRXZlbnRJZCIsICJlbmRTZXNzaW9uIiwgImVuZFNlc3Npb25XaXRoRGV0YWlscyIsICJhc3luYyIsICJ1cGRhdGVTdGF0dXMiLCAidXBkYXRlTW9kZSIsICJ1cGRhdGVDYW5TZW5kRmVlZGJhY2siLCAiaW50ZXJydXB0aW9uX2V2ZW50IiwgImV2ZW50X2lkIiwgImZhZGVPdXRBdWRpbyIsICJhZ2VudF9yZXNwb25zZV9ldmVudCIsICJhZ2VudF9yZXNwb25zZSIsICJ1c2VyX3RyYW5zY3JpcHRpb25fZXZlbnQiLCAidXNlcl90cmFuc2NyaXB0IiwgInJlc3BvbnNlIiwgInRlbnRhdGl2ZV9hZ2VudF9yZXNwb25zZV9pbnRlcm5hbF9ldmVudCIsICJ0ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2UiLCAiaGFzT3duUHJvcGVydHkiLCAiY2xpZW50X3Rvb2xfY2FsbCIsICJ0b29sX25hbWUiLCAiX2F3YWl0JF90aGlzJG9wdGlvbnMkIiwgInJlc3VsdCIsICJwYXJhbWV0ZXJzIiwgInRvb2xfY2FsbF9pZCIsICJpc19lcnJvciIsICJlIiwgImNsaWVudFRvb2xOYW1lIiwgIm9uVW5oYW5kbGVkQ2xpZW50VG9vbENhbGwiLCAiYXVkaW9fZXZlbnQiLCAiYWRkQXVkaW9CYXNlNjRDaHVuayIsICJhdWRpb19iYXNlXzY0IiwgInBpbmdfZXZlbnQiLCAib25JbnB1dFdvcmtsZXRNZXNzYWdlIiwgInVzZXJfYXVkaW9fY2h1bmsiLCAib25PdXRwdXRXb3JrbGV0TWVzc2FnZSIsICJmaW5pc2hlZCIsICJjaHVuayIsICJ2YWx1ZSIsICJleHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lIiwgImN1cnJlbnRUaW1lIiwgImNhbGN1bGF0ZVZvbHVtZSIsICJmcmVxdWVuY3lEYXRhIiwgImdldElkIiwgImlzT3BlbiIsICJzZXRWb2x1bWUiLCAiZ2V0SW5wdXRCeXRlRnJlcXVlbmN5RGF0YSIsICJfdGhpcyRpbnB1dEZyZXF1ZW5jeUQiLCAiZnJlcXVlbmN5QmluQ291bnQiLCAiZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEiLCAiZ2V0T3V0cHV0Qnl0ZUZyZXF1ZW5jeURhdGEiLCAiZ2V0SW5wdXRWb2x1bWUiLCAiZ2V0T3V0cHV0Vm9sdW1lIiwgInNlbmRGZWVkYmFjayIsICJsaWtlIiwgInNjb3JlIiwgIm9ubWVzc2FnZSIsICJmIl0KfQo=
